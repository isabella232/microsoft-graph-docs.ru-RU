---
title: Использование интерфейса API REST планировщик работы
description: В Microsoft Graph можно использовать планировщик работы API для создания задачи и назначения их для пользователей в группу в Office 365.
author: TarkanSevilmis
localization_priority: Priority
ms.openlocfilehash: bf6af385e2d03eb59a41459dcf7fdd4454f1e00d
ms.sourcegitcommit: d2b3ca32602ffa76cc7925d7f4d1e2258e611ea5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/11/2019
ms.locfileid: "27808206"
---
# <a name="use-the-planner-rest-api"></a>Использование интерфейса API REST планировщик работы

> **Важно!** API бета-версии (/beta) в Microsoft Graph проходят тестирование и могут быть изменены. Использование этих API в производственных приложениях не поддерживается.

В Microsoft Graph можно использовать планировщик работы API для создания задачи и назначения их для пользователей в группу в Office 365.

Перед началом работы с API планировщик работы, оно будет полезно понять, как основные объекты связаны друг с другом также как, чтобы группы Office 365.

## <a name="office-365-groups"></a>Группы Office 365

Группы Office 365 — это владельцев планы в API планировщик работы.
[Получение планы, владельцем которого в группу](../api/plannergroup-list-plans.md)чтобы следующие HTTP-запроса.

``` http
GET /groups/{id}/planner/plans
```

При [создании нового плана](../api/planner-post-plans.md), сделать его владелец группы, задав `owner` свойство объекта плана. Планы должен принадлежать по группам.

>**Примечание:** Пользователя, создающего план должен быть членом группы, который будет владельцем плана. При создании новой группы с помощью [Создать группу](../api/group-post-groups.md), вы не добавляются в группу как члена группы. После создания группы добавьте себя в качестве члена с помощью [учета членов группы](../api/group-post-members.md).

## <a name="plans"></a>Планы

[Планы](plannerplan.md) — это контейнеры [задачи](plannertask.md). [Создание задачи в плане](../api/planner-post-tasks.md), задайте `planId` свойство объекта задач в идентификатор плана при создании задачи.
В настоящее время не создаются задачи без планы.
Для [получения задачи в плане](../api/plannerplan-list-tasks.md)внесите следующие HTTP-запроса.

``` http
GET /planner/plans/{id}/tasks
```

## <a name="tasks"></a>Задачи

Задачу можно назначить пользователю, добавив [назначение](plannerassignment.md) в свойстве [assignments](plannerassignments.md) объекта задачи. Идентификатор исполнителя задачи — это имя открытого свойства `assignments`, необходимо также указать свойство `orderHint` назначения.

## <a name="task-and-plan-details"></a>Данные задач и плана 

Ресурсы Планировщика делятся на базовые объекты и объекты сведений. Базовые объекты предоставляют доступ к основным свойствам ресурсов, подходящим для списков, а объекты сведений обеспечивают доступ к большим свойствам ресурсов, которые подходят для развернутых представлений.

## <a name="visualization"></a>Визуализация

Помимо задач и планирование данные планировщик работы API представлены ресурсы для создания распространенных визуализации данных между клиентами. Несколько типов визуализации данных доступны для задач, перечисленные в следующей таблице.

| Способ представления задач                                                                        | Источник информации для упорядочивания задач                                         |
| :---------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ |
| Простой список (задачи в плане)                                                               | Свойство `orderHint` задач                                                   |
| Простой список (задачи, назначенные пользователю)                                                      | Свойство `assigneePriority` задач                                            |
| Доска со столбцами для исполнителей (доска задач "Кому назначено")                            | Объект [assignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md) |
| Доска со столбцами для хода выполнения задачи (доска задач "Ход выполнения") | Объект [progressTaskBoardTaskFormat](plannerprogresstaskboardtaskformat.md)     |
| Доска с настраиваемыми столбцами задач (доска задач "Сегменты"):                              | Объект [bucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md)         |

Настраиваемые столбцы на доске задач "Сегменты" представлены объектами [сегмент](plannerbucket.md), а их порядок — свойством `orderHint` объекта.

Всего упорядочения управляет принципы, описанные в [порядке подсказки планировщик работы](planner-order-hint-format.md).

## <a name="delta">Отслеживание изменений с помощью запроса дельты</a>

Планировщик работы пользователя дельты запросов поддерживает запросы к объектам, которые подписан пользователь.

Пользователи подписаны следующие объекты.

| Тип ресурса планировщик работы | Подписанный экземпляры                                                                                                                                                                                    |
| :-------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Задачи                 | <ul><li>Создаваемые пользователем</li><li>Назначенные пользователю</li><li>Принадлежит планирование, которому принадлежит пользователь</li><li>В план совместно с пользователем с помощью коллекции **SharedWith** плана</li> |
| Планы                 | <ul><li>Совместно с пользователем с помощью коллекции **SharedWith** плана</li></ul>                                                                                                                     |
| Контейнеры               | <ul><li>В план совместно с пользователем с помощью коллекции **SharedWith** плана</li></ul>                                                                                                 |  |

### <a name="objectcache">Заполнение кэша объектов для запросов дельты</a>

Если вы хотите использовать планировщик работы дельты запрос API, Ведение локальный кэш объектов, что пользователь заинтересована в наблюдения для применения изменений из веб-канал ответа дельты.

Объекты дельты полезных данных, которые в настоящее время может возвратить запрос дельты планировщик работы как из следующих типов:

* [plannerTask](plannertask.md);
* [plannerTaskDetails](plannertaskdetails.md);
* [plannerPlan](plannerplan.md)
* [plannerPlanDetails](plannerplandetails.md);
* [plannerBucket](plannerbucket.md);
* [plannerAssignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md);
* [plannerBucketTaskBoardTaskFormat](plannerbuckettaskboardtaskformat.md);
* [plannerAssignedToTaskBoardTaskFormat](plannerassignedtotaskboardtaskformat.md);

Используйте соответствующий `GET` методы на ресурс для получения исходное состояние объектов, которые следует добавить в локальный кэш.

### <a name="differentiating-between-object-creation-and-object-modification"></a>Различие объектов создания и изменения объектов

В некоторых сценариях Звонящий может потребоваться различать объект создания и изменения объектов в запросе дельты планировщик работы по веб-канала.

Эти руководства можно использовать для создания объектов:

* `createdBy` Свойство отображается только для только что созданный объектов.
* Только что созданным `plannerTask` объекта будет следовать соответствующим `plannerTaskDetails` объекта.
* Только что созданным `plannerPlan` объекта будет следовать соответствующим `plannerPlanDetails` объекта.

### <a name="usage"></a>Применение

Вызывающего должен иметь кэша, содержащего подписанный объекты. Для получения дополнительных сведений о том, как для заполнения локальный кэш объектов, подписанный видеть [заполнить кэша объектов для запросов дельты](#populate-the-object-cache-for-delta-queries).

Поток вызовов запроса дельты планировщик работы выглядит следующим образом:

1. Звонящий инициирует запрос синхронизации дельты получение `nextLink` и пустую коллекцию изменений.
2. Вызывающий объект должен в [заполнения кэша объектов для запросов дельты](#populate-the-object-cache-for-delta-queries) объектов, что пользователь подписан, обновление кэша.
3. Исходя из вызывающего `nextLink` в начальной дельты синхронизации запроса для получения нового `deltaLink` для изменения с момента предыдущем шаге.
4. Вызывающего применяет изменения в ответе возвращенные дельты к объектам в кэше.
5. Вызывающего следуют новые deltaLink для получения следующей deltaLink и изменения со времени текущего `deltaLink` был создан.
6. Вызывающего применяет изменения (при их наличии) и ожидает короткое время, прежде, чем перезапустить и предыдущий шаг и это действие.

## <a name="planner-resource-versioning"></a>Версии ресурсов в Планировщике

Планировщик работы версий все ресурсы с помощью **теги eTag**. Эти **теги eTag** возвращаются с `@odata.etag` свойства для каждого ресурса. `PATCH`и `DELETE` запросов требуется последнего **etag** , известные клиентом для указанных с `If-Match` заголовка.
Планировщик работы позволяет изменений в старых версиях ресурсы, если предполагаемая изменений не конфликтует с новой изменения обслуживаемые службой Планировщик работы на тот же ресурс. Клиенты могут определять, какие **etag** для тот же ресурс новее с помощью вычисления значение **etag** , которое больше в порядковый номер строковое сравнение. Каждый ресурс имеет уникальный **etag**. Нельзя сравнивать значений тегов eTag для различных ресурсов, в том числе с отношениями содержания.
Клиентские приложения должны обрабатывать управление версиями и связанные с [коды ошибок](/graph/errors) **409** **412** путем чтения последней версии элемента и разрешение конфликтующих изменений.

## <a name="common-planner-error-conditions"></a>Основные ошибки Планировщика

В дополнение к [общим ошибкам](/graph/errors) Microsoft Graph, некоторые ошибки относятся только к API Планировщика.

### <a name="400-bad-request"></a>400 (неправильный запрос)

В некоторые общие сценарии `POST` и `PATCH` запросов может возвратить код состояния 400. Ниже приведены некоторые из наиболее распространенным причинам.

* Открытые свойства имеют неправильный тип, тип не указан, или они не содержат свойств. Например, свойства [plannerAssignments](plannerassignments.md) со сложными значениями должны объявлять свойство `@odata.type` со значением `microsoft.graph.plannerAssignment`.
* Указания по упорядочиванию имеют [неправильный формат](planner-order-hint-format.md). Например, в качестве указания по упорядочиванию задается значение, возвращаемое клиенту.
* Данные логически не согласованы. Например, дата начала задачи позже даты выполнения задачи.

### <a name="403-forbidden"></a>403 (доступ запрещен)

В дополнение к общих ошибок API планировщик работы также возвращает код состояния 403 при превышении ограничений, определенные службы. Если это так, `code` свойство для типа ресурсов ошибка будет указывать тип предел в запросе.
Ниже приведены возможные значения для типов ограничений.

| Значение                         | Описание                                                                                                                                                                                              |
| :---------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| MaximumProjectsOwnedByUser    | Превышено максимальное количество планов, принадлежащих группе. Это ограничение основано на свойстве `owner` ресурса [plannerPlan](plannerplan.md).                                         |
| MaximumProjectsSharedWithUser | Пользователю предоставлен доступ к максимальному количеству планов.  Это ограничение основано на свойстве `sharedWith` ресурса [plannerPlanDetails](plannerplandetails.md).                   |
| MaximumTasksCreatedByUser     | Пользователь создал максимальное количество задач. Это ограничение основано на свойстве `createdBy` ресурса [plannerTask](plannertask.md).                                    |
| MaximumTasksAssignedToUser    | Пользователю назначено максимальное количество задач. Это ограничение основано на свойстве `assignments` ресурса [plannerTask](plannertask.md).                                 |
| MaximumTasksInProject         | Превышено максимальное количество задач в плане. Это ограничение основано на свойстве `planId` ресурса [plannerTask](plannertask.md).                                               |
| MaximumActiveTasksInProject   | Превышено максимальное количество невыполненных задач в плане. Это ограничение основано на свойствах `planId` и `percentComplete` ресурса [plannerTask](plannertask.md). |
| MaximumBucketsInProject       | Превышено максимальное количество сегментов в плане. Это ограничение основано на свойстве `planId` ресурса [plannerBucket](plannerbucket.md).                                         |
| MaximumUsersSharedWithProject | Свойство `sharedWith` ресурса [plannerPlanDetails](plannerplandetails.md) содержит слишком много значений.                                                                                          |
| MaximumReferencesOnTask       | Свойство `references` ресурса [plannerTaskDetails](plannertaskdetails.md) содержит слишком много значений.                                                                                          |
| MaximumChecklistItemsOnTask   | Свойство `checklist` ресурса [plannerTaskDetails](plannertaskdetails.md) содержит слишком много значений.                                                                                           |
| MaximumAssigneesInTasks       | Свойство `assignments` ресурса [plannerTask](plannertask.md) содержит слишком много значений.                                                                                                       |
| MaximumFavoritePlansForUser   | `favoritePlanReferences` Свойство ресурса [plannerUser](planneruser.md) содержит слишком много значений.                                                                                            |
| MaximumRecentPlansForUser     | `recentPlanReferences` Свойство ресурса [plannerUser](planneruser.md) содержит слишком много значений.                                                                                              |
| MaximumContextsOnPlan         | `contexts` Свойство ресурса [plannerPlan](plannerplan.md) содержит слишком много значений.                                                                                                          |
| MaximumPlannerPlans       | Группа уже содержит план. На данный момент группы могут содержать только один план. **Примечание:** Некоторые приложения Майкрософт могут превышать данное ограничение. В будущем мы расширить эту возможность ко всем приложениям.                                                                                                      |

### <a name="412-precondition-failed"></a>412 (необходимое условие не выполнено) 

Все API Planer `POST`, `PATCH`, и `DELETE` запросов требуется `If-Match` заголовка для указанных с последней значение etag известные ресурса, который зависит от запроса.
Код состояния 412 также могут быть возвращены, если значение etag, указанное в запросе больше не соответствует версии ресурсов в службе. В этом случае клиентов следует прочитать ресурса еще раз и получить новый etag.


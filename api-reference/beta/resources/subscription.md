---
title: Тип ресурса subscription
description: Подписка позволяет клиентскому приложению получать уведомления об изменениях данных в Microsoft Graph. На данный момент подписки включены для указанных ниже ресурсов.
localization_priority: Normal
author: baywet
doc_type: resourcePageType
ms.prod: ''
ms.openlocfilehash: d16e312037b79e550f4cf7b5c2e9aa4806e049d2
ms.sourcegitcommit: 7b286637aa332cfd534a41526950b4f6272e0fd7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2020
ms.locfileid: "41774494"
---
# <a name="subscription-resource-type"></a>Тип ресурса subscription

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]

Подписка позволяет клиентскому приложению получать уведомления об изменениях данных в Microsoft Graph. На данный момент подписки включены для указанных ниже ресурсов.

- [Оповещение][] из Microsoft Graph Security API
- [ChatMessage][] , отправленный через Teams или каналы в Microsoft Teams
- [Беседа][] в группе Office 365
- Контент в иерархии корневой папки [driveItem][] в OneDrive для бизнеса либо корневой или вложенной папке [driveItem][] в личном хранилище OneDrive пользователя.
- [Сообщение][], [событие][] или [контакт][] в Outlook
- [Пользователь][] или [группа][] в Azure Active Directory

## <a name="methods"></a>Методы

| Метод | Возвращаемый тип | Описание |
|:-------|:------------|:------------|
| [Создание подписки](../api/subscription-post-subscriptions.md) | [subscription](subscription.md) | Создание подписки для приложения прослушивателя, чтобы можно было получать уведомления при изменении данных в Microsoft Graph. |
| [Обновление подписки](../api/subscription-update.md) | [subscription](subscription.md) | Продлить подписку, обновив срок ее действия. |
| [Перечисление подписок](../api/subscription-list.md) | [subscription](subscription.md) | Перечисление активных подписок. |
| [Получение подписки](../api/subscription-get.md) | [subscription](subscription.md) | Чтение свойств и связей объекта Subscription. |
| [Удаление подписки](../api/subscription-delete.md) | Нет | Удаление объекта подписки. |

## <a name="properties"></a>Свойства

| Свойство | Тип | Описание |
|:---------|:-----|:------------|
| changeType | строка | Указывает тип изменения в ресурсе, на который оформлена подписка и при возникновении которого будет создано уведомление. Поддерживаемые значения: `created`, `updated`, `deleted`. Вы можете объединить несколько значений, указав их в списке с разделителями-запятыми. Обязательный элемент. <br><br>Примечание. Уведомления о корневых элементах диска поддерживают только `updated` changeType. Уведомления о пользователе и группе поддерживают `updated` и `deleted` changeType. |
| notificationUrl | строка | URL-адрес конечной точки, принимающей уведомления. Этот URL-адрес должен использовать протокол HTTPS. Обязательный элемент. |
| лифецикленотификатионурл | строка | URL-адрес конечной точки, которая получает уведомления жизненного `subscriptionRemoved` цикла `missed` , включая и уведомления. Если этот параметр не указан, уведомления будут доставляться в **notificationUrl**. Этот URL-адрес должен использовать протокол HTTPS. Необязательное свойство. <br><br>[Узнайте больше](/graph/webhooks-outlook-authz) о том, как ресурсы Outlook используют Уведомления жизненного цикла. |
| resource | string | Указывает ресурс, для которого будут отслеживаться изменения. Не включайте базовый URL-адрес (`https://graph.microsoft.com/beta/`). Обязательный элемент. |
| expirationDateTime | DateTimeOffset | Указывает дату и время истечения срока действия подписки на веб-перехватчик. Используется время в формате UTC, и оно может представлять собой время с момента создания подписки, которое зависит от ресурса, на который оформлена подписка.  В приведенной ниже таблице указан максимально допустимый период подписки. Обязательный элемент. |
| clientState | строка | Задает значение свойства **clientState** , которое отправляется службой в каждом уведомлении. Максимальная длина: 255 символов. Клиент может проверить, что уведомление поступило из службы, сравнив значение свойства **clientState** , отправленного с подпиской, со значением свойства **clientState** , полученного при каждом уведомлении. Необязательное свойство. |
| id | строка | Уникальный идентификатор для подписки. Только для чтения. |
| applicationId | строка | Идентификатор приложения, использованного для создания подписки. Только для чтения. |
| creatorId | string | Идентификатор пользователя или субъекта-службы, которые создали подписку. Если приложение использовало делегированные разрешения для создания подписки, это поле содержит идентификатор пользователя, выполнившего вход в систему, вызываемую приложением от имени. Если приложение использовало разрешения приложения, это поле содержит идентификатор участника службы, соответствующего приложению. Только для чтения. |
| инклудересаурцедата | Логический | Если задано `true`значение, уведомления об изменении [включают данные ресурса](/graph/webhooks-with-resource-data) (например, содержимое сообщения чата). Необязательное свойство. | 
| енкриптионцертификате | строка | Представление сертификата с кодировкой base64 с открытым ключом, используемым для шифрования данных ресурсов в уведомлениях. Необязательное свойство. Является обязательным, если **инклудересаурцедата** имеет значение true. | 
| енкриптионцертификатеид | строка | Настраиваемый идентификатор, предоставляемый приложением, для определения сертификата, необходимого для расшифровки данных ресурса. Необязательное свойство. Является обязательным, если **инклудересаурцедата** имеет значение true. |
| латестсуппортедтлсверсион | Строка | Задает последнюю версию протокола TLS, поддерживаемую конечной точкой уведомления. Позволяет подписчикам использовать устаревшую версию протокола TLS в течение ограниченного периода. Возможные значения: **v1_0**, **v1_1**, **v1_2**, **v1_3**. Необязательный параметр, по умолчанию v1_2. Если конечная точка клиента поддерживает TLS 1,2 или более поздней версии, это свойство не требуется. Если конечная точка клиента поддерживает только протокол TLS 1,0 или 1,1, этому свойству необходимо присвоить соответствующую версию, иначе операция завершится с ошибками. |

### <a name="maximum-length-of-subscription-per-resource-type"></a>Максимальный период подписки для каждого из типов ресурсов

| Ресурс            | Максимальное время истечения срока действия  |
|:--------------------|:-------------------------|
| **Оповещение** безопасности     | 43200 минут (до 30 дней)  |
| **ChatMessage** Teams    | 60 минут (1 час)  |
| Групповая **беседа** | 4230 минут (до 3 дней)    |
| OneDrive для **driveItem**    | 4230 минут (до 3 дней)    |
| **Сообщение**Outlook, **событие**, **контакт**              | 4230 минут (до 3 дней)    |
| **Пользователи**, **группы**и другие ресурсы каталога   | 4230 минут (до 3 дней)    |


> **Примечание.** Для существующих приложений и новых приложений не должно превышаться допустимое значение. В будущем любые запросы на создание или продление подписки со значением, превышающим максимальное, будут завершаться ошибкой.

## <a name="relationships"></a>Отношения

Отсутствуют.

## <a name="json-representation"></a>Представление в формате JSON

Ниже представлено описание ресурса в формате JSON.

<!-- {
  "blockType": "resource",
  "optionalProperties": [

  ],
  "@odata.type": "microsoft.graph.subscription"
}-->

```json
{
  "changeType": "string",
  "notificationUrl": "string",
  "lifecycleNotificationUrl": "string",
  "resource": "string",
  "applicationId" : "string",
  "expirationDateTime": "string (timestamp)",
  "id": "string (identifier)",
  "clientState": "string",
  "creatorId": "string",
  "includeResourceData": "boolean",
  "encryptionCertificate": "string",
  "encryptionCertificateId": "string",
  "latestSupportedTlsVersion": "string"
}
```

[contact]: ./contact.md
[conversation]: ./conversation.md
[driveItem]: ./driveitem.md
[event]: ./event.md
[group]: ./group.md
[message]: ./message.md
[user]: ./user.md
[alert]: ./alert.md
[chatMessage]: ./chatmessage.md

<!-- uuid: 8fcb5dbc-d5aa-4681-8e31-b001d5168d79
2015-10-25 14:57:30 UTC -->
<!--
{
  "type": "#page.annotation",
  "description": "subscription resource",
  "keywords": "",
  "section": "documentation",
  "tocPath": "",
  "suppressions": []
}
-->

---
title: Работа с звонки и API собрания по сети в Microsoft Graph
description: Microsoft Graph вызывает и собрания по сети API добавляет нового измерения для приложений и служб взаимодействие с пользователями, включив функции звука и видео. API-Интерфейс позволяет создавать вызовы и принимать звонки от пользователей и приложений в группах Microsoft. Эти интерфейсы API можно использовать для создания приложения-службы (программы-робота), могут выступать в качестве участника в звонка или собрания.
ms.openlocfilehash: fcb1d69e204f5bba7c1ece01bcd61ae21f6ca6b4
ms.sourcegitcommit: 334e84b4aed63162bcc31831cffd6d363dafee02
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/29/2018
ms.locfileid: "27075146"
---
# <a name="working-with-the-calls-and-online-meetings-api-in-microsoft-graph"></a>Работа с звонки и API собрания по сети в Microsoft Graph

> **Важно!** API бета-версии (/beta) в Microsoft Graph проходят тестирование и могут быть изменены. Использование этих API в производственных приложениях не поддерживается.

Microsoft Graph вызывает и собрания по сети API добавляет нового измерения для приложений и служб взаимодействие с пользователями, включив функции звука и видео. API-Интерфейс позволяет создавать вызовы и принимать звонки от пользователей и приложений в группах Microsoft. Эти интерфейсы API можно использовать для создания приложения-службы (программы-робота), могут выступать в качестве участника в звонка или собрания.

## <a name="call-types"></a>Типы звонков

Вызовы классифицируются как peer-to-peer или многопользовательских звонков. Пользователь может начать видеозвонок peer-to-peer с вашей программа-робот или приглашение к программы-робота в существующей многосторонней конференции. Нет разрешения необходимы, приглашая робот peer-to-peer звонок пользователя. Для вашего программа-робот для участия в многопользовательских звонков робот должен иметь разрешение администратора клиента для присоединения к звонок группы.

![Рисунок, демонстрирующий peer-to-peer и многопользовательских звонков](https://cdn.graph.office.net/prod/GraphDocuments/en-us/concepts/images/call-types.png)

Вашей программа-робот при создании звонок, он должен иметь инициирование или разрешение инициирования групповой звонок. Вашей программа-робот имеет возможность создания peer-to-peer вызов или несколькими участниками.

- Для вызова peer-to-peer робот необходимо указать только одно целевое и координаты не собрания. 
- Если ваше программа-робот инициирует звонка с несколькими участниками, Настройка специального собрания в фоновом режиме и всем пользователям присоединит этой конференции. Если собрание координаты заданы, многопользовательских звонков настраивается даже в том случае, если имеется только один целевой.

Вызов может запустить как peer-to-peer и переведите ее в многопользовательских. Автоматически подготовлены конференции и конференции — это перенаправлена мультимедиа. Ваше программа-робот можно инициировать эскалации, приглашение других пользователей, предоставляемые вашей программа-робот имеет разрешение инициирования групповой звонок. Если эскалации инициируется другому участнику, робот не имеет разрешения присоединиться к группе звонков вашей программа-робот удаляется из вызова.

> **Важные:** При звонка перерастает из peer-to-peer в многопользовательских, доступны не все возможности многопользовательских. В частности робот не получит обновлений списка участников.

## <a name="signaling"></a>Сигнализация

### <a name="incoming-call"></a>Входящий звонок

Для получения на входящий звонок, необходимо зарегистрировать вызывающего робот. Когда программа-робот получает входящие уведомления, имеет следующие параметры.

| Метод                              | Description                                  |
|:------------------------------------|:---------------------------------------------|
| [Ответ](../api/call-answer.md)     | Ответьте на входящий звонок.                    |
| [Reject](../api/call-reject.md)     | Отклонить и завершить связь вызова.                  |
| [Redirect](../api/call-redirect.md) | Перенаправление звонка.                           |

Программа-робот можно перенаправить звонок на другого пользователя или робот. Робот также можно перенаправить звонок на голосовую почту пользователя.

![Рисунок, демонстрирующий робот Перенаправление звонков на голосовую почту](https://cdn.graph.office.net/prod/GraphDocuments/en-us/concepts/images/call-handling.png)

> **Важные:** Перенаправление или исходящие вызовы ТСОП в настоящее время не поддерживается.

### <a name="in-call"></a>Во время вызова

Операции для робот доступны объекта вызова. Они влияют на робот как участника в вызове.

| Метод                                                            | Description                                  |
|:------------------------------------------------------------------|:---------------------------------------------|
| [Отключить звук](../api/call-mute.md)                                       | Отключить звук self в вызове.                       |
| [Включение звука](../api/call-unmute.md)                                   | Включение звука self в вызове.                     |
| [UpdateMetadata](../api/call-updatemetadata.md)                   | Обновление метаданных для самообслуживания в списке.          |
| [ChangeScreenSharingRole](../api/call-changescreensharingrole.md) | Запуск и остановка совместного использования экрана в вызове.   |

Для взаимодействия с другими участниками на звонок, используйте объект участников.

| Метод                                                            | Description                                  |
|:------------------------------------------------------------------|:---------------------------------------------|
| [Список участников](../api/call-list-participants.md)             | Получите коллекцию объектов участников.         |
| [Приглашение участников](../api/participant-invite.md)               | Приглашение участников активного вызова.      |
| [Отключение всех участников](../api/participant-muteall.md)            | Отключение всех участников в вызове.           |

## <a name="media"></a>Мультимедиа

Обработка мультимедиа осуществляется с помощью платформы мультимедиа в режиме реального времени. Платформа мультимедиа в режиме реального времени помогает программы-роботы вступать в группами Майкрософт аудио и видео вызовы и собрания. Это позволяет в режиме реального времени программы-роботы участвовать в peer-to-peer и многопользовательских звонков.

При робот ответ на входящий вызов или присоединяет нового или существующего звонок, необходимо сообщить платформы мультимедиа в режиме реального времени, как будут обрабатываться мультимедиа. При создании системы интерактивного речевого ответа (IVR) может снизить нагрузку дорогостоящих звук, обработка мультимедиа размещенной службы Microsoft компонентов. Если ваше программа-робот требуется прямой доступ к мультимедийных потоков, мы предлагаем параметр размещенных приложений мультимедиа в пакете SDK мультимедиа в режиме реального времени.

### <a name="service-hosted-media"></a>Размещенные службы мультимедиа

Программы-роботы можно управлять рабочего процесса и разгрузки обработки звука на платформу Microsoft в реальном времени мультимедиа. Размещенные службы мультимедиа предоставляют возможности уточнены внедрение и размещения вашего программа-робот. Рекомендуется использовать один из доступных [пакетов SDK](https://developer.microsoft.com/graph/code-samples-and-sdks). Робот размещенные службы мультимедиа можно реализовать как без сведений о состоянии службы, как не будет обрабатывать локально мультимедиа.

| Метод                                                        | Description                                             |
|:--------------------------------------------------------------|:--------------------------------------------------------|
| [PlayPrompt](../api/call-playprompt.md)                       | Воспроизведение звука картинок для пользователя.                         |
| [Record](../api/call-record.md)                               | При необходимости воспроизвести запрос и записать звуковое сообщение.      |
| [SubscribeToTone](../api/call-subscribetotone.md)             | Подпишитесь на тоновых сигналов DTMF от пользователя.                  |
| [CancelMediaProcessing](../api/call-cancelmediaprocessing.md) | Отмена носителей уже обработки в очереди.             |

### <a name="application-hosted-media"></a>Размещенные приложения мультимедиа

Для программы-робота для получения прямой доступ к мультимедиа робот необходимо иметь права доступа к мультимедиа. Библиотека мультимедиа в реальном времени и ведением SDK поможет создать мультимедиа в режиме реального времени, вызов программы-роботы. Программа-робот размещенного приложения должны быть размещены в среде Windows. [Приложение размещаться примеры мультимедиа](https://github.com/microsoftgraph/microsoft-graph-comms-samples) показано, как создавать программы-робота на различных платформах Azure (включая облачные службы и службы Fabric).

[Пакет SDK Microsoft Graph вызовов](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/articles/index.html) можно использовать для упрощения создания программы-роботы. Пакет SDK предоставляет функциональные возможности для управления состояния ресурсов в памяти и по запросу в стеке мультимедиа разработчиков Программа-робот.

Пакет SDK для мультимедиа позволяет робот для отправки и получения совместное использование аудио, видео и на основе видео рабочего стола контента. Совместное использование рабочего стола на основе видео моделируются как видео канала. Программа-робот можно подписаться на смешанной звукового канала и несколько видео каналов. Для видео channel робот имеет возможность отправлять и получать видео как закодированного потока H.264 или декодированное необработанные кадров.

> **Примечание:** Не может использовать Microsoft.Graph.Calls.Media API для записи или в противном случае — сохранение содержимого мультимедиа из звонков или собрания, которые получает доступ к вашей программа-робот.

## <a name="see-also"></a>См. также

[Звонки и собрания по сети примеры использования API](https://github.com/microsoftgraph/microsoft-graph-comms-samples/)

[Известные проблемы](/graph/known-issues#calls-and-online-meetings)
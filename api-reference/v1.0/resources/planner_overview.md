# <a name="use-the-planner-rest-api"></a><span data-ttu-id="36612-101">Использование планировщика API REST</span><span class="sxs-lookup"><span data-stu-id="36612-101">Use the Planner API</span></span>

<span data-ttu-id="36612-102">В Microsoft Graph можно использовать планировщик API для создания задач и назначения их для пользователей в группе в Office 365.</span><span class="sxs-lookup"><span data-stu-id="36612-102">You can use the Planner API in Microsoft Graph to create tasks and assign them to users in a group in Office 365.</span></span>

<span data-ttu-id="36612-103">Прежде чем начинать работу с планировщиком API, изучите, как основные объекты связаны друг с другом и группами Office 365.</span><span class="sxs-lookup"><span data-stu-id="36612-103">Before you get started with trying out the Planner API, it is worth understanding how the main objects in Planner API relate to each other as well as Office 365 groups.</span></span>

## <a name="groups"></a><span data-ttu-id="36612-104">Группы</span><span class="sxs-lookup"><span data-stu-id="36612-104">Groups</span></span>

<span data-ttu-id="36612-105">Группы Office 365 — это владельцы планов в планировщике API.</span><span class="sxs-lookup"><span data-stu-id="36612-105">Office 365 groups are the owners of the plans in the Planner API. To get the plans owned by a group, make the HTTP request below.</span></span>
<span data-ttu-id="36612-106">Чтобы [получить планы, которыми владеет группа](../api/plannergroup_list_plans.md), сделайте следующий HTTP-запрос.</span><span class="sxs-lookup"><span data-stu-id="36612-106">To [get the plans owned by a group](../api/plannergroup_list_plans.md), make the following HTTP request.</span></span>

``` http
GET /groups/{id}/planner/plans
```

<span data-ttu-id="36612-107">При [создании нового плана](../api/planner_post_plans.md) сделайте группу его владельцем, задав свойство `owner` для объекта плана.</span><span class="sxs-lookup"><span data-stu-id="36612-107">When [creating a new plan](../api/planner_post_plans.md), make a group its owner by simply setting the `owner` property on a plan object. Plans must be owned by groups.</span></span> <span data-ttu-id="36612-108">Планы должны принадлежать группам.</span><span class="sxs-lookup"><span data-stu-id="36612-108">Plans must be owned by groups.</span></span>

><span data-ttu-id="36612-109">**Примечание:** пользователь, создающий план, должен быть членом группы, которая будет владельцем плана.</span><span class="sxs-lookup"><span data-stu-id="36612-109">**Note:** The user who is creating the plan must be a member of the group that will own the plan.</span></span> <span data-ttu-id="36612-110">При создании новой группы с помощью кнопки [Создать группу](../api/group_post_groups.md) вы не будете добавлены в группу в качестве члена.</span><span class="sxs-lookup"><span data-stu-id="36612-110">When you create a new group by using [Create group](../api/group_post_groups.md), you are not added to the group as a member.</span></span> <span data-ttu-id="36612-111">После создания группы добавьте себя в качестве члена с помощью [членов группы с правом записи](../api/group_post_members.md).</span><span class="sxs-lookup"><span data-stu-id="36612-111">After the group is created, add yourself as a member by using [group post members](../api/group_post_members.md).</span></span>

## <a name="plans"></a><span data-ttu-id="36612-112">Планы</span><span class="sxs-lookup"><span data-stu-id="36612-112">Plans</span></span>

<span data-ttu-id="36612-113">[Планы](plannerplan.md) — это контейнеры [задач](plannertask.md).</span><span class="sxs-lookup"><span data-stu-id="36612-113">[Plans](plannerplan.md) are the containers of [tasks](plannertask.md).</span></span> <span data-ttu-id="36612-114">Чтобы [создать задачу в плане](../api/planner_post_tasks.md), при ее создании укажите в качестве свойства `planId` объекта задачи идентификатор плана.</span><span class="sxs-lookup"><span data-stu-id="36612-114">Plans are the containers of tasks. To [create a task in a plan](../api/planner_post_tasks.md), set the `planId` property on the task object to the ID of the plan while creating the task. Tasks currently cannot be created without plans. To retrieve the tasks in a plan, make the HTTP request below.</span></span>
<span data-ttu-id="36612-115">В настоящее время не создаются задачи без планов.</span><span class="sxs-lookup"><span data-stu-id="36612-115">Tasks currently cannot be created without plans.</span></span>
<span data-ttu-id="36612-116">Для [получения задач в плане](../api/plannerplan_list_tasks.md)сделайте следующий HTTP-запрос.</span><span class="sxs-lookup"><span data-stu-id="36612-116">To [retrieve the tasks in a plan](../api/plannerplan_list_tasks.md), make the following HTTP request.</span></span>

``` http
GET /planner/plans/{id}/tasks
```

## <a name="tasks"></a><span data-ttu-id="36612-117">Задачи</span><span class="sxs-lookup"><span data-stu-id="36612-117">Tasks</span></span>

<span data-ttu-id="36612-p105">Задачу можно назначить пользователю, добавив [назначение](plannerassignment.md) в свойстве [assignments](plannerassignments.md) объекта задачи. Идентификатор исполнителя задачи — это имя открытого свойства `assignments`, необходимо также указать свойство `orderHint` назначения.</span><span class="sxs-lookup"><span data-stu-id="36612-p105">Each task can be assigned to a user by adding an [assignment](plannerassignment.md) in the [assignments](plannerassignments.md) property on the task object. The ID of the user to assign the task is the name of the open property on `assignments`, and the `orderHint` property on the assignment must be specified.</span></span>

## <a name="task-and-plan-details"></a><span data-ttu-id="36612-120">Данные задач и плана</span><span class="sxs-lookup"><span data-stu-id="36612-120">Task and plan details</span></span> 

<span data-ttu-id="36612-p106">Ресурсы Планировщика делятся на базовые объекты и объекты сведений. Базовые объекты предоставляют доступ к основным свойствам ресурсов, подходящим для списков, а объекты сведений обеспечивают доступ к большим свойствам ресурсов, которые подходят для развернутых представлений.</span><span class="sxs-lookup"><span data-stu-id="36612-p106">Planner resources are arranged into basic objects and detail objects. Basic objects provide access to common properties of the resources, suitable for list views, while the detail objects provide access to large properties of the resources suitable for drill down views.</span></span>

## <a name="visualization"></a><span data-ttu-id="36612-123">Визуализация</span><span class="sxs-lookup"><span data-stu-id="36612-123">Visualization</span></span>

<span data-ttu-id="36612-p107">Помимо данных задач и плана, API Планировщика предоставляет ресурсы для общей визуализации данных по клиентам. Для перечисленных ниже задач доступны несколько типов визуализации данных.</span><span class="sxs-lookup"><span data-stu-id="36612-p107">Aside from task and plan data, the Planner API also provides resources to provide common visualization of data across clients. Several types of visualization data are available for tasks:</span></span>

| <span data-ttu-id="36612-126">Способ представления задач</span><span class="sxs-lookup"><span data-stu-id="36612-126">Tasks are shown as</span></span>                                                                        | <span data-ttu-id="36612-127">Источник информации для упорядочивания задач</span><span class="sxs-lookup"><span data-stu-id="36612-127">Tasks are ordered with information from</span></span>                                         |
| :---------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------ |
| <span data-ttu-id="36612-128">Простой список (задачи в плане)</span><span class="sxs-lookup"><span data-stu-id="36612-128">Flat list (tasks in a plan)</span></span>                                                               | <span data-ttu-id="36612-129">`orderHint` |||UNTRANSLATED_CONTENT_START|||property on tasks|||UNTRANSLATED_CONTENT_END|||</span><span class="sxs-lookup"><span data-stu-id="36612-129">`orderHint` property on tasks</span></span>                                                   |
| <span data-ttu-id="36612-130">Простой список (задачи, назначенные пользователю)</span><span class="sxs-lookup"><span data-stu-id="36612-130">Flat list (tasks assigned to a user)</span></span>                                                      | <span data-ttu-id="36612-131">`assigneePriority` |||UNTRANSLATED_CONTENT_START|||property on tasks|||UNTRANSLATED_CONTENT_END|||</span><span class="sxs-lookup"><span data-stu-id="36612-131">`assigneePriority` property on tasks</span></span>                                            |
| <span data-ttu-id="36612-132">Доска со столбцами для исполнителей (доска задач "Кому назначено")</span><span class="sxs-lookup"><span data-stu-id="36612-132">Board view with columns for assignees (assigned to task board)</span></span>                            | <span data-ttu-id="36612-133">Объект [assignedToTaskBoardTaskFormat](plannerassignedToTaskBoardTaskFormat.md)</span><span class="sxs-lookup"><span data-stu-id="36612-133">[assignedToTaskBoardTaskFormat](plannerassignedToTaskBoardTaskFormat.md) object</span></span> |
| <span data-ttu-id="36612-134">Доска со столбцами для хода выполнения задачи (доска задач "Ход выполнения")</span><span class="sxs-lookup"><span data-stu-id="36612-134">Board view with columns for progress of the task towards completion (progress task board)</span></span> | <span data-ttu-id="36612-135">Объект [progressTaskBoardTaskFormat](plannerprogressTaskBoardTaskFormat.md)</span><span class="sxs-lookup"><span data-stu-id="36612-135">[progressTaskBoardTaskFormat](plannerprogressTaskBoardTaskFormat.md) object</span></span>     |
| <span data-ttu-id="36612-136">Доска с настраиваемыми столбцами задач (доска задач "Сегменты"):</span><span class="sxs-lookup"><span data-stu-id="36612-136">Board view with custom columns of tasks (bucket task board):</span></span>                              | <span data-ttu-id="36612-137">объект [bucketTaskBoardTaskFormat](plannerbucketTaskBoardTaskFormat.md)</span><span class="sxs-lookup"><span data-stu-id="36612-137">[bucketTaskBoardTaskFormat](plannerbucketTaskBoardTaskFormat.md) object</span></span>         |

<span data-ttu-id="36612-138">Настраиваемые столбцы на доске задач "Сегменты" представлены объектами [сегментов](plannerbucket.md), а их порядок — свойством `orderHint` объекта.</span><span class="sxs-lookup"><span data-stu-id="36612-138">The custom columns in the bucket task board are represented by [bucket](plannerbucket.md) objects, and their order by `orderHint` property on the object.</span></span>

<span data-ttu-id="36612-139">Принципы упорядочивания определены в статье [Использование указаний по упорядочиванию в планировщике](planner_order_hint_format.md).</span><span class="sxs-lookup"><span data-stu-id="36612-139">All the ordering is controlled by the principles identified in [Planner order hints](planner_order_hint_format.md).</span></span>

## <a name="planner-resource-versioning"></a><span data-ttu-id="36612-140">Версии ресурсов в планировщике</span><span class="sxs-lookup"><span data-stu-id="36612-140">Planner resource versioning</span></span>

<span data-ttu-id="36612-p108">Планировщик управляет версиями ресурсов с помощью тегов etag. Эти теги возвращаются со свойством `@odata.etag` для каждого ресурса, а в запросах `PATCH` и `DELETE` последний тег etag, известный клиенту, необходимо указывать с заголовком `If-Match`. Планировщик позволяет изменять старые версии ресурсов, если планируемое изменение не конфликтует с более новыми изменениями, принятыми службой Планировщика в том же ресурсе. Клиенты могут определить, какой тег etag ресурса новее, вычислив большее значение тега etag при сравнении порядкового номера строки. У каждого ресурса есть отдельный тег etag. Невозможно сравнить значения тегов etag для разных ресурсов, в том числе с отношениями вложения. Клиентские приложения должны обрабатывать две ошибки, связанные с версиями, 409 и 412, считывая последнюю версию элемента и устраняя конфликтующие изменения.</span><span class="sxs-lookup"><span data-stu-id="36612-p108">Planner versions all resources using etags. These etags are returned with `@odata.etag` property on each resource, and `PATCH` and `DELETE` requests require the last etag known by the client to be specified with `If-Match` header. Planner allows changes to older versions of resources, if the intended change does not conflict with newer changes accepted by the Planner service on the same resource. The clients can identify which etag for the same resource is newer by calculating which etag value is greater in ordinal string comparison. Each resource has a separate etag. Etag values for different resources, including those with containment relationships, cannot be compared. The client apps are expected to handle two versioning related error status codes 409 and 412 by reading the latest version of the item, and resolving the conflicting changes.</span></span>

## <a name="common-planner-error-conditions"></a><span data-ttu-id="36612-148">Основные ошибки планировщика</span><span class="sxs-lookup"><span data-stu-id="36612-148">Common Planner error conditions</span></span>

<span data-ttu-id="36612-149">В дополнение к [общим ошибкам](../../../concepts/errors.md) Microsoft Graph, некоторые ошибки относятся только к API планировщика.</span><span class="sxs-lookup"><span data-stu-id="36612-149">In addition to [general errors](../../../concepts/errors.md) that apply to Microsoft Graph, some error conditions are specific to the Planner API.</span></span>

### <a name="400-bad-request"></a><span data-ttu-id="36612-150">400 (неправильный запрос)</span><span class="sxs-lookup"><span data-stu-id="36612-150">400 Bad request</span></span>

<span data-ttu-id="36612-p109">В некоторых случаях на запросы `POST` и `PATCH` может быть получен код состояния 400. Ниже перечислены основные проблемы:</span><span class="sxs-lookup"><span data-stu-id="36612-p109">There are several common cases where the `POST` and `PATCH` requests can get a 400 status code. Common problems include:</span></span>

* <span data-ttu-id="36612-p110">Открытые свойства имеют неправильный тип, тип не указан, или они не содержат свойств. Например, свойства [plannerAssignments](plannerAssignments.md) со сложными значениями должны объявлять свойство `@odata.type` со значением `microsoft.graph.plannerAssignment`.</span><span class="sxs-lookup"><span data-stu-id="36612-p110">Open Type properties are not of correct types, or the type isn't specified, or they do not contain any properties. For example, [plannerAssignments](plannerAssignments.md) properties with complex values need to declare `@odata.type` property with value `microsoft.graph.plannerAssignment`.</span></span>
* <span data-ttu-id="36612-p111">Указания по упорядочиванию имеют [неправильный формат](planner_order_hint_format.md). Например, в качестве указания по упорядочиванию задается значение, возвращаемое клиенту.</span><span class="sxs-lookup"><span data-stu-id="36612-p111">Order hint values do not have the [correct format](planner_order_hint_format.md). For example, an order hint value is being set directly to the value returned to the client.</span></span>
* <span data-ttu-id="36612-p112">Данные логически не согласованы. Например, дата начала задачи позже даты выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="36612-p112">The data is logically inconsistent. For example, start date of task is later than due date of the task.</span></span>

### <a name="403-forbidden"></a><span data-ttu-id="36612-159">403 (доступ запрещен)</span><span class="sxs-lookup"><span data-stu-id="36612-159">403 Forbidden</span></span>

<span data-ttu-id="36612-p113">API Планировщика возвращает этот код состояния, если превышено ограничение, определенное в службе. Тип ограничения, превышенного в запросе, будет указан в свойстве `code` типа ресурса. Ниже перечислены возможные значения для типов ограничений.</span><span class="sxs-lookup"><span data-stu-id="36612-p113">In addition to the general errors, the Planner API also returns this status code when a service-defined limit has been exceeded. If this is the case, the `code` property on the error resource type will indicate the type of the limit exceeded by the request. The possible values for the limit types include:</span></span>

| <span data-ttu-id="36612-163">Значение</span><span class="sxs-lookup"><span data-stu-id="36612-163">Value</span></span>                         | <span data-ttu-id="36612-164">Описание</span><span class="sxs-lookup"><span data-stu-id="36612-164">Description</span></span>                                                                                                                                                                                              |
| :---------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="36612-165">MaximumProjectsOwnedByUser</span><span class="sxs-lookup"><span data-stu-id="36612-165">MaximumProjectsOwnedByUser</span></span>    | <span data-ttu-id="36612-p114">Превышено максимальное количество планов, принадлежащих группе. Это ограничение основано на свойстве `owner` ресурса [plannerPlan](plannerPlan.md).</span><span class="sxs-lookup"><span data-stu-id="36612-p114">The maximum number of Plans owned by a group limit has been exceeded. This limit is based on the `owner` property on the [plannerPlan](plannerPlan.md) resource.</span></span>                                         |
| <span data-ttu-id="36612-168">MaximumProjectsSharedWithUser</span><span class="sxs-lookup"><span data-stu-id="36612-168">MaximumProjectsSharedWithUser</span></span> | <span data-ttu-id="36612-p115">Пользователю предоставлен доступ к максимальному количеству планов.  Это ограничение основано на свойстве `sharedWith` ресурса [plannerPlanDetails](plannerPlanDetails.md).</span><span class="sxs-lookup"><span data-stu-id="36612-p115">The maximum number of Plans shared with a user limit has been exceeded.  This limit is based on the `sharedWith` property on the [plannerPlanDetails](plannerPlanDetails.md) resource.</span></span>                   |
| <span data-ttu-id="36612-171">MaximumTasksCreatedByUser</span><span class="sxs-lookup"><span data-stu-id="36612-171">MaximumTasksCreatedByUser</span></span>     | <span data-ttu-id="36612-p116">Пользователь создал максимальное количество задач. Это ограничение основано на свойстве `createdBy` ресурса [plannerTask](plannerTask.md).</span><span class="sxs-lookup"><span data-stu-id="36612-p116">The maximum number of Tasks created by a user limit has been exceeded. This limit is based on the `createdBy` property on the [plannerTask](plannerTask.md) resource.</span></span>                                    |
| <span data-ttu-id="36612-174">MaximumTasksAssignedToUser</span><span class="sxs-lookup"><span data-stu-id="36612-174">MaximumTasksAssignedToUser</span></span>    | <span data-ttu-id="36612-p117">Пользователю назначено максимальное количество задач. Это ограничение основано на свойстве `assignments` ресурса [plannerTask](plannerTask.md).</span><span class="sxs-lookup"><span data-stu-id="36612-p117">The maximum number of Tasks assigned to a user limit has been exceeded. This limit is based on the `assignments` property on the [plannerTask](plannerTask.md) resource.</span></span>                                 |
| <span data-ttu-id="36612-177">MaximumTasksInProject</span><span class="sxs-lookup"><span data-stu-id="36612-177">MaximumTasksInProject</span></span>         | <span data-ttu-id="36612-p118">Превышено максимальное количество задач в плане. Это ограничение основано на свойстве `planId` ресурса [plannerTask](plannerTask.md).</span><span class="sxs-lookup"><span data-stu-id="36612-p118">The maximum number of Tasks in a Plan limit has been exceeded. This limit is based on the `planId` property on the [plannerTask](plannerTask.md) resource.</span></span>                                               |
| <span data-ttu-id="36612-180">MaximumActiveTasksInProject</span><span class="sxs-lookup"><span data-stu-id="36612-180">MaximumActiveTasksInProject</span></span>   | <span data-ttu-id="36612-p119">Превышено максимальное количество невыполненных задач в плане. Это ограничение основано на свойствах `planId` и `percentComplete` ресурса [plannerTask](plannerTask.md).</span><span class="sxs-lookup"><span data-stu-id="36612-p119">The maximum number of Tasks that aren't completed in a Plan limit has been exceeded. This limit is based on the `planId` and `percentComplete` properties on the [plannerTask](plannerTask.md) resource.</span></span> |
| <span data-ttu-id="36612-183">MaximumBucketsInProject</span><span class="sxs-lookup"><span data-stu-id="36612-183">MaximumBucketsInProject</span></span>       | <span data-ttu-id="36612-p120">Превышено максимальное количество сегментов в плане. Это ограничение основано на свойстве `planId` ресурса [plannerBucket](plannerBucket.md).</span><span class="sxs-lookup"><span data-stu-id="36612-p120">The maximum number of Buckets in a Plan limit has been exceeded. This limit is based on the `planId` property on the [plannerBucket](plannerBucket.md) resource.</span></span>                                         |
| <span data-ttu-id="36612-186">MaximumUsersSharedWithProject</span><span class="sxs-lookup"><span data-stu-id="36612-186">MaximumUsersSharedWithProject</span></span> | <span data-ttu-id="36612-187">Свойство `sharedWith` ресурса [plannerPlanDetails](plannerPlanDetails.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="36612-187">The `sharedWith` property on the [plannerPlanDetails](plannerPlanDetails.md) resource contains too many values.</span></span>                                                                                          |
| <span data-ttu-id="36612-188">MaximumReferencesOnTask</span><span class="sxs-lookup"><span data-stu-id="36612-188">MaximumReferencesOnTask</span></span>       | <span data-ttu-id="36612-189">Свойство `references` ресурса [plannerTaskDetails](plannerTaskDetails.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="36612-189">The `references` property on the [plannerTaskDetails](plannerTaskDetails.md) resource contains too many values.</span></span>                                                                                          |
| <span data-ttu-id="36612-190">MaximumChecklistItemsOnTask</span><span class="sxs-lookup"><span data-stu-id="36612-190">MaximumChecklistItemsOnTask</span></span>   | <span data-ttu-id="36612-191">Свойство `checklist` ресурса [plannerTaskDetails](plannerTaskDetails.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="36612-191">The `checklist` property on the [plannerTaskDetails](plannerTaskDetails.md) resource contains too many values.</span></span>                                                                                           |
| <span data-ttu-id="36612-192">MaximumAssigneesInTasks</span><span class="sxs-lookup"><span data-stu-id="36612-192">MaximumAssigneesInTasks</span></span>       | <span data-ttu-id="36612-193">Свойство `assignments` ресурса [plannerTask](plannerTask.md) содержит слишком много значений.</span><span class="sxs-lookup"><span data-stu-id="36612-193">The `assignments` property on the [plannerTask](plannerTask.md) resource contains too many values.</span></span>                                                                                                       |

### <a name="412-precondition-failed"></a><span data-ttu-id="36612-194">412 (необходимое условие не выполнено)</span><span class="sxs-lookup"><span data-stu-id="36612-194">412 Precondition Failed</span></span> 

<span data-ttu-id="36612-p121">Во всех запросах `POST`, `PATCH` и `DELETE` в API Планировщика заголовок `If-Match` необходимо указывать с последним известным значением тега etag ресурса. Кроме того, код состояния 412 может быть возвращен, если значение тега etag, указанное в запросе, больше не соответствует версии ресурса в службе. В этом случае клиентам следует прочитать ресурс еще раз и получить новый тег etag.</span><span class="sxs-lookup"><span data-stu-id="36612-p121">All `POST`, `PATCH` and `DELETE` requests in Planner API require `If-Match` header to be specified with the last etag value seen of the resource that is subject to the request. Additionally, 412 status code can be returned if the etag value specified in the request no longer matches a version of the resource in the service. In this case, the clients should read the resource again and obtain a new etag.</span></span>


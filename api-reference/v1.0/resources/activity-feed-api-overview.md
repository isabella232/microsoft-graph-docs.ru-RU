# <a name="use-the-activity-feed-rest-api"></a><span data-ttu-id="6800e-101">Использование интерфейса API REST ленты активности</span><span class="sxs-lookup"><span data-stu-id="6800e-101">Use the activity feed REST API</span></span>

<span data-ttu-id="6800e-102">API ленты активности можно использовать в Microsoft Graph для возобновления деятельности пользователя на различных устройствах и платформах.</span><span class="sxs-lookup"><span data-stu-id="6800e-102">You can use the activity feed API in Microsoft Graph to resume a user's actiity across devices and platforms.</span></span> <span data-ttu-id="6800e-103">Запросы API ленты активности выполняются от имени пользователя с применением [делегированных разрешений](../../../concepts/permissions_reference.md#delegated-permissions-application-permissions-and-effective-permissions) и [разрешений активности пользователя ](../../../concepts/permissions_reference.md), которые можно использовать с личных, рабочих или учебных учетных записей.</span><span class="sxs-lookup"><span data-stu-id="6800e-103">Activity feed API requests are performed on behalf of a user via [delegated permissions](../../../concepts/permissions_reference.md#delegated-permissions-application-permissions-and-effective-permissions) and the [user activity permission](../../../concepts/permissions_reference.md), which can be used with either personal or work and school accounts.</span></span> 

<span data-ttu-id="6800e-104">Действия пользователя представляются ресурсом [activity](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) и организуются по времени в ленту, представленную коллекцией me/activities.</span><span class="sxs-lookup"><span data-stu-id="6800e-104">User activities are represented by the [activity](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) resource and are organized in a time-based feed represented by the collection me/activities.</span></span> 
<!-- Add missing content.
Each activity represents a unique... 
-->
## <a name="what-makes-a-great-user-activity"></a><span data-ttu-id="6800e-105">Что повышает активность пользователя?</span><span class="sxs-lookup"><span data-stu-id="6800e-105">What makes a great user activity?</span></span>

<span data-ttu-id="6800e-106">Факты активности пользователя фиксируют не только запуск приложения — они углубляются в его специфическое содержимое.</span><span class="sxs-lookup"><span data-stu-id="6800e-106">User activities don’t just launch apps — they are deep links into specific content within your app.</span></span> <span data-ttu-id="6800e-107">Факты активность пользователя, которые вы фиксируете, могут быть представлены не только в вашем приложении, но также и в Cortana, и во Временной шкале Windows, что позволяет увеличить вовлеченность в использование приложения и предоставить пользователям возможность продолжать работу с приложением на разных устройствах.</span><span class="sxs-lookup"><span data-stu-id="6800e-107">The user activities you create can not only be used in your own app, but will also appear in Cortana and Windows Timeline — driving more app reengagement and making it easier for your users to continue using your app across multiple devices.</span></span>  

### <a name="what-should-become-an-activity"></a><span data-ttu-id="6800e-108">Что должно стать активностью?</span><span class="sxs-lookup"><span data-stu-id="6800e-108">What should become an activity?</span></span> 

<span data-ttu-id="6800e-109">Поскольку каждое приложение имеет свои отличия, понять, как лучше всего сопоставить действия в приложении с зафиксированными фактами активности, может только его разработчик.</span><span class="sxs-lookup"><span data-stu-id="6800e-109">Because every app is different, it's up to each app developer to understand the best way to map actions within your application to user activities.</span></span> <span data-ttu-id="6800e-110">Например, в играх активность может фиксироваться для каждой кампании, приложения для создания документов могут фиксировать активность для каждого отдельного документа, а бизнес-приложения — для каждого рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="6800e-110">For example, games might create an activity for each campaign, document authoring apps might create an activity for each unique document, and line-of-business apps might create an activity for each workflow.</span></span> 

<span data-ttu-id="6800e-111">Когда определите предметы активности в вашем приложении, обратите внимание на следующие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="6800e-111">Apply the following guidlines as you define activitites in your app:</span></span>

<span data-ttu-id="6800e-112">**Рекомендуется:** записывать один факт активности для группы связанных действий пользователя.</span><span class="sxs-lookup"><span data-stu-id="6800e-112">**DO:** Record a single activity for a group of related user actions.</span></span> <span data-ttu-id="6800e-113">Если приложение используется для последовательности связанного содержимого, вероятно, имеет смысл записать один факт активности для целого сеанса вовлеченности.</span><span class="sxs-lookup"><span data-stu-id="6800e-113">If your application is used for a sequence of related content, it probably makes sense to record a single activity for the entire engagement session.</span></span>  

<span data-ttu-id="6800e-114">*Сценарий списка воспроизведения:* это особенно актуально для списка воспроизведения музыки или телепередач — один факт активности пользователя может обновляться для отображения прогресса.</span><span class="sxs-lookup"><span data-stu-id="6800e-114">*Playlist scenarios:* This is especially relevant for music playlists or TV shows — a single user activity can be updated to show your progress.</span></span> <span data-ttu-id="6800e-115">В этом случае у вас будет один факт активности пользователя со множеством [элементов истории](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_historyitem), представляющих периоды вовлеченности на протяжении нескольких дней или недель.</span><span class="sxs-lookup"><span data-stu-id="6800e-115">In this case, you will have a single user activity with multiple [history items](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_historyitem) representing periods of engagement across multiple days or weeks.</span></span>  

<span data-ttu-id="6800e-116">**Рекомендуется:** хранить данные пользователей в облаке.</span><span class="sxs-lookup"><span data-stu-id="6800e-116">**DO:** Store user data to the cloud.</span></span> <span data-ttu-id="6800e-117">Если вы хотите поддерживать активность между несколькими устройствами, необходимо обеспечить хранение содержимого, требуемого для возобновления этой активности, в облаке.</span><span class="sxs-lookup"><span data-stu-id="6800e-117">If you want to support cross-device activities, you need to make sure the content required to reengage this activity is stored to a cloud location.</span></span> <span data-ttu-id="6800e-118">Например, для публикации факта активности каждый раз, когда пользователь редактирует документ, этот документ следует хранить в облаке, а не локально на устройстве пользователя для создания возможности возобновления на разных устройствах.</span><span class="sxs-lookup"><span data-stu-id="6800e-118">For example, if you publish an activity each time a user edits a document, the document should be stored in the cloud as opposed to locally on the user's device in order to enable cross-device reengagement.</span></span>  

<span data-ttu-id="6800e-119">**Не рекомендуется:** фиксировать активность пользователя для деятельности, которую он не возобновит в будущем.</span><span class="sxs-lookup"><span data-stu-id="6800e-119">**DO NOT:** Create a user activity for actions that users do not need to resume in the future.</span></span> <span data-ttu-id="6800e-120">Если ваше приложение используется для совершения простых, одноразовых операций, которые не переходят в разные состояния, требующие отслеживания, скорее всего нет необходимости фиксировать для них пользовательскую активность.</span><span class="sxs-lookup"><span data-stu-id="6800e-120">If your application is used to complete simple, one-time operations that do not persist status for you to track in the future, you probably do not need to write a user activity.</span></span> 

<span data-ttu-id="6800e-121">Для уточнения: несмотря на то, что активность пользователя отображается во Временной шкале Windows, она не обладает возможностями инструмента управления версиями — при выборе активности, которая заключалась в работе с документом, должна отображаться последняя версия этого документа (с изменениями, внесенными другим пользователем).</span><span class="sxs-lookup"><span data-stu-id="6800e-121">To be clear, even though user activities appear in Windows Timeline, this is not designed as a versioning tool — choosing a document-based activity should always show the latest version of that document (including changes that were made by another user.)</span></span>

<span data-ttu-id="6800e-122">**Не рекомендуется:** фиксировать активность пользователя для действий, которые совершают *другие пользователи*.</span><span class="sxs-lookup"><span data-stu-id="6800e-122">**DO NOT:** Create a user activity for actions completed by *other users*.</span></span> <span data-ttu-id="6800e-123">Если кто-то отправляет пользователю сообщение или @упоминает пользователя в вашем приложении, не следует записывать новую активность.</span><span class="sxs-lookup"><span data-stu-id="6800e-123">If someone sends the user a message, or @mentions the user within your app, you should not write a new activity.</span></span> <span data-ttu-id="6800e-124">Такие взаимодействия лучше обработать представлением уведомлений.</span><span class="sxs-lookup"><span data-stu-id="6800e-124">These interactions are better served by surfacing notifications.</span></span>  

<span data-ttu-id="6800e-125">*Сценарии совместной работы:* если несколько людей занимается одной деятельностью (например, работает над документом Word), будут возникать случаи, когда другой пользователь будет вносить изменения в документ после того, как вы его в последний раз отредактировали.</span><span class="sxs-lookup"><span data-stu-id="6800e-125">*Collaboration scenarios:* If multiple people are working on the same activity (such as a Word document), there will be cases when another user has made changes to the document after you last edited it.</span></span> <span data-ttu-id="6800e-126">В этом случае разработчики приложений могут захотеть обновить визуальные элементы такой активности для отражения изменений, внесенных в документ.</span><span class="sxs-lookup"><span data-stu-id="6800e-126">In this case, app developers might want to update the visual elements in the activity to reflect changes made to the document.</span></span> <span data-ttu-id="6800e-127">Для этого приложение может обновить существующую активность без создания нового элемента истории.</span><span class="sxs-lookup"><span data-stu-id="6800e-127">To do this, the app might update the existing activity without creating a new history item.</span></span> 

><span data-ttu-id="6800e-128">**Примечание:** если вы публикуете факт активности для веб-приложения, важно, чтобы были включены как `activationURL`, так и `fallbackURL` для каждого факта активности.</span><span class="sxs-lookup"><span data-stu-id="6800e-128">**Note:** If you're publishing activities for a web application, it's important to include both an `activationURL` and a `fallbackURL` for each of your activities.</span></span> <span data-ttu-id="6800e-129">Эти факты активности позволят пользователю вернуться в приложение с впечатлением, ожидаемым от интерфейса продуктов Microsoft, как, например, Временной шкалы Windows.</span><span class="sxs-lookup"><span data-stu-id="6800e-129">The activities will launch the user back into your app as expected from Microsoft experiences like Windows Timeline.</span></span> 

## <a name="app-interaction-patterns-and-user-activities"></a><span data-ttu-id="6800e-130">Шаблоны взаимодействия с приложением и активности пользователя</span><span class="sxs-lookup"><span data-stu-id="6800e-130">App interaction patterns and user activities</span></span> 
<span data-ttu-id="6800e-131">Факты активности пользователя, которые вы фиксируете, будут зависеть от шаблона взаимодействия с вашим приложением.</span><span class="sxs-lookup"><span data-stu-id="6800e-131">The user activities that you create will vary based on the interaction pattern of your app.</span></span> <span data-ttu-id="6800e-132">Несмотря на то, что каждое приложение имеет свои отличия, для всех характерны приведенные ниже шаблоны взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="6800e-132">While every app is different, most will fall into one of the following interaction patterns:</span></span> 

* <span data-ttu-id="6800e-133">**Приложения для работы с документами**: создание одной активности для каждого документа с одной или несколькими записями в истории, отражающими периоды использования.</span><span class="sxs-lookup"><span data-stu-id="6800e-133">**Document-based apps** — Create one activity per document with one or more history records reflecting periods of use.</span></span> <span data-ttu-id="6800e-134">Очень важно обновлять карточку активности по мере внесения изменений в документ.</span><span class="sxs-lookup"><span data-stu-id="6800e-134">It is important to update your activity card as changes are made to the document.</span></span> 
* <span data-ttu-id="6800e-135">**Приложения для проигрывания мультимедиа**: создание одной активности для каждой логической группы содержимого, как, например, список воспроизведения, программа или отдельный вид содержимого.</span><span class="sxs-lookup"><span data-stu-id="6800e-135">**Media playback apps** — Create one activity per logical grouping of content such as a playlist, program, or standalone content.</span></span> 
* <span data-ttu-id="6800e-136">**Игры**: создание одной активности для каждой сохраненной игры или мира.</span><span class="sxs-lookup"><span data-stu-id="6800e-136">**Games** — Create one activity for each saved game or world.</span></span> <span data-ttu-id="6800e-137">Если игра поддерживает только одну последовательность уровней, можно фиксировать одну активность с течением времени, однако вам может понадобиться обновлять вашу карточку для отображения прогресса или достижений.</span><span class="sxs-lookup"><span data-stu-id="6800e-137">If your game supports only a single sequence of levels, you can write the same activity over time, although you might want to update your card to show your latest progress or achievements.</span></span> 
* <span data-ttu-id="6800e-138">**Служебные приложения**: если в приложении нет ничего, что пользователь хотел бы возобновить, активность публиковать не следует.</span><span class="sxs-lookup"><span data-stu-id="6800e-138">**Utility apps** — If there is nothing within your app that users would want to resume, you should not publish activities.</span></span> <span data-ttu-id="6800e-139">Хороший пример — это такое простое целевое приложение, как калькулятор.</span><span class="sxs-lookup"><span data-stu-id="6800e-139">A good example is a simple single-purpose app like calculator.</span></span> 
* <span data-ttu-id="6800e-140">**Бизнес-приложения**: существует множество приложений для управления простыми задачами или рабочими процессами.</span><span class="sxs-lookup"><span data-stu-id="6800e-140">**Line-of-business apps** — Many apps exist for managing simple tasks or workflows.</span></span> <span data-ttu-id="6800e-141">Создайте по одной активности для каждого отдельного рабочего процесса, к которому ваше приложение предоставляет доступ.</span><span class="sxs-lookup"><span data-stu-id="6800e-141">Create one activity for each separate workflow accessed through your app.</span></span> <span data-ttu-id="6800e-142">Например, каждый авансовый отчет будет отдельным фактом активности, поскольку у вас может возникнуть необходимость щелкнуть по этой активности, чтобы увидеть, был ли документ одобрен.</span><span class="sxs-lookup"><span data-stu-id="6800e-142">For example, each expense report would be a separate activity, because you might want to click that activity to see if it was approved.</span></span>

<span data-ttu-id="6800e-143">*Некоторые сложные приложения включают несколько шаблонов взаимодействия. Вам может потребоваться следовать разным шаблонам создания фактов активности пользователя для разных сценариев, в которых применяется ваше приложение.*</span><span class="sxs-lookup"><span data-stu-id="6800e-143">*Some complex apps include multiple interaction patterns. You might want to follow different user activity creation patterns for different scenarios handled by your app.*</span></span>

<!-- Add content or remove H2.
## Common use cases 
-->

## <a name="next-steps"></a><span data-ttu-id="6800e-144">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="6800e-144">Next steps</span></span>

- <span data-ttu-id="6800e-145">Обратитесь к статье[activity resource](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) и определите состояния активности вашего приложения, в возобновлении которых пользователю можно помочь.</span><span class="sxs-lookup"><span data-stu-id="6800e-145">See the [activity resource](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) and define your app's activities to help users resume important tasks.</span></span>
- <span data-ttu-id="6800e-146">Изучите образцы [примеров адаптивных карточек](http://adaptivecards.io/samples/), чтобы почерпнуть идеи для **преображения** своей активности.</span><span class="sxs-lookup"><span data-stu-id="6800e-146">Explore the [adaptive card samples](http://adaptivecards.io/samples/) samples for ideas to make your activities **pop**.</span></span>  
- <span data-ttu-id="6800e-147">Опробуйте API в [песочнице Graph](https://developer.microsoft.com/en-us/graph/graph-explorer).</span><span class="sxs-lookup"><span data-stu-id="6800e-147">Try the API in the [Graph Explorer](https://developer.microsoft.com/en-us/graph/graph-explorer).</span></span>

<span data-ttu-id="6800e-148">**Нужны еще идеи?**</span><span class="sxs-lookup"><span data-stu-id="6800e-148">**Looking for more ideas?**</span></span> 
- <span data-ttu-id="6800e-149">Обратитесь к разделу [представление активности в интерфейсах Microsoft](https://channel9.msdn.com/events/Build/2017/B8108).</span><span class="sxs-lookup"><span data-stu-id="6800e-149">See [how Microsoft experiences are using activities](https://channel9.msdn.com/events/Build/2017/B8108).</span></span>
- <span data-ttu-id="6800e-150">Ознакомьтесь со статьей [API ленты активности и "продолжить там, где остановился"](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span><span class="sxs-lookup"><span data-stu-id="6800e-150">Learn about [the activity feed API and pick up where I left off](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span></span>

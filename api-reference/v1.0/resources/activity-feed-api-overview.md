# <a name="use-the-activity-feed-rest-api"></a>Использование интерфейса API REST ленты активности

API ленты активности можно использовать в Microsoft Graph для возобновления деятельности пользователя на различных устройствах и платформах. Запросы API ленты активности выполняются от имени пользователя с применением [делегированных разрешений](../../../concepts/permissions_reference.md#delegated-permissions-application-permissions-and-effective-permissions) и [разрешений активности пользователя ](../../../concepts/permissions_reference.md), которые можно использовать с личных, рабочих или учебных учетных записей. 

Действия пользователя представляются ресурсом [activity](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) и организуются по времени в ленту, представленную коллекцией me/activities. 
<!-- Add missing content.
Each activity represents a unique... 
-->
## <a name="what-makes-a-great-user-activity"></a>Что повышает активность пользователя?

Факты активности пользователя фиксируют не только запуск приложения — они углубляются в его специфическое содержимое. Факты активность пользователя, которые вы фиксируете, могут быть представлены не только в вашем приложении, но также и в Cortana, и во Временной шкале Windows, что позволяет увеличить вовлеченность в использование приложения и предоставить пользователям возможность продолжать работу с приложением на разных устройствах.  

### <a name="what-should-become-an-activity"></a>Что должно стать активностью? 

Поскольку каждое приложение имеет свои отличия, понять, как лучше всего сопоставить действия в приложении с зафиксированными фактами активности, может только его разработчик. Например, в играх активность может фиксироваться для каждой кампании, приложения для создания документов могут фиксировать активность для каждого отдельного документа, а бизнес-приложения — для каждого рабочего процесса. 

Когда определите предметы активности в вашем приложении, обратите внимание на следующие рекомендации.

**Рекомендуется:** записывать один факт активности для группы связанных действий пользователя. Если приложение используется для последовательности связанного содержимого, вероятно, имеет смысл записать один факт активности для целого сеанса вовлеченности.  

*Сценарий списка воспроизведения:* это особенно актуально для списка воспроизведения музыки или телепередач — один факт активности пользователя может обновляться для отображения прогресса. В этом случае у вас будет один факт активности пользователя со множеством [элементов истории](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_historyitem), представляющих периоды вовлеченности на протяжении нескольких дней или недель.  

**Рекомендуется:** хранить данные пользователей в облаке. Если вы хотите поддерживать активность между несколькими устройствами, необходимо обеспечить хранение содержимого, требуемого для возобновления этой активности, в облаке. Например, для публикации факта активности каждый раз, когда пользователь редактирует документ, этот документ следует хранить в облаке, а не локально на устройстве пользователя для создания возможности возобновления на разных устройствах.  

**Не рекомендуется:** фиксировать активность пользователя для деятельности, которую он не возобновит в будущем. Если ваше приложение используется для совершения простых, одноразовых операций, которые не переходят в разные состояния, требующие отслеживания, скорее всего нет необходимости фиксировать для них пользовательскую активность. 

Для уточнения: несмотря на то, что активность пользователя отображается во Временной шкале Windows, она не обладает возможностями инструмента управления версиями — при выборе активности, которая заключалась в работе с документом, должна отображаться последняя версия этого документа (с изменениями, внесенными другим пользователем).

**Не рекомендуется:** фиксировать активность пользователя для действий, которые совершают *другие пользователи*. Если кто-то отправляет пользователю сообщение или @упоминает пользователя в вашем приложении, не следует записывать новую активность. Такие взаимодействия лучше обработать представлением уведомлений.  

*Сценарии совместной работы:* если несколько людей занимается одной деятельностью (например, работает над документом Word), будут возникать случаи, когда другой пользователь будет вносить изменения в документ после того, как вы его в последний раз отредактировали. В этом случае разработчики приложений могут захотеть обновить визуальные элементы такой активности для отражения изменений, внесенных в документ. Для этого приложение может обновить существующую активность без создания нового элемента истории. 

>**Примечание:** если вы публикуете факт активности для веб-приложения, важно, чтобы были включены как `activationURL`, так и `fallbackURL` для каждого факта активности. Эти факты активности позволят пользователю вернуться в приложение с впечатлением, ожидаемым от интерфейса продуктов Microsoft, как, например, Временной шкалы Windows. 

## <a name="app-interaction-patterns-and-user-activities"></a>Шаблоны взаимодействия с приложением и активности пользователя 
Факты активности пользователя, которые вы фиксируете, будут зависеть от шаблона взаимодействия с вашим приложением. Несмотря на то, что каждое приложение имеет свои отличия, для всех характерны приведенные ниже шаблоны взаимодействия. 

* **Приложения для работы с документами**: создание одной активности для каждого документа с одной или несколькими записями в истории, отражающими периоды использования. Очень важно обновлять карточку активности по мере внесения изменений в документ. 
* **Приложения для проигрывания мультимедиа**: создание одной активности для каждой логической группы содержимого, как, например, список воспроизведения, программа или отдельный вид содержимого. 
* **Игры**: создание одной активности для каждой сохраненной игры или мира. Если игра поддерживает только одну последовательность уровней, можно фиксировать одну активность с течением времени, однако вам может понадобиться обновлять вашу карточку для отображения прогресса или достижений. 
* **Служебные приложения**: если в приложении нет ничего, что пользователь хотел бы возобновить, активность публиковать не следует. Хороший пример — это такое простое целевое приложение, как калькулятор. 
* **Бизнес-приложения**: существует множество приложений для управления простыми задачами или рабочими процессами. Создайте по одной активности для каждого отдельного рабочего процесса, к которому ваше приложение предоставляет доступ. Например, каждый авансовый отчет будет отдельным фактом активности, поскольку у вас может возникнуть необходимость щелкнуть по этой активности, чтобы увидеть, был ли документ одобрен.

*Некоторые сложные приложения включают несколько шаблонов взаимодействия. Вам может потребоваться следовать разным шаблонам создания фактов активности пользователя для разных сценариев, в которых применяется ваше приложение.*

<!-- Add content or remove H2.
## Common use cases 
-->

## <a name="next-steps"></a>Дальнейшие действия

- Обратитесь к статье[activity resource](https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/projectrome_activity) и определите состояния активности вашего приложения, в возобновлении которых пользователю можно помочь.
- Изучите образцы [примеров адаптивных карточек](http://adaptivecards.io/samples/), чтобы почерпнуть идеи для **преображения** своей активности.  
- Опробуйте API в [песочнице Graph](https://developer.microsoft.com/en-us/graph/graph-explorer).

**Нужны еще идеи?** 
- Обратитесь к разделу [представление активности в интерфейсах Microsoft](https://channel9.msdn.com/events/Build/2017/B8108).
- Ознакомьтесь со статьей [API ленты активности и "продолжить там, где остановился"](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).

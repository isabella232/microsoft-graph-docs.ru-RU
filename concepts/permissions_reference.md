<a id="microsoft-graph-permissions-reference" class="xliff"></a>

# Справочник по разрешениям Microsoft Graph 
Microsoft Graph предоставляет детализированные разрешения, управляющие доступом приложений к ресурсам, таким как пользователи, группы и почта. Разработчик указывает, какие разрешения для Microsoft Graph должно запрашивать его приложение. Входя в приложение, пользователь (иногда администратор) получает возможность согласиться с предоставлением этих разрешений. Если пользователь дает согласие, приложение получает доступ к запрашиваемым ресурсам и интерфейсам API. Для приложений, не предусматривающих вход пользователя, администратор может заранее дать согласие при установке приложения или во время регистрации. 

<a id="delegated-permissions-application-permissions-and-effective-permissions" class="xliff"></a>

## Разрешения приложения, делегированные разрешения и действующие разрешения
В Microsoft Graph есть два типа разрешений: **разрешения приложения** и **делегированные разрешения**. 

- **Делегированные разрешения** используются в приложениях, предусматривающих вход пользователя. Для таких приложений пользователь или администратор соглашается предоставить запрашиваемые разрешения. Приложение получает разрешение действовать от имени вошедшего пользователя, вызывая Microsoft Graph. Некоторые делегированные разрешения могут предоставлять пользователи, не являющиеся администраторами. Однако для разрешений высокого уровня требуется согласие администратора.  

- **Разрешения приложений** используются приложениями, не требующими входа пользователя (например, фоновыми службами и управляющими программами).  Соглашение на предоставление разрешений приложений может давать только администратор. 

_Действующие разрешения_ — это разрешения, которые будут у приложения при отправке запросов в Microsoft Graph. Важно понимать разницу между разрешениями приложения или делегированными разрешениями, предоставленными приложению, и его действующими разрешениями при вызовах Microsoft Graph.

- В случае делегированных разрешений _действующими разрешениями_ приложения будут такие, которые включены одновременно как в делегированные (предоставленные приложению путем согласия), так и в назначенные вошедшему пользователю. У вашего приложения никогда не может быть больше привилегий, чем у вошедшего пользователя. В организациях привилегии вошедшего пользователя могут определяться политикой или членством в одной или нескольких ролях администратора. Дополнительные сведения о ролях администратора см. в статье [Назначение ролей администратора в Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-assign-admin-roles).<br/><br/>Допустим, приложению было предоставлено делегированное разрешение _User.ReadWrite.All_. Обычно это разрешение позволяет приложению считывать и обновлять профиль любого пользователя в организации. Если вошедший пользователь является глобальным администратором, приложение сможет обновлять профиль любого пользователя в организации. Однако если вошедший пользователь не является администратором, то приложение сможет обновлять только профиль вошедшего пользователя. Оно не сможет обновлять профили других пользователей в организации, так как у пользователя, от имени которого может действовать приложение, нет таких привилегий.
  
- В случае разрешений приложения все предусмотренные ими привилегии будут включены в _действующие разрешения_ вашего приложения. Например, приложение с разрешением _User.ReadWrite.All_ приложения может обновлять профиль любого пользователя в организации. 

<a id="microsoft-graph-permission-names" class="xliff"></a>

### Имена разрешений Microsoft Graph
Имена разрешений Microsoft Graph соответствуют простому шаблону: _ресурс.операция.ограничение_. Например, разрешение _User.Read_ позволяет просматривать профиль вошедшего пользователя, разрешение _User.ReadWrite_ — просматривать и редактировать профиль вошедшего пользователя, а разрешение _Mail.Send_ — отправлять почту от его имени. 

Указанное в имени _ограничение_ определяет потенциальный уровень доступа приложения в рамках каталога. В настоящее время Microsoft Graph поддерживает следующие ограничения: 

* **All**, которое позволяет приложению выполнять операции со всеми ресурсами указанного типа в каталоге. Например, разрешение _User.Read.All_ может предоставить приложению права на просмотр профилей всех пользователей в каталоге. 
* **Shared**, которое позволяет приложению выполнять операции с ресурсами, доступ к которым предоставлен вошедшему пользователю другими пользователями. Это ограничение в основном используется с такими ресурсами Outlook, как почта, календари и контакты. Например, разрешение _Mail.Read.Shared_ позволяет просматривать сообщения в почтовом ящике вошедшего пользователя, а также в почтовых ящиках, доступ к которым предоставлен вошедшему пользователю другими пользователями в организации.
* **AppFolder**, которое предоставляет приложению права на чтение и запись файлов в выделенной папке в OneDrive. Это ограничение доступно только в [разрешениях для файлов](#files-permissions) и действительно только для учетных записей Майкрософт.
* Если **ограничение не указано**, приложение сможет выполнять операции только с ресурсами, принадлежащими вошедшему пользователю. Например, разрешение _User.Read_ позволяет просматривать только профиль вошедшего пользователя, а _Mail.Read_ — только сообщения в почтовом ящике вошедшего пользователя.

> **Примечание.** При делегировании действующие разрешения, предоставленные приложению, могут быть ограничены привилегиями вошедшего пользователя в организации.
> 

<a id="microsoft-accounts-and-work-or-school-accounts" class="xliff"></a>

### Учетные записи Майкрософт и рабочие или учебные учетные записи

Не все разрешения действительны как для учетных записей Майкрософт, так и для рабочих или учебных учетных записей. В разделе **Замечания** для каждой группы разрешений указано, для каких учетных записей действительно то или иное разрешение: учетных записей Майкрософт, рабочих и учебных учетных записей либо для всех типов. 

<a id="user-and-group-search-limitations-for-guest-users-in-organizations" class="xliff"></a>

### Ограничения на поиск пользователей и групп для гостевых пользователей в организациях

Функции поиска пользователей и групп позволяют приложению найти любого пользователя и любую группу в каталоге организации с помощью запросов для набора ресурсов `/users` или `/groups` (например, `https://graph.microsoft.com/v1.0/users`). Эта возможность есть как у администраторов, так и у обычных пользователей. Однако ее нет у гостевых пользователей. Если пользователь вошел как гость, то в зависимости от предоставленных приложению разрешений оно может считывать профиль определенного пользователя или определенной группы (например, `https://graph.microsoft.com/v1.0/users/241f22af-f634-44c0-9a15-c8cd2cea5531`). Но оно не может отправлять набору ресурсов `/users` или `/groups` запросы, которые могут возвращать несколько ресурсов. При наличии подходящих разрешений приложение может считывать профили пользователей и групп, полученные с использованием ссылок в свойствах навигации (например, `/users/{id}/directReports` или `/groups/{id}/members`).

---

<a id="calendars-permissions" class="xliff"></a>

## Разрешения для календарей

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Calendars.Read_ |    Чтение пользовательских календарей  | Позволяет приложению считывать события в пользовательских календарях.| Нет |
| _Calendars.Read.Shared_ |    Чтение пользовательских и общих календарей | Позволяет приложению считывать события во всех календарях, доступных пользователю, в том числе делегированных и общих. | Нет |
| _Calendars.ReadWrite_ |    Полный доступ к пользовательским календарям  | Позволяет приложению создавать, считывать, обновлять и удалять события в пользовательских календарях. | Нет |
| _Calendars.ReadWrite.Shared_ |    Чтение и запись пользовательских и общих календарей | Позволяет приложению создавать, читать, обновлять и удалять события во всех календарях, доступных пользователю, в том числе делегированных и общих календарях.| Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Calendars.Read_ |    Чтение календарей во всех почтовых ящиках  | Позволяет приложению считывать события во всех календарях в случаях, когда вход пользователя не предусмотрен.| Да |
| _Calendars.ReadWrite_ |    Чтение и запись календарей во всех почтовых ящиках | Позволяет приложению создавать, считывать, обновлять и удалять события во всех календарях в случаях, когда вход пользователя не предусмотрен.| Да |

<a id="remarks" class="xliff"></a>

### Заметки

Разрешения _Calendars.Read.Shared_ и _Calendars.ReadWrite.Shared_ действительны только для рабочих и учебных учетных записей. Все остальные разрешения поддерживаются как для учетных записей Майкрософт, так и для рабочих или учебных учетных записей.

<a id="example-usage" class="xliff"></a>

### Примеры использования

<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Calendars.Read_: получение событий пользовательского календаря с 23 апреля 2017 г. по 29 апреля 2017 г. (`GET /me/calendarView?startDateTime=2017-04-23T00:00:00&endDateTime=2017-04-29T00:00:00`).
* _Calendars.Read.Shared_: поиск периодов, когда свободны все участники (`POST /users/{id|userPrincipalName}/findMeetingTimes`).
* _Calendars.ReadWrite_: добавление события в календарь пользователя (`POST /me/events`).

<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Calendars.Read_: поиск событий, организованных пользователем bob@contoso.com, в календаре конференц-зала (`GET /users/{id | userPrincipalName}/events?$filter=organizer/emailAddress/address eq 'bob@contoso.com'`).
* _Calendars.Read_: список всех событий в календаре пользователя за май (`GET /users/{id | userPrincipalName}/calendarView?startDateTime=2017-05-01T00:00:00&endDateTime=2017-06-01T00:00:00`).
* _Calendars.ReadWrite_: добавление в пользовательский календарь события для утвержденного нерабочего времени (`POST /users/{id | userPrincipalName}/events`).
* _Calendars.Send_: отправка сообщения (`POST /users/{id | userPrincipalName}/sendCalendars`).


Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="contacts-permissions" class="xliff"></a>

## Разрешения для контактов

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Contacts.Read_ |    Чтение контактов пользователя  | Позволяет приложению считывать контакты пользователя. | Нет |
| _Contacts.Read.Shared_ |    Чтение контактов пользователя и общих контактов | Позволяет приложению считывать контакты, доступные пользователю, в том числе собственные контакты пользователя и общие контакты. | Нет |
| _Contacts.ReadWrite_ |    Полный доступ к контактам пользователя  | Позволяет приложению создавать, считывать, обновлять и удалять контакты пользователя. | Нет |
| _Contacts.ReadWrite.Shared_ |    Чтение и запись контактов пользователя и общих контактов | Позволяет приложению создавать, считывать, обновлять и удалять контакты, доступные пользователю, в том числе собственные контакты пользователя и общие контакты.| Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Contacts.Read_ |    Чтение контактов во всех почтовых ящиках | Позволяет приложению считывать все контакты во всех почтовых ящиках в случаях, когда вход пользователя не предусмотрен. | Да |
| _Contacts.ReadWrite_ |    Чтение и запись контактов во всех почтовых ящиках  |Позволяет приложению создавать, считывать, обновлять и удалять все контакты во всех почтовых ящиках в случаях, когда вход пользователя не предусмотрен.| Да |

<a id="remarks" class="xliff"></a>

### Заметки
Из делегированных разрешений только _Contacts.Read_ и _Contacts.ReadWrite_ действительны для учетных записей Майкрософт. 

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Contacts.Read_: чтение контакта в одной из папок контактов верхнего уровня для вошедшего пользователя (`GET /me/contactfolders/{Id}/contacts/{id}`).
* _Contacts.ReadWrite_: обновление фотографии одного из контактов вошедшего пользователя (`PUT /me/contactfolders/{contactFolderId}/contacts/{id}/photo/$value`). 
* _Contacts.ReadWrite_: добавление контактов в корневую папку вошедшего пользователя (`POST /me/contacts`).

<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Contacts.Read_: чтение контактов в одной из папок контактов верхнего уровня для любого пользователя в организации (`GET /users/{id | userPrincipalName}/contactfolders/{Id}/contacts/{id}`). 
* _Contacts.ReadWrite_: обновление фотографии любого контакта любого пользователя в организации (`PUT /user/{id | userPrincipalName}/contactfolders/{contactFolderId}/contacts/{id}/photo/$value`). 
* _Contacts.ReadWrite_: добавление контактов в корневую папку любого пользователя в организации (`POST /users/{id | userPrincipalName}/contacts`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="device-permissions" class="xliff"></a>

## Разрешения для устройств

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Device.Read_ | Считывание списка устройств пользователя | Позволяет приложению считывать список устройств пользователя от имени выполнившего вход пользователя. | Нет |
| _Device.Command_ | Обмен данными с устройствами пользователей | Позволяет одному приложению запускать другое или обмениваться с ним данными на устройстве пользователя от имени выполнившего вход пользователя. | Нет |


<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Device.ReadWrite.All_ | Чтение и запись устройств | Позволяет приложению читать и записывать все свойства устройств без вошедшего пользователя. Не позволяет создавать, удалять и обновлять альтернативные идентификаторы безопасности устройств. | Да |

<a id="remarks" class="xliff"></a>

### Заметки

Делегированные разрешения _Device.Read_ и _Device.Command_ действительны только для личных учетных записей Майкрософт.

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Device.ReadWrite.All_: чтение всех зарегистрированных устройств в организации (`GET /devices`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="microsoft-intune-device-management-permissions" class="xliff"></a>

## Разрешения для управления устройствами Microsoft Intune

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

Нет.

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _DeviceManagementServiceConfiguration.Read.All_ | Чтение конфигурации Microsoft Intune (предварительная версия) | Позволяет приложению считывать свойства службы Microsoft Intune, в том числе сведения о регистрации устройств и конфигурации подключения к сторонним службам. | Да |
| _DeviceManagementServiceConfiguration.ReadWrite.All_ | Чтение и запись конфигурации Microsoft Intune (предварительная версия) | Позволяет приложению считывать и записывать свойства службы Microsoft Intune, в том числе сведения о регистрации устройств и конфигурации подключения к сторонним службам. | Да |
| _DeviceManagementConfiguration.Read.All_ | Чтение конфигурации и политик Microsoft Intune (предварительная версия) | Позволяет приложению считывать свойства конфигурации и политики соответствия требованиям для устройств под управлением Microsoft Intune, а также сведения об их назначении группам. | Да |
| _DeviceManagementConfiguration.ReadWrite.All_ | Чтение и запись конфигурации и политик Microsoft Intune (предварительная версия) | Позволяет приложению считывать и записывать свойства конфигурации и политики соответствия требованиям для устройств под управлением Microsoft Intune, а также сведения об их назначении группам. | Да |
| _DeviceManagementApps.Read.All_ | Чтение приложений Microsoft Intune (предварительная версия) | Позволяет приложению считывать свойства, сведения о назначении группам и состояния приложений, конфигурации и политики защиты приложений под управлением Microsoft Intune. | Да |
| _DeviceManagementApps.ReadWrite.All_ | Чтение и запись приложений Microsoft Intune (предварительная версия) | Позволяет приложению читать и записывать свойства, сведения о назначении группам и состояния приложений, конфигурации и политики защиты приложений под управлением Microsoft Intune. | Да |
| _DeviceManagementRBAC.Read.All_ | Чтение параметров RBAC для Microsoft Intune (предварительная версия) | Позволяет приложению считывать свойства, связанные с параметрами управления доступом на основе ролей (RBAC) в Microsoft Intune. | Да |
| _DeviceManagementRBAC.ReadWrite.All_ | Чтение и запись параметров RBAC для Microsoft Intune (предварительная версия) | Позволяет приложению считывать и записывать свойства, связанные с параметрами управления доступом на основе ролей (RBAC) в Microsoft Intune. | Да |
| _DeviceManagementManagedDevices.Read.All_ | Чтение устройств Microsoft Intune (предварительная версия) | Позволяет приложению считывать свойства устройств под управлением Microsoft Intune. | Да |
| _DeviceManagementManagedDevices.ReadWrite.All_ | Чтение и запись устройств Microsoft Intune (предварительная версия) | Позволяет приложению читать и записывать свойства устройств под управлением Microsoft Intune. Не позволяет выполнять критичные операции, например удаленную очистку и сброс пароля владельца устройства. | Да |
| _DeviceManagementManagedDevices.PrivilegedOperations.All_ | Выполнение удаленных действий, влияющих на пользователей, на устройствах Microsoft Intune (предварительная версия) | Позволяет приложению выполнять удаленные критичные действия, например очистку устройства или сброс секретного кода на устройствах под управлением Microsoft Intune. | Да |

<a id="remarks" class="xliff"></a>

### Заметки
> **Примечание.** Для настройки элементов управления и политик Intune с помощью API Microsoft Graph по-прежнему требуется, чтобы клиент [лицензировал](https://go.microsoft.com/fwlink/?linkid=839381) Intune надлежащим образом.

Эти разрешения действительны только для рабочих и учебных учетных записей.

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="application" class="xliff"></a>

#### Разрешения приложений

* _DeviceManagementServiceConfiguration.Read.All_: проверка текущего состояния подписки Intune (`GET /deviceManagement/subscriptionState`).
* _DeviceManagementServiceConfiguration.ReadWrite.All_: создание условий (`POST /deviceManagement/termsAndConditions`).
* _DeviceManagementConfiguration.Read.All_: поиск состояния конфигурации устройства (`GET /deviceManagement/deviceConfigurations/{id}/deviceStatuses`).
* _DeviceManagementConfiguration.ReadWrite.All_: назначение политики соответствия требованиям к устройствам для группы (`POST deviceCompliancePolicies/{id}/assign`).
* _DeviceManagementApps.Read.All_: поиск всех приложений Магазина Windows, опубликованных в Intune (`GET /deviceAppManagement/mobileApps?$filter=isOf('microsoft.graph.windowsStoreApp')`).
* _DeviceManagementApps.ReadWrite.All_: публикация нового приложения (`POST /deviceAppManagement/mobileApps`).
* _DeviceManagementRBAC.Read.All_: поиск назначения ролей по имени (`GET /deviceManagement/roleAssignments?$filter=displayName eq 'My Role Assignment'`).
* _DeviceManagementRBAC.ReadWrite.All_: создание пользовательской роли (`POST /deviceManagement/roleDefinitions`).
* _DeviceManagementManagedDevices.Read.All_: поиск управляемого устройства по имени (`GET /managedDevices/?$filter=deviceName eq 'My Device'`).
* _DeviceManagementManagedDevices.ReadWrite.All_: удаление управляемого устройства (`DELETE /managedDevices/{id}`).
* _DeviceManagementManagedDevices.PrivilegedOperations.All_: сброс секретного кода для управляемого устройства пользователя (`POST /managedDevices/{id}/resetPasscode`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="directory-permissions" class="xliff"></a>

## Разрешения для каталогов

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Directory.Read.All_           |     Чтение данных каталога                     | Позволяет приложению считывать и записывать данные в каталоге вашей организации, например пользователей, группы и приложения. | Да |
| _Directory.ReadWrite.All_      |     Чтение и запись данных каталога           | Позволяет приложению считывать и записывать данные в каталоге вашей организации, такие как пользователи и группы.  Не позволяет приложению удалять пользователей и группы или сбрасывать пароли пользователей. | Да |
| _Directory.AccessAsUser.All_   |     Доступ к каталогу, аналогичный доступу вошедшего пользователя  | Предоставляет приложению такой же доступ к информации в каталоге, как у вошедшего пользователя.| Да |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Directory.Read.All_ | Чтение данных каталога | Позволяет приложению считывать данные в каталоге вашей организации, такие как группы, пользователи и приложения, в случаях, когда вход пользователя не предусмотрен. | Да |
| _Directory.ReadWrite.All_ | Чтение и запись данных каталога | Позволяет приложению читать и записывать данные в каталоге вашей организации, например пользователей и группы, без вошедшего пользователя. Не позволяет удалять пользователей или группы. | Да |

<a id="remarks" class="xliff"></a>

### Замечания
Разрешения для каталогов не поддерживаются в случае учетных записей Майкрософт. 

 Разрешения для каталогов обеспечивают самый высокий уровень привилегий для доступа к ресурсам каталога, таким как [User](../api-reference/v1.0/resources/user.md), [Group](../api-reference/v1.0/resources/group.md) и [Device](../api-reference/v1.0/resources/device.md), в организации. Кроме того, только они управляют доступом к некоторым другим ресурсам каталога, например [контактам организации](../api-reference/beta/resources/orgcontact.md), [API расширений схемы](../api-reference/beta/resources/schemaextension.md), [API управления привилегированными пользователями (PIM)](../api-reference/beta/resources/privilegedidentitymanagement_root.md), а также многим ресурсам и API, указанным в разделе **Azure Active Directory** справочной документации по API версии 1.0 и бета-версии. В их число входят административные единицы, роли каталога, параметры каталога, политики и многое другое. 

Разрешение _Directory.ReadWrite.All_ предоставляет следующие привилегии:

- полный доступ на чтение всех ресурсов каталога (как объявленных свойств, так и свойств навигации);
- создание и обновление пользователей;
- отключение и включение пользователей (кроме администратора компании);
- установка альтернативного идентификатора безопасности пользователей (кроме администраторов);
- создание и обновление групп;
- управление членством в группах;
- обновление владельца группы;
- управление назначениями лицензий;
- определение расширений схемы для приложений.
- **Примечание.** Права на сброс паролей пользователей не предоставляются.
- **Примечание.** Права на удаление ресурсов (в том числе пользователей и групп) не предоставляются.
- **Примечание.** В частности, исключаются создание и обновление ресурсов, не указанных выше. К ним относятся application, oAauth2Permissiongrant, appRoleAssignment, device, servicePrincipal, organization, domains и другие.
 

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения
* _Directory.Read.All_: список всех административных единиц в организации (`GET /beta/administrativeUnits`).
* _Directory.ReadWrite.All_: добавление членов для роли каталога (`POST /directoryRoles/{id}/members/$ref`).

<a id="application" class="xliff"></a>

#### Разрешения приложений
* _Directory.Read.All_: список всех объектов, членом которых является пользователь, включая роли каталога и административные единицы (`GET /beta/users/{id}/memberOf`).
* _Directory.Read.All_: список всех членов группы, включая субъекты-службы (`GET /beta/groups/{id}/members`).
* _Directory.ReadWrite.All_: добавление владельца группы (`POST /groups/{id}/owners/$ref`).


Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="files-permissions" class="xliff"></a>

## Разрешения для файлов

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Files.Read_ |    Чтение файлов пользователей | Позволяет приложению считывать файлы вошедшего пользователя.| Нет |
| _Files.Read.All_ | Чтение всех файлов, доступных пользователю | Позволяет приложению считывать все файлы, доступные вошедшему пользователю. | Нет |
| _Files.ReadWrite_ |   Полный доступ к файлам пользователя | Позволяет приложению считывать, создавать, обновлять и удалять файлы вошедшего пользователя. | Нет |
| _Files.ReadWrite.All_ | Полный доступ ко всем файлам, доступным пользователю | Позволяет приложению считывать, создавать, обновлять и удалять все файлы, доступные вошедшему пользователю. | Нет |
| _Files.ReadWrite.AppFolder_ | Полный доступ к папке приложения (предварительная версия) | Позволяет приложению считывать, создавать, обновлять и удалять файлы в папке приложения (предварительная версия). | Нет |
| _Files.Read.Selected_ |    Чтение файлов, которые выбирает пользователь (предварительная версия) | **Ограниченная поддержка в Microsoft Graph (см. замечания)** <br/> Позволяет приложению считывать файлы, которые выбирает пользователь (предварительная версия). После того как пользователь выберет файл, приложение имеет доступ в течение нескольких часов. | Нет |
| _Files.ReadWrite.Selected_ |    Чтение и запись файлов, выбранных пользователем (предварительная версия) | **Ограниченная поддержка в Microsoft Graph (см. замечания)** <br/> Позволяет приложению считывать и записывать файлы, которые выбирает пользователь (предварительная версия). После того как пользователь выберет файл, приложение имеет доступ в течение нескольких часов. | Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Files.Read.All_ | Чтение файлов во всех семействах веб-сайтов (ознакомительная версия) | Позволяет приложению считывать все файлы во всех семействах веб-сайтов в случаях, когда вход пользователя не предусмотрен (предварительная версия). | Да |
| _Files.ReadWrite.All_ | Чтение и запись файлов во всех семействах веб-сайтов (ознакомительная версия) | **Ограниченная поддержка в Microsoft Graph** <br/> Позволяет приложению считывать, создавать, обновлять и удалять все файлы во всех семействах веб-сайтов в случаях, когда вход пользователя не предусмотрен (предварительная версия). | Да |

<a id="remarks" class="xliff"></a>

### Заметки

Делегированные разрешения Files.Read, Files.ReadWrite, Files.Read.All и Files.ReadWrite.All действуют как в личных учетных записях Майкрософт, так и в рабочих или учебных учетных записях. Обратите внимание: в личных учетных записях разрешения Files.Read и Files.ReadWrite также предоставляют доступ к файлам, которыми поделились с вошедшим пользователем другие люди. 

Делегированные разрешения Files.Read.Selected и Files.ReadWrite.Selected действительны только в рабочих и учебных учетных записях и доступны для работы только с [обработчиками файлов Office 365 (версия 1.0)](https://msdn.microsoft.com/office/office365/howto/using-cross-suite-apps). Они не должны использоваться для непосредственного вызова API Microsoft Graph. 

Делегированное разрешение Files.ReadWrite.AppFolder действует только в личных учетных записях и используется для доступа к [специальной папке App Root](https://dev.onedrive.com/items/special_folders.htm) с помощью API Microsoft Graph для OneDrive ([получение специальной папки](../api-reference/v1.0/api/drive_special.md)).

Разрешение приложения Files.ReadWrite.All пока не поддерживает API Microsoft Graph для OneDrive ([создание сеанса возобновляемой отправки](../api-reference/v1.0/api/item_createuploadsession.md)). Полная поддержка ожидается в ближайшее время. 

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Files.Read_: чтение файлов в OneDrive вошедшего пользователя (`GET /me/drive/root/children`).
* _Files.Read.All_: чтение файлов, доступ к которым предоставлен вошедшему пользователю (`GET /me/drive/root/sharedWithMe`).
* _Files.ReadWrite_: запись в файл из OneDrive вошедшего пользователя (`PUT /me/drive/root/children/filename.txt/content`).
* _Files.ReadWrite.All_: запись в файл, доступ к которому предоставлен пользователю (`PUT /users/rgregg@contoso.com/drive/root/children/file.txt/content`).
* _Files.ReadWrite.AppFolder_: запись файлов в папке приложения в OneDrive (`PUT /me/drive/special/approot/children/file.txt/content`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="group-permissions" class="xliff"></a>

## Разрешения групп

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Group.Read.All_ |    Чтение всех групп | Приложение сможет выводить список групп, а также просматривать их свойства и все данные о членстве в группах от имени вошедшего пользователя.  Оно также сможет просматривать календарь, беседы, файлы и другое содержимое всех групп, к которым у вошедшего пользователя есть доступ. | Да |
| _Group.ReadWrite.All_ |    Чтение и запись всех групп| Приложение сможет создавать группы, а также просматривать все их свойства и данные о членстве от имени вошедшего пользователя.  Кроме того, владельцы групп смогут управлять своими группами, а члены групп — обновлять содержимое групп. | Да |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Group.Read.All_ | Чтение всех групп | Позволяет приложению считывать сведения о членстве во всех группах без вошедшего пользователя. Обратите внимание, что не все элементы API групп поддерживают доступ к разрешениям только для приложений. Примеры см. в разделе [Известные проблемы](../concepts/known_issues.md). | Да |
| _Group.ReadWrite.All_ | Чтение и запись всех групп | Позволяет приложению создавать группы, читать и обновлять сведения о членстве в группах, а также удалять группы. Приложение может выполнять все эти операции без вошедшего пользователя. Обратите внимание, что не все элементы API групп поддерживают доступ к разрешениям только для приложений. Примеры см. в разделе [Известные проблемы](../concepts/known_issues.md).| Да |


<a id="remarks" class="xliff"></a>

### Замечания

Функции для работы с группами не поддерживаются для учетных записей Майкрософт. 

В случае групп Office 365 эти разрешения предоставляют доступ к содержимому группы, например беседам, файлам и заметкам. Разрешения для групп также позволяют управлять доступом к ресурсам и API [Планировщика (Майкрософт)](../api-reference/beta/resources/planner_overview.md).

Для разрешений приложения действуют некоторые ограничения на поддерживаемые API. Дополнительные сведения см. в статье, посвященной [известным проблемам](../concepts/known_issues.md).

В некоторых случаях, чтобы приложение могло считывать некоторые свойства группы, такие как `member` и `memberOf`, требуются [разрешения для каталогов](#directory-permissions). Например, если среди членов группы есть один или несколько объектов [servicePrincipal](../api-reference/beta/resources/serviceprincipal.md), то приложению потребуются действующие разрешения на чтение субъектов-служб, предоставленные с помощью разрешений _Directory.\*_. В противном случае Microsoft Graph возвращает ошибку. (В случае делегированных разрешений вошедшему пользователю также необходимы права на чтение субъектов-служб в организации.) Это относится и к свойству `memberOf`, которое может возвращать объекты [administrativeUnit](../api-reference/beta/resources/administrativeunit.md).

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Group.Read.All_: чтение всех групп Office 365, в которых состоит вошедший пользователь (`GET /me/memberOf/$/microsoft.graph.group?$filter=groupTypes/any(a:a%20eq%20'unified')`).
* _Group.Read.All_: чтение всего содержимого групп Office 365, например бесед (`GET /groups/{id}/conversations`).
* _Group.ReadWrite.All_: обновление свойств группы, например фотографий (`PUT /groups/{id}/photo/$value`).
* _Group.ReadWrite.All_: обновление членов группы (`POST /groups/{id}/members/$ref`). ПРИМЕЧАНИЕ. При этом также необходимо разрешение _User.ReadBasic.All_ для чтения пользователя, чтобы добавить его как члена.

<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Group.Read.All_: поиск всех групп, имена которых начинаются с "Sales" (`GET /groups?$filter=startswith(displayName,'Sales')`).
* _Group.ReadWrite.All_: управляющая служба создает события в календаре группы Office 365 (`POST /groups/{id}/events`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="identity-risk-event-permissions" class="xliff"></a>

## Разрешения, связанные с событиями риска несанкционированного использования удостоверений

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _IdentityRiskEvent.Read.All_ |   Чтение сведений о событиях риска несанкционированного использования удостоверений  | Позволяет приложению считывать сведения о событиях риска несанкционированного доступа к удостоверениям всех пользователей в организации от имени вошедшего пользователя. | Да |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _IdentityRiskEvent.Read.All_ |   Чтение сведений о событиях риска несанкционированного использования удостоверений | Позволяет приложению считывать сведения о событиях риска несанкционированного доступа к удостоверениям всех пользователей в организации в случаях, когда вход пользователя не предусмотрен. | Да |


<a id="remarks" class="xliff"></a>

### Заметки

Разрешение _IdentityRiskEvent.Read.All_ действительно только для рабочих и учебных учетных записей. Чтобы приложение с делегированными разрешениями могло считывать сведения о риске несанкционированного доступа к удостоверениям, вошедший пользователь должен быть членом одной из следующих ролей администратора: "Глобальный администратор", "Администратор безопасности" или "Читатель безопасности". Дополнительные сведения о ролях администратора см. в статье [Назначение ролей администратора в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-assign-admin-roles).

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated-and-application" class="xliff"></a>

#### Разрешения приложения и делегированные разрешения
Следующие сценарии поддерживаются как для разрешений приложения, так и для делегированных разрешений:

* считывание всех событий риска, созданных для всех пользователей в клиенте (`GET /beta/identityRiskEvents`);
* чтение созданных ботнетом Dorknet событий риска, связанных с вредоносными программами (`GET /beta/malwareRiskEvents?$filter=malwareName eq 'Dorkbot'`);
* считывание последних 50 событий риска (`GET /beta/identityRiskEvents?$orderBy=riskEventDateTime desc&top=50`).
 
Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="mail-permissions" class="xliff"></a>

## Разрешения почты

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Mail.Read_ |    Чтение почты пользователя | Позволяет приложению считывать электронную почту в почтовых ящиках пользователя. | Нет |
| _Mail.ReadWrite_ |    Доступ для чтения и записи к почте пользователя | Приложение сможет создавать, просматривать, обновлять и удалять сообщения в почтовых ящиках пользователей. Не включает разрешение на отправку почты.| Нет |
| _Mail.Read.Shared_ |    Чтение почты пользователя и общей почты | Позволяет приложению считывать почту, доступную пользователю, в том числе собственную почту пользователя и общую почту. | Нет |
| _Mail.ReadWrite.Shared_ |    Чтение и запись почты пользователя и общей почты | Позволяет приложению создавать, читать, обновлять и удалять почту, доступную пользователю, в том числе собственную почту пользователя и общую почту. Сюда не входит разрешение на отправку почты. | Нет |
| _Mail.Send_ |    Отправка почты от имени пользователя | Позволяет приложению отправлять почту от имени пользователей в организации. | Нет |
| _Mail.Send.Shared_ |    Отправка почты от имени других | Позволяет приложению отправлять почту от имени вошедшего пользователя, в том числе от имени других лиц. | Нет |
| _MailboxSettings.Read_ |  Чтение параметров почтового ящика пользователя | Позволяет приложению считывать параметры почтового ящика пользователя. Сюда не входит разрешение на отправку почты. | Нет |
| _MailboxSettings.ReadWrite_ |  Чтение и запись параметров почтового ящика пользователя | Позволяет приложению создавать, читать, обновлять и удалять параметры почтового ящика пользователя. Сюда не входит разрешение на отправку почты. | Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Mail.Read_       |    Чтение почты во всех почтовых ящиках | Позволяет приложению считывать почту во всех почтовых ящиках в случаях, когда вход пользователя не предусмотрен.| Да |
| _Mail.ReadWrite_ |    Чтение и запись почты во всех почтовых ящиках | Приложение сможет создавать, просматривать, обновлять и удалять сообщения во всех почтовых ящиках без входа пользователя. Не включает разрешение на отправку почты. | Да |
| _Mail.Send_ |    Отправка почты от имени любого пользователя | Позволяет приложению отправлять почту от имени любого пользователя в случаях, когда вход пользователя не предусмотрен. | Да | 
| _MailboxSettings.Read_ |  Чтение всех параметров почтового ящика пользователя | Позволяет приложению считывать параметры почтового ящика пользователя в случаях, когда вход пользователя не предусмотрен. Сюда не входит разрешение на отправку почты. | Нет |
| _MailboxSettings.ReadWrite_ | Чтение и создание всех параметров почтового ящика пользователя  | Позволяет приложению создавать, просматривать, обновлять и удалять параметры почтового ящика пользователя без вошедшего пользователя. Сюда не входит разрешение на отправку почты. | ДА |

<a id="remarks" class="xliff"></a>

### Заметки

Разрешения _Mail.Read.Shared_, _Mail.ReadWrite.Shared_ и _Mail.Send.Shared_ действительны только для рабочих и учебных учетных записей. Все остальные разрешения поддерживаются как для учетных записей Майкрософт, так и для рабочих или учебных учетных записей.

С помощью разрешения _Mail.Send_ или _Mail.Send.Shared_ приложение может отправлять сообщения, сохраняя их копии в папке "Отправленные", даже если у приложения нет соответствующего разрешения _Mail.ReadWrite_ или _Mail.ReadWrite.Shared_.

<a id="example-usage" class="xliff"></a>

### Примеры использования

<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Mail.Read_: список сообщений в папке "Входящие" пользователя, отсортированных по свойству `receivedDateTime` (`GET /me/mailfolders/inbox/messages?$orderby=receivedDateTime DESC`).
* _Mail.Read.Shared_: поиск всех сообщений с вложениями в папке "Входящие" пользователя, предоставившего вошедшему пользователю доступ к этой папке (`GET /users{id | userPrincipalName}/mailfolders/inbox/messages?$filter=hasAttachments eq true`).
* _Mail.ReadWrite_: сообщение отмечается как прочитанное (`PATCH /me/messages/{id}`).
* _Mail.Send_: отправка сообщения (`POST /me/sendmail`).
* _MailboxSettings.ReadWrite_: обновление автоматического ответа пользователя (`PATCH /me/mailboxSettings`).

<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Mail.Read_: поиск сообщений от bob@contoso.com (`GET /users/{id | userPrincipalName}/messages?$filter=from/emailAddress/address eq 'bob@contoso.com'`).
* _Mail.ReadWrite_: создание в папке "Входящие" вложенной папки под названием `Expense Reports` (`POST /users/{id | userPrincipalName}/mailfolders`).
* _Mail.Send_: отправка сообщения (`POST /users/{id | userPrincipalName}/sendmail`).
* _MailboxSettings.Read_: получение часового пояса по умолчанию для почтового ящика пользователя (`GET /users/{id | userPrincipalName}/mailboxSettings/timeZone`).


Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="member-permissions" class="xliff"></a>

## Разрешения для членов

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

Нет.

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Member.Read.Hidden_ | Чтение всех сведений о скрытом членстве | Позволяет приложению считывать сведения о членстве в скрытых группах и административных единицах в случаях, когда вход пользователя не предусмотрен. | Да |

<a id="remarks" class="xliff"></a>

### Заметки
Членство в некоторых группах Office 365 может быть скрытым. Это означает, что только члены группы могут просматривать список ее членов. Эту функцию можно использовать для обеспечения соответствия требованиям, согласно которым в организации необходимо скрывать сведения о членстве в группах от внешних пользователей (например, для группы Office 365, представляющей учеников в классе).

<a id="example-usage" class="xliff"></a>

### Примеры использования

<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Member.Read.Hidden_: чтение сведений о членах административной единицы со скрытым членством (`GET /administrativeUnits/{id}/members`).
* _Member.Read.Hidden_: чтение сведений о членах группы со скрытым членством (`GET /groups/{id}/members`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="notes-permissions" class="xliff"></a>

## Разрешения для заметок
<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Notes.Read_ |    Чтение записных книжек OneNote пользователя | Позволяет приложению просматривать названия записных книжек и разделов OneNote, а также создавать страницы, записные книжки и разделы от имени вошедшего пользователя. | Нет |
| _Notes.Create_ |    Создание записных книжек OneNote пользователя | Позволяет приложению просматривать названия записных книжек и разделов OneNote, а также создавать страницы, записные книжки и разделы от имени вошедшего пользователя.| Нет |
| _Notes.ReadWrite_ |    Чтение и запись записных книжек OneNote пользователя | Позволяет приложению считывать и редактировать записные книжки OneNote, а также предоставлять к ним доступ от имени вошедшего пользователя. | Нет |
| _Notes.Read.All_ |    Чтение всех записных книжек OneNote, доступных пользователю | Позволяет приложению считывать записные книжки OneNote, доступные вошедшему пользователю в организации. | Нет |
| _Notes.ReadWrite.All_ |    Чтение и запись всех записных книжек OneNote, доступных пользователю | Позволяет приложению считывать и редактировать записные книжки OneNote, доступные вошедшему пользователю в организации, а также предоставлять к ним доступ.| Нет |
| _Notes.ReadWrite.CreatedByApp_ |    Ограниченный доступ к записным книжкам (нерекомендуемое) | **Нерекомендуемое** <br/>Не следует использовать. Это разрешение не предоставляет никаких привилегий. | Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Notes.Read.All_ |    Чтение всех записных книжек OneNote | Позволяет приложению считывать все записные книжки OneNote в организации в случаях, когда вход пользователя не предусмотрен. | Да |
| _Notes.ReadWrite.All_ |    Чтение и запись всех записных книжек OneNote | Позволяет приложению считывать и редактировать все записные книжки OneNote в организации, а также предоставлять к ним доступ в случаях, когда вход пользователя не предусмотрен.| Да |


<a id="remarks" class="xliff"></a>

### Заметки
Разрешения _Notes.Read.All_ и _Notes.ReadWrite.All_ действительны только для рабочих и учебных учетных записей. Все остальные разрешения поддерживаются как для учетных записей Майкрософт, так и для рабочих или учебных учетных записей.

С помощью разрешения _Notes.Create_ приложение может просматривать иерархию записных книжек OneNote вошедшего пользователя и создавать содержимое OneNote (записные книжки, группы разделов, разделы, страницы и т. д.).

Разрешения _Notes.ReadWrite_ и _Notes.ReadWrite.All_ также позволяют приложению менять разрешения для содержимого OneNote, доступного вошедшему пользователю. 

В случае рабочих и учебных учетных записей разрешения _Notes.Read.All_ и _Notes.ReadWrite.All_ позволяют приложению получать доступ к содержимому OneNote других пользователей, которое доступно вошедшему пользователю в организации.

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Notes.Create_: создание записных книжек для вошедшего пользователя (`POST /me/onenote/notebooks`).
* _Notes.Read_: чтение записных книжек вошедшего пользователя (`GET /me/onenote/notebooks`).
* _Notes.Read.All_: получение всех записных книжек, доступных вошедшему пользователю в организации (`GET /me/onenote/notebooks?includesharednotebooks=true`).
* _Notes.ReadWrite_: обновление страницы вошедшего пользователя (`PATCH /me/onenote/pages/{id}/$value`).
* _Notes.ReadWrite.All_: создание страницы в записной книжке другого пользователя, доступной вошедшему пользователю в организации (`POST /users/{id}/onenote/pages`).

<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Notes.Read.All_: чтение всех записных книжек пользователей в группе (`GET /groups/{id}/onenote/notebooks`).
* _Notes.ReadWrite.All_: обновление страницы в записной книжке любого пользователя в организации (`PATCH /users/{id}/onenote/pages/{id}/$value`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="openid-permissions" class="xliff"></a>

## Разрешения OpenID

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _email_ |    Просмотр электронных адресов пользователей | Позволяет приложению считывать основные электронные адреса пользователей. | Нет |
| _offline_access_ |    Доступ к данным пользователя в любое время | Позволяет приложению считывать и обновлять данные пользователя, даже если он в настоящее время не использует приложение.| Нет |
| _openid_ |    Вход пользователей | Пользователи смогут входить в приложение с помощью своей рабочей или учебной учетной записи, а приложение сможет просматривать основные данные профилей пользователей.| Нет |
| _profile_ |    Просмотр базовых профилей пользователей | Позволяет приложению просматривать базовые профили пользователей (имя, аватар, имя пользователя).| Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

Нет.

<a id="remarks" class="xliff"></a>

### Заметки
Эти разрешения можно использовать для указания артефактов, которые должны возвращаться в запросах авторизации и токенов Azure AD. Они поддерживаются конечными точками Azure AD 1.0 и 2.0 по-разному.

С конечной точкой Azure AD 1.0 используется только разрешение _openid_. Вы можете указать его в параметре *scope* в запросе авторизации, чтобы вернуть токен идентификатора при использовании протокола OpenID Connect. Дополнительные сведения см. в статье [Предоставление доступа к веб-приложениям с помощью OpenID Connect и Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-protocols-openid-connect-code). Чтобы получить токен идентификатора, для приложения должно быть настроено разрешение _User.Read_. 

При использовании конечной точки Azure AD 2.0 и протоколов OAuth 2.0 или OpenID Connect указывается разрешение _offline\_access_ в параметре _scope_ для явного запроса токена обновления. При использовании OpenID Connect указывается разрешение _openid_ для запроса токена идентификации. Вы также можете указать разрешение _email_, _profile_ или оба для возврата дополнительных утверждений в токене идентификации. При использовании конечной точки 2.0 не нужно указывать разрешение _User.Read_ для возврата токена идентификации. Дополнительные сведения см. в разделе [Области OpenID Connect](https://docs.microsoft.com/azure/active-directory/develop/active-directory-v2-scopes#openid-connect-scopes).

> **Важно!** В настоящее время библиотека Microsoft Authentication Library (MSAL) по умолчанию указывает разрешения _offline\_access_, _openid_, _profile_ и _email_ в запросах авторизации и токенов. Это означает, что если вы укажете эти разрешения явно, Azure AD может вернуть ошибку.
>  

---

<a id="people-permissions" class="xliff"></a>

## Разрешения для пользователей

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _People.Read_ |    Чтение списков людей, релевантных для пользователя (предварительная версия) | Приложение сможет просматривать ранжированный список контактов вошедшего пользователя. Список включает локальные контакты, контакты из социальных сетей и каталога вашей организации, а также пользователей, с которыми он недавно общался (например, с помощью электронной почты и Skype).| Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

Нет.

<a id="remarks" class="xliff"></a>

### Замечания


<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения


Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="reports-permissions" class="xliff"></a>

## Разрешения для отчетов

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

Нет.

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Reports.Read.All_ | Чтение всех отчетов об использовании | Позволяет приложению читать все отчеты об использовании без вошедшего пользователя. К службам, предоставляющим отчеты об использовании, относятся Office 365 и Azure Active Directory. | Да |

<a id="remarks" class="xliff"></a>

### Замечания
Разрешения отчетов поддерживаются только для рабочих и учебных учетных записей. 

<a id="example-usage" class="xliff"></a>

### Примеры использования

<a id="application" class="xliff"></a>

#### Разрешения приложений

* _Reports.Read.All_: чтение подробного отчета об использовании почтовых приложений за 7-дневный период (`GET /reports/EmailAppUsage(view='Detail',period='D7')/content`).
* _Reports.Read.All_: чтение подробного отчета о действиях с электронной почтой за 01.01.2017 (`GET /reports/EmailActivity(view='Detail',data='2017-01-01')/content`).
* _Reports.Read.All_: чтение подробных отчетов об активации Office 365 (`GET /reports/Office365Activations(view='Detail')/content`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="sites-permissions" class="xliff"></a>

## Разрешения для сайтов

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Sites.Read.All_ |    Чтение элементов во всех семействах веб-сайтов | Позволяет приложению считывать документы и элементы списка во всех семействах веб-сайтов от имени вошедшего пользователя. | Нет |
| _Sites.ReadWrite.All_ |    Чтение и запись элементов во всех семействах веб-сайтов | Позволяет приложению редактировать и удалять документы и элементы списка во всех семействах веб-сайтов от имени вошедшего пользователя. | Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

Нет.

<a id="remarks" class="xliff"></a>

### Замечания
Разрешения сайтов действительны только для рабочих и учебных учетных записей.

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Sites.Read.All_: чтение списков на корневом сайте SharePoint (`GET /beta/sharePoint/site/lists`).
* _Sites.ReadWrite.All_: создание элементов списка SharePoint (`POST /beta/sharePoint/site/lists/123/items`).


Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="tasks-permissions" class="xliff"></a>

## Разрешения для задач

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _Tasks.Read_ | Чтение задач пользователя | Позволяет приложению считывать задачи пользователя. | Нет |
| _Tasks.Read.Shared_ | Чтение задач пользователя и общих задач | Позволяет приложению считывать задачи, доступные пользователю, в том числе собственные задачи пользователя и общие задачи. | Нет |
| _Tasks.ReadWrite_ |    Создание, чтение, обновление и удаление задач и контейнеров пользователя | Приложение сможет создавать, просматривать, обновлять и удалять задачи и контейнеры (а также задачи в них), назначенные или предоставленные вошедшему пользователю.| Нет |
| _Tasks.ReadWrite.Shared_ | Чтение и запись задач пользователя и общих задач | Позволяет приложению создавать, считывать, обновлять и удалять задачи, доступные пользователю, в том числе его собственные и общие задачи. | Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

Нет.

<a id="remarks" class="xliff"></a>

### Замечания
Разрешения _Tasks_ используются для управления доступом к задачам Outlook. Для управления доступом к задачам Планировщика (Майкрософт) используются [разрешения _Group_](#group-permissions).

В настоящее время разрешения _Shared_ поддерживаются только для рабочих и учебных учетных записей. Даже с разрешениями _Shared_ операции чтения и записи могут завершаться сбоем, если владелец общего содержимого не предоставил пользователю разрешения на изменение содержимого в папке.

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _Tasks.Read_: получение всех задач в почтовом ящике пользователя (`GET /me/outlook/tasks`).
* _Tasks.Read.Shared_: доступ к задачам в папке, доступ к которой вам предоставил другой пользователь в организации (`Get /users{id|userPrincipalName}/outlook/taskfolders/{id}/tasks`).
* _Tasks.ReadWrite_: добавление события в папку задач по умолчанию, принадлежащую пользователю (`POST /me/outook/tasks`).
* _Tasks.Read_: получение всех незавершенных задач в почтовом ящике пользователя (`GET /users/{id | userPrincipalName}/outlook/tasks?$filter=status ne 'completed'`).
* _Tasks.ReadWrite_: обновление задачи в почтовом ящике пользователя (`PATCH /users/{id | userPrincipalName}/outlook/tasks/id`).
* _Tasks.ReadWrite.Shared_: выполнение задачи от имени другого пользователя (`POST /users/{id | userPrincipalName}/outlook/tasks/id/complete`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="user-permissions" class="xliff"></a>

## Разрешения пользователей

<a id="delegated-permissions" class="xliff"></a>

#### Делегированные разрешения

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _User.Read_       |    Вход и чтение профиля пользователя | Позволяет пользователям входить в приложение, а приложению — просматривать профили вошедших пользователей. Кроме того, позволяет приложению считывать основные сведения о компании вошедших пользователей.| Нет |
| _User.ReadWrite_ |    Доступ для чтения и записи к профилю пользователя | Приложение сможет просматривать ваш профиль. Кроме того, оно сможет обновлять данные вашего профиля от вашего имени. | Нет |
| _User.ReadBasic.All_ |    Чтение базовых профилей всех пользователей | Приложение сможет просматривать базовый набор свойств профилей других пользователей в организации от имени вошедшего пользователя. К этим свойствам относятся отображаемое имя, имя и фамилия, электронный адрес, а также фотография. | Нет |
| _User.Read.All_  |     Чтение полных профилей всех пользователей           | Позволяет приложению считывать полный набор свойств профилей и сведения о подчиненных и руководителях других пользователей в вашей организации от имени вошедшего пользователя. | Да |
| _User.ReadWrite.All_ |     Чтение и запись полных профилей всех пользователей | Позволяет приложению считывать и записывать полный набор свойств профилей и сведения о подчиненных и руководителях других пользователей в вашей организации от имени вошедшего пользователя. Кроме того, приложение сможет создавать и удалять пользователей, а также сбрасывать их пароли от имени вошедшего пользователя. | Да |
| _User.Invite.All_  |     Приглашение гостевых пользователей в организацию | Позволяет приложению приглашать гостевых пользователей в организацию от имени вошедшего пользователя. | Да |
| _UserTimelineActivity.Write.CreatedByApp_  |     Запись действий в приложении на временной шкале пользователей | Позволяет приложению передавать сведения о действиях вошедшего пользователя во Временную шкалу Microsoft. | Нет |

<a id="application-permissions" class="xliff"></a>

#### Разрешения приложений

|   Разрешение    |  Отображаемая строка   |  Описание | Необходимость в согласии администратора |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
| _User.Read.All_ |    Чтение полных профилей всех пользователей | Приложение сможет просматривать полный набор свойств профиля, данные о членстве в группах, сведения о подчиненных и руководителях других пользователей в организации без входа пользователя.| Да |
| _User.ReadWrite.All_ |   Чтение и запись полных профилей всех пользователей | Позволяет приложению в случаях, когда вход пользователя не предусмотрен, просматривать и записывать полный набор свойств профиля, данные о членстве в группах, сведения о подчиненных и руководителях других пользователей в организации.  Кроме того, приложение сможет создавать и удалять пользователей, не являющихся администраторами. Не позволяет сбрасывать пароли пользователей. | Да |
| _User.Invite.All_  |     Приглашение гостевых пользователей в организацию | Позволяет приложению приглашать гостевых пользователей в организацию в случаях, когда вход пользователя не предусмотрен. | Да |

<a id="remarks" class="xliff"></a>

### Примечания

Для учетных записей Майкрософт пригодны только разрешения _User.Read_, _User.ReadWrite_ и _UserTimelineActivity.Write.CreatedByApp_. Для рабочих или учебных учетных записей пригодны все разрешения, за исключением _UserTimelineActivity.Write.CreatedByApp_.

С помощью разрешения _User.Read_ приложение также может считывать основные сведения о компании вошедшего пользователя для рабочей или учебной учетной записи через ресурс [organization](../api-reference/v1.0/resources/organization.md). Доступны следующие свойства: id, displayName и verifiedDomains.

Для рабочих и учебных учетных записей полный профиль включает все объявленные свойства ресурса [User](../api-reference/v1.0/resources/user.md). При чтении по умолчанию возвращается только ограниченное количество свойств. Чтобы считывать свойства, не входящие в набор по умолчанию, используйте параметр `$select`. Свойства по умолчанию:

- displayName;
- givenName;
- jobTitle;
- mail;
- mobilePhone;
- officeLocation;
- preferredLanguage;
- surname;
- userPrincipalName.

 Делегированные разрешения _User.ReadWrite_ и _User.Readwrite.All_ позволяют приложению обновлять следующие свойства профиля для рабочих или учебных учетных записей:

- aboutMe;
- birthday;
- hireDate;
- interests;
- mobilePhone;
- mySite;
- pastProjects;
- photo;
- preferredName;
- responsibilities;
- schools;
- skills.

Разрешение _User.ReadWrite.All_ приложения позволяет приложению обновлять все объявленные свойства рабочих или учебных учетных записей, кроме пароля.

Для считывания и записи сведений о подчиненных (`directReports`) или руководителе (`manager`) для рабочей или учебной учетной записи приложению необходимо свойство _User.Read.All_ (только для чтения) или _User.ReadWrite.All_.

Разрешение _User.ReadBasic.All_ предоставляет приложению доступ только к ограниченному набору свойств, называемому базовым профилем. Это вызвано тем, что полный профиль может содержать конфиденциальные сведения о каталоге. Базовый профиль включает только следующие свойства: 

- displayName
- givenName;
- mail;
- photo;
- surname;
- userPrincipalName

Чтобы приложение могло считывать сведения о членстве пользователя в группах (`memberOf`), приложению необходимо разрешение [_Group.Read.All_](#group-permissions) или [_Group.ReadWrite.All_](#group-permissions). Но если пользователь является членом [directoryRole](../api-reference/v1.0/resources/directoryrole.md) или [administrativeUnit](../api-reference/beta/resources/administrativeunit.md), приложению также потребуются действующие разрешения на считывание этих ресурсов. В противном случае Microsoft Graph возвращает ошибку. Это означает, что приложению также потребуются [разрешения Directory](#directory-permissions), а в случае делегированных разрешений вошедшему пользователю потребуются достаточные привилегии в организации для доступа к ролям каталога и административным единицам. 

<a id="example-usage" class="xliff"></a>

### Примеры использования
<a id="delegated" class="xliff"></a>

#### Делегированные разрешения

* _User.Read_: чтение полного профиля вошедшего пользователя (`GET /me`).
* _User.ReadWrite_: обновление фотографии вошедшего пользователя (`PUT /me/photo/$value`).
* _User.ReadBasic.All_: поиск всех пользователей с именем David (`GET /users?$filter=startswith(displayName,'David')`).
* _User.Read.All_: получение руководителя пользователя (`GET /user/{id | userPrincipalName}/manager`).


<a id="application" class="xliff"></a>

#### Разрешения приложений

* _User.Read.All_: чтение всех пользователей и связей с помощью разностного запроса (`GET /beta/users/delta?$select=displayName,givenName,surname`).
* _User.ReadWrite.All_: обновление фотографии любого пользователя в организации (`PUT /user/{id | userPrincipalName}/photo/$value`).

Более сложные сценарии с использованием нескольких разрешений представлены в разделе [Сценарии с использованием разрешений](#permission-scenarios).

---

<a id="permission-scenarios" class="xliff"></a>

## Сценарии с использованием разрешений

В этом разделе показаны некоторые распространенные сценарии, связанные с ресурсами [user](../api-reference/v1.0/resources/user.md) и [group](../api-reference/v1.0/resources/group.md) в организации. В таблицах показаны разрешения, необходимые приложению для выполнения определенных операций, требуемых сценарием. Обратите внимание, что в некоторых случаях способность приложения выполнять определенные операции зависит от того, какое разрешение предоставлено — разрешение приложения или делегированное разрешение. В случае делегированных разрешений действующие разрешения приложения также зависят от привилегий вошедшего пользователя в организации. Дополнительные сведения см. в разделе [Разрешения приложения, делегированные разрешения и действующие разрешения](#delegated-permissions-application-permissions-and-effective-permissions).

<a id="access-scenarios-on-the-user-resource" class="xliff"></a>

### Сценарии доступа к ресурсу User

| **Задачи приложения, связанные с пользователем**   |  **Необходимые разрешения** | **Строка разрешения** |
|:-------------------------------|:---------------------|:---------------|
| Приложение запрашивает разрешение просматривать основные сведения других пользователей (только отображаемое имя и изображение), например для отображения при выборе людей.   | _User.ReadBasic.All_  |  Чтение базовых профилей всех пользователей |
| Приложение запрашивает разрешение просматривать полный профиль вошедшего пользователя (подчиненные, руководитель и т. д.).     | _User.Read_ | Вход в систему и чтение профиля пользователя|
| Приложение запрашивает разрешение просматривать полные профили всех пользователей.  | _User.Read.All_ |  Чтение полных профилей всех пользователей   |
| Приложение запрашивает разрешение просматривать файлы, почту и данные календаря вошедшего пользователя.  | _User.Read_, _Files.Read_, _Mail.Read_, _Calendars.Read_ | Вход в систему и чтение профиля пользователя, чтение файлов пользователей, чтение почты пользователей, чтение пользовательских календарей |
| Приложение запрашивает разрешение просматривать файлы вошедшего пользователя и файлы, доступ к которым ему предоставили другие пользователи. | _User.Read_, _Files.Read_, _Sites.Read.All_ | Вход в систему и чтение профиля пользователя, чтение файлов пользователей, чтение элементов во всех семействах веб-сайтов |
| Приложение запрашивает разрешение просматривать и записывать полный профиль вошедшего пользователя.   | _User.ReadWrite_ | Доступ для чтения и записи к профилю пользователя |
| Приложение запрашивает разрешение просматривать и записывать полные профили всех пользователей.    | _User.ReadWrite.All_ | Чтение и запись полных профилей всех пользователей |
| Приложение запрашивает разрешение просматривать и записывать файлы, почту и данные календаря вошедшего пользователя.    | _User.ReadWrite_, _Files.ReadWrite_, _Mail.ReadWrite_, _Calendars.ReadWrite_  |  Доступ для чтения и записи к профилю пользователя, доступ для чтения и записи к почте пользователя, полный доступ к пользовательским календарям |
   

<a id="access-scenarios-on-the-group-resource" class="xliff"></a>

### Сценарии доступа к ресурсу Group
    
| **Задачи приложения, связанные с группой**  |  **Необходимые разрешения** |  **Строка разрешения** |
|:-------------------------------|:---------------------|:---------------|
| Приложение запрашивает разрешение просматривать основные сведения о группе (только отображаемое имя и изображение), например для отображения при выборе групп.  | _Group.Read.All_  | Чтение всех групп|
| Приложение запрашивает разрешение просматривать все содержимое во всех группах Office 365, в том числе файлы и беседы.  Ему также требуется показывать членов группы и обновлять эти данные (если пользователь — владелец).  |  _Group.Read.All_ | Чтение элементов во всех семействах веб-сайтов, чтение всех групп|
| Приложение запрашивает разрешение просматривать и записывать все содержимое во всех группах Office 365, в том числе файлы и беседы.  Ему также требуется показывать членов группы и обновлять эти данные (если пользователь — владелец).  |   _Group.ReadWrite.All_, _Sites.ReadWrite.All_ |  Чтение и запись всех групп, редактирование и удаление элементов во всех семействах веб-сайтов |
| Приложение запрашивает разрешение на поиск группы Office 365. Пользователь сможет найти определенную группу, выбрать ее из нумерованного списка, чтобы затем присоединиться к ней.     | _Group.ReadWrite.All_ | Чтение и запись всех групп|
| Приложение запрашивает разрешение на создание группы с помощью AAD Graph. |   _Group.ReadWrite.All_ | Чтение и запись всех групп|

# <a name="add-custom-data-to-resources-using-extensions"></a><span data-ttu-id="2c324-101">Добавление пользовательских данных в ресурсы с помощью расширений</span><span class="sxs-lookup"><span data-stu-id="2c324-101">Add custom data to resources using extensions</span></span>

<span data-ttu-id="2c324-102">Microsoft Graph предоставляет одну конечную точку API для доступа к наглядным и аналитическим данным о пользователях с помощью ряда ресурсов, например [user](../api-reference/v1.0/resources/user.md) и [message](../api-reference/v1.0/resources/message.md).</span><span class="sxs-lookup"><span data-stu-id="2c324-102">Microsoft Graph provides a single API endpoint that gives you access to rich people-centric data and insights through a number of resources such as [user](../api-reference/v1.0/resources/user.md) and [message](../api-reference/v1.0/resources/message.md).</span></span> <span data-ttu-id="2c324-103">Теперь существует способ _**дополнить**_, или расширить, Microsoft Graph, используя собственные данные приложения.</span><span class="sxs-lookup"><span data-stu-id="2c324-103">There's now a way for you to _**extend**_ Microsoft Graph with your own application data.</span></span> <span data-ttu-id="2c324-104">Вы можете добавить специальные свойства в ресурсы Microsoft Graph, и при этом не потребуется внешнее хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="2c324-104">You can add custom properties to Microsoft Graph resources without requiring an external data store.</span></span> 

<span data-ttu-id="2c324-105">Например, можно хранить данные профиля пользователя не в самом приложении, а в Microsoft Graph, дополнив ресурс **user**.</span><span class="sxs-lookup"><span data-stu-id="2c324-105">For example, you might decide to keep your app lightweight and store app-specific user profile data in Microsoft Graph by extending the **user** resource.</span></span> <span data-ttu-id="2c324-106">Кроме того, вы можете оставить существующее хранилище для профилей пользователей приложения и просто добавить идентификатор хранилища приложения в ресурс **user**.</span><span class="sxs-lookup"><span data-stu-id="2c324-106">Alternatively, you might want to retain your app’s existing user profile store, and simply add an app-specific store identifier to the **user** resource.</span></span>

<span data-ttu-id="2c324-p103">В Microsoft Graph есть два типа расширений. Выберите тип с учетом особенностей вашего приложения:</span><span class="sxs-lookup"><span data-stu-id="2c324-p103">Microsoft Graph offers two types of extensions. Choose the extension type that best suits your application needs:</span></span>

- <span data-ttu-id="2c324-109">**Открытые расширения**. Отличный способ начать для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="2c324-109">**Open extensions**: A good way for developers to get started.</span></span>
- <span data-ttu-id="2c324-110">**Расширения схемы**. Более универсальный механизм для разработчиков, которых интересует хранение типизированных данных, возможность совместного доступа к схеме, фильтрации, а также проверки и авторизации входных данных.</span><span class="sxs-lookup"><span data-stu-id="2c324-110">**Schema extensions**: A more versatile mechanism for developers who care about storing typed data, making their schema discoverable and shareable, being able to filter, and in the future, being able to perform input data validation and authorization.</span></span>

> <span data-ttu-id="2c324-111">**Важно!** Не используйте расширения для хранения данных учетных записей, государственных идентификационных номеров, данных держателей карт, данных финансовых счетов, медицинских сведений и конфиденциальных биографических данных.</span><span class="sxs-lookup"><span data-stu-id="2c324-111">**Important:** You should not use extensions to store sensitive personally identifiable information, such as account credentials, government identification numbers, cardholder data, financial account data, healthcare information, or sensitive background information.</span></span>

## <a name="supported-resources"></a><span data-ttu-id="2c324-112">Поддерживаемые ресурсы</span><span class="sxs-lookup"><span data-stu-id="2c324-112">Supported resources</span></span>

<span data-ttu-id="2c324-113">В приведенной ниже таблице перечислены ресурсы, которые поддерживают открытые расширения и расширения схемы. Кроме того, в ней указано, общедоступны эти расширения (в конечных точках бета-версии и версии 1.0) или предварительно доступны (только в конечной точке бета-версии).</span><span class="sxs-lookup"><span data-stu-id="2c324-113">The following table lists the resources that support open and schema extensions, and indicates whether they have reached general availability (GA - available in both the v1.0 and beta endpoints) or are in preview (available only in the beta endpoint).</span></span>  

|<span data-ttu-id="2c324-114">Ресурс</span><span class="sxs-lookup"><span data-stu-id="2c324-114">Resource</span></span> |<span data-ttu-id="2c324-115">Открытые расширения</span><span class="sxs-lookup"><span data-stu-id="2c324-115">Open extensions</span></span> |<span data-ttu-id="2c324-116">Расширения схемы</span><span class="sxs-lookup"><span data-stu-id="2c324-116">Schema extensions</span></span> |
|:------- |:------ |:------ |
| [<span data-ttu-id="2c324-117">Административная единица</span><span class="sxs-lookup"><span data-stu-id="2c324-117">Administrative unit</span></span>](../api-reference/beta/resources/administrativeunit.md) | <span data-ttu-id="2c324-118">Только предварительная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-118">Preview only</span></span> | <span data-ttu-id="2c324-119">Только предварительная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-119">Preview only</span></span> |
| <span data-ttu-id="2c324-120">[event](../api-reference/v1.0/resources/event.md) для календаря</span><span class="sxs-lookup"><span data-stu-id="2c324-120">[Calendar event](../api-reference/v1.0/resources/event.md)</span></span> | <span data-ttu-id="2c324-121">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-121">GA</span></span> | <span data-ttu-id="2c324-122">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-122">GA</span></span> |
| [<span data-ttu-id="2c324-123">device</span><span class="sxs-lookup"><span data-stu-id="2c324-123">Device</span></span>](../api-reference/v1.0/resources/device.md) | <span data-ttu-id="2c324-124">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-124">GA</span></span> | <span data-ttu-id="2c324-125">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-125">GA</span></span> |
| [<span data-ttu-id="2c324-126">group</span><span class="sxs-lookup"><span data-stu-id="2c324-126">Group</span></span>](../api-reference/v1.0/resources/group.md) | <span data-ttu-id="2c324-127">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-127">GA</span></span> | <span data-ttu-id="2c324-128">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-128">GA</span></span> |
| [<span data-ttu-id="2c324-129">event для календаря группы</span><span class="sxs-lookup"><span data-stu-id="2c324-129">Group calendar event</span></span>](../api-reference/v1.0/resources/event.md) | <span data-ttu-id="2c324-130">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-130">GA</span></span> | <span data-ttu-id="2c324-131">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-131">GA</span></span> |
| [<span data-ttu-id="2c324-132">post цепочки беседы группы</span><span class="sxs-lookup"><span data-stu-id="2c324-132">Group conversation post</span></span>](../api-reference/v1.0/resources/post.md) | <span data-ttu-id="2c324-133">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-133">GA</span></span> | <span data-ttu-id="2c324-134">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-134">GA</span></span> |
| [<span data-ttu-id="2c324-135">message</span><span class="sxs-lookup"><span data-stu-id="2c324-135">Message</span></span>](../api-reference/v1.0/resources/message.md) | <span data-ttu-id="2c324-136">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-136">GA</span></span> | <span data-ttu-id="2c324-137">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-137">GA</span></span> |
| [<span data-ttu-id="2c324-138">organization</span><span class="sxs-lookup"><span data-stu-id="2c324-138">Organization</span></span>](../api-reference/v1.0/resources/organization.md) | <span data-ttu-id="2c324-139">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-139">GA</span></span> | <span data-ttu-id="2c324-140">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-140">GA</span></span> |
| <span data-ttu-id="2c324-141">[contact](../api-reference/v1.0/resources/contact.md) (личный контакт)</span><span class="sxs-lookup"><span data-stu-id="2c324-141">[Personal contact](../api-reference/v1.0/resources/contact.md)</span></span>| <span data-ttu-id="2c324-142">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-142">GA</span></span> | <span data-ttu-id="2c324-143">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-143">GA</span></span> |
| [<span data-ttu-id="2c324-144">user</span><span class="sxs-lookup"><span data-stu-id="2c324-144">User</span></span>](../api-reference/v1.0/resources/user.md) | <span data-ttu-id="2c324-145">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-145">GA</span></span> | <span data-ttu-id="2c324-146">Общедоступная версия</span><span class="sxs-lookup"><span data-stu-id="2c324-146">GA</span></span> |

<span data-ttu-id="2c324-147">Расширения всех этих ресурсов можно использовать, выполнив вход с помощью рабочей или учебной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="2c324-147">You can use extensions on all these resources when signed-in with a work or school account.</span></span> <span data-ttu-id="2c324-148">Кроме того, выполнив вход с помощью личной учетной записи, можно использовать расширения для следующих ресурсов: **event**, **post**, **group**, **message**, **contact** и **user**.</span><span class="sxs-lookup"><span data-stu-id="2c324-148">In addition, you can use extensions on these resources—**event**, **post**, **group**, **message**, **contact**, and **user**—when signed in with a personal account.</span></span> 

## <a name="open-extensions"></a><span data-ttu-id="2c324-149">Открытые расширения</span><span class="sxs-lookup"><span data-stu-id="2c324-149">Open extensions</span></span>

<span data-ttu-id="2c324-150">[Открытые расширения](../api-reference/v1.0/resources/opentypeextension.md) (прежнее название — расширения данных Office 365) относятся к [открытым типам](http://www.odata.org/getting-started/advanced-tutorial/#openType) и позволяют добавлять нетипизированные данные приложений непосредственно в экземпляр ресурса.</span><span class="sxs-lookup"><span data-stu-id="2c324-150">[Open extensions](../api-reference/v1.0/resources/opentypeextension.md) (formerly known as Office 365 data extensions) are [open types](http://www.odata.org/getting-started/advanced-tutorial/#openType) that offer a flexible way to add untyped app data directly to a resource instance.</span></span> 

<span data-ttu-id="2c324-151">Открытые расширения, наряду с их пользовательскими данными, доступны через свойство навигации **extensions** экземпляра ресурса.</span><span class="sxs-lookup"><span data-stu-id="2c324-151">Open extensions, together with their custom data, are accessible through the **extensions** navigation property of the resource instance.</span></span>
<span data-ttu-id="2c324-152">Свойство **extensionName** — это единственное _предварительно определенное_ записываемое свойство в открытом расширении.</span><span class="sxs-lookup"><span data-stu-id="2c324-152">The **extensionName** property is the only _pre-defined_, writable property in an open extension.</span></span> <span data-ttu-id="2c324-153">При создании открытого расширения нужно назначить свойству **extensionName** имя, которое уникально для клиента.</span><span class="sxs-lookup"><span data-stu-id="2c324-153">When creating an open extension, you must assign the **extensionName** property a name that is unique within the tenant.</span></span> 

<span data-ttu-id="2c324-154">Для этого можно использовать формат обратных DNS, который зависит от _принадлежащего вам домена_, например `Com.Contoso.ContactInfo`.</span><span class="sxs-lookup"><span data-stu-id="2c324-154">One way to do this is to use a reverse domain name system (DNS) format that is dependent on _your own domain_, for example, `Com.Contoso.ContactInfo`.</span></span> 

<span data-ttu-id="2c324-155">Не указывайте домен Майкрософт (`Com.Microsoft` или `Com.OnMicrosoft`) в имени расширения.</span><span class="sxs-lookup"><span data-stu-id="2c324-155">Do not use the Microsoft domain (`Com.Microsoft` or `Com.OnMicrosoft`) in an extension name.</span></span>

<span data-ttu-id="2c324-156">Вы можете [создать открытое расширение](../api-reference/v1.0/api/opentypeextension_post_opentypeextension.md) в экземпляре ресурса и сохранить в нем все пользовательские данные с помощью одной операции (обратите внимание на [приведенные ниже ограничения](known_issues.md#extensions) для некоторых поддерживаемых ресурсов).</span><span class="sxs-lookup"><span data-stu-id="2c324-156">You can [create an open extension](../api-reference/v1.0/api/opentypeextension_post_opentypeextension.md) in a resource instance and store custom data to it all in the same operation (note [known limitation](known_issues.md#extensions) for some of the supported resources).</span></span>

<span data-ttu-id="2c324-157">Позже возможно [считывание](../api-reference/v1.0/api/opentypeextension_get.md), [обновление](../api-reference/v1.0/api/opentypeextension_update.md) или [удаление](../api-reference/v1.0/api/opentypeextension_delete.md) расширения и его данных.</span><span class="sxs-lookup"><span data-stu-id="2c324-157">You can subsequently [read](../api-reference/v1.0/api/opentypeextension_get.md), [update](../api-reference/v1.0/api/opentypeextension_update.md), or [delete](../api-reference/v1.0/api/opentypeextension_delete.md) the extension and its data.</span></span>

<span data-ttu-id="2c324-158">Пример открытого расширения см. в статье [Добавление пользовательских данных в ресурсы user с помощью открытых расширений](extensibility_open_users.md).</span><span class="sxs-lookup"><span data-stu-id="2c324-158">Open extension example: [Add custom data to users using open extensions](extensibility_open_users.md)</span></span>

## <a name="schema-extensions"></a><span data-ttu-id="2c324-159">Расширения схемы</span><span class="sxs-lookup"><span data-stu-id="2c324-159">Schema extensions</span></span>

<span data-ttu-id="2c324-160">[Расширения схемы](../api-reference/v1.0/resources/schemaextension.md) позволяют определять схему, используемую для расширения типа ресурса.</span><span class="sxs-lookup"><span data-stu-id="2c324-160">[Schema extensions](../api-reference/v1.0/resources/schemaextension.md) allow you to define a schema that you can use to extend a resource type.</span></span> <span data-ttu-id="2c324-161">Вначале создайте определение расширения схемы,</span><span class="sxs-lookup"><span data-stu-id="2c324-161">First, you create your schema extension definition.</span></span> <span data-ttu-id="2c324-162">чтобы позже воспользоваться им для расширения экземпляров ресурса, применяя строго типизированные пользовательские данные.</span><span class="sxs-lookup"><span data-stu-id="2c324-162">Then, use it to extend resource instances with strongly-typed custom data.</span></span> <span data-ttu-id="2c324-163">Кроме того, вы можете контролировать [состояние](#schema-extensions-lifecycle) расширения схемы и сделать его доступным другим приложениям.</span><span class="sxs-lookup"><span data-stu-id="2c324-163">In addition, you can control the [status](#schema-extensions-lifecycle) of your schema extension and let it be discoverable by other apps.</span></span> <span data-ttu-id="2c324-164">Эти приложения смогут применить расширение к собственным данным и создать на его основе другие типы взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="2c324-164">These apps can in turn use the extension for their data and build further experiences on top of it.</span></span>

<span data-ttu-id="2c324-165">При создании определения расширения схемы необходимо присвоить уникальное имя его свойству **id**. Есть два варианта:</span><span class="sxs-lookup"><span data-stu-id="2c324-165">When creating a schema extension definition, you must provide a unique name for its **id**. There are two naming options:</span></span>

- <span data-ttu-id="2c324-166">Если у вас уже есть личный домен `.com`, `.net`, `.gov`, `.edu` или `.org`, который вы проверили для клиента, можете использовать это доменное имя вместе с именем схемы, чтобы задать уникальное имя в следующем формате: \{_&#65279;доменноеИмя_\}\_\{_&#65279;имяСхемы_\}.</span><span class="sxs-lookup"><span data-stu-id="2c324-166">If you already have a vanity `.com`,`.net`, `.gov`, `.edu` or a `.org` domain that you have verified with your tenant, you can use the domain name along with the schema name to define a unique name, in this format \{_&#65279;domainName_\}\_\{_&#65279;schemaName_\}.</span></span> <span data-ttu-id="2c324-167">Например, если у вас есть личный домен contoso.com, можете задать **идентификатор** `contoso_mySchema`.</span><span class="sxs-lookup"><span data-stu-id="2c324-167">For example, if your vanity domain is contoso.com, you can define an **id** of, `contoso_mySchema`.</span></span> <span data-ttu-id="2c324-168">Это предпочтительный способ.</span><span class="sxs-lookup"><span data-stu-id="2c324-168">This is the preferred option.</span></span>
- <span data-ttu-id="2c324-p108">Если у вас нет подтвержденного личного домена, можете присвоить свойству **id** имя схемы (без префикса в виде доменного имени), например `mySchema`. Microsoft Graph присвоит ему идентификатор строки на основе предоставленного имени в следующем формате: ext\{_&#65279;8-random-alphanumeric-chars_\}\_\{_&#65279;schema-name_\}.  Например, `extkvbmkofy_mySchema`.</span><span class="sxs-lookup"><span data-stu-id="2c324-p108">If you don’t have a verified vanity domain, you can just set the **id** to a schema name (without a domain name prefix), for example, `mySchema`. Microsoft Graph will assign a string ID for you based on the supplied name, in this format: ext\{_&#65279;8-random-alphanumeric-chars_\}\_\{_&#65279;schema-name_\}.  For example, `extkvbmkofy_mySchema`.</span></span>

<span data-ttu-id="2c324-172">Это уникальное имя будет указано в **идентификаторе** как имя сложного типа, который будет хранить ваши пользовательские данные в экземпляре расширенного ресурса.</span><span class="sxs-lookup"><span data-stu-id="2c324-172">You will see this unique name in **id** used as the name of the complex type that will store your custom data on the extended resource instance.</span></span>

<span data-ttu-id="2c324-173">В отличие от открытых расширений, для управления определениями расширений схемы ([list](../api-reference/v1.0/api/schemaextension_list.md), [create](../api-reference/v1.0/api/schemaextension_post_schemaextensions.md), [get](../api-reference/v1.0/api/schemaextension_get.md), [update](../api-reference/v1.0/api/schemaextension_update.md) и [delete](../api-reference/v1.0/api/schemaextension_delete.md)) и их данными (для добавления, получения, обновления и удаления данных) нужны отдельные наборы операций API.</span><span class="sxs-lookup"><span data-stu-id="2c324-173">Unlike open extensions, managing schema extension definitions ([list](../api-reference/v1.0/api/schemaextension_list.md), [create](../api-reference/v1.0/api/schemaextension_post_schemaextensions.md), [get](../api-reference/v1.0/api/schemaextension_get.md), [update](../api-reference/v1.0/api/schemaextension_update.md), and [delete](../api-reference/v1.0/api/schemaextension_delete.md)) and managing their data (add, get, update, and delete data) are separate sets of API operations.</span></span> 

<span data-ttu-id="2c324-174">Так как расширения схемы доступны как сложные типы в экземплярах целевых ресурсов, вы можете выполнять операции CRUD над пользовательскими данными в расширении схемы следующими способами:</span><span class="sxs-lookup"><span data-stu-id="2c324-174">Because schema extensions are accessible as complex types in instances of the targeted resources, you can do CRUD operations on the custom data in a schema extension in the following ways:</span></span>

- <span data-ttu-id="2c324-175">Указывать пользовательские данные при создании нового экземпляра ресурса с помощью метода `POST`.</span><span class="sxs-lookup"><span data-stu-id="2c324-175">Use the resource `POST` method to specify custom data when creating a new resource instance.</span></span> <span data-ttu-id="2c324-176">Обратите внимание, что с ресурсами **contact**, **event**, **message** и **post** связана [известная проблема](known_issues.md#creating-a-resource-instance-and-adding-schema-extension-data-at-the-same-time), из-за которой нужно создавать расширение схемы с помощью операции `PATCH`.</span><span class="sxs-lookup"><span data-stu-id="2c324-176">Note that there is a [known issue](known_issues.md#creating-a-resource-instance-and-adding-schema-extension-data-at-the-same-time) on the **contact**, **event**, **message**, and **post** resources that requires creating a schema extension using a `PATCH` operation.</span></span>
- <span data-ttu-id="2c324-177">Читать пользовательские данные с помощью метода `GET`.</span><span class="sxs-lookup"><span data-stu-id="2c324-177">Use the resource `GET` method to read the custom data.</span></span>
- <span data-ttu-id="2c324-178">Добавлять или обновлять пользовательские данные в существующем экземпляре ресурса с помощью метода `PATCH`.</span><span class="sxs-lookup"><span data-stu-id="2c324-178">Use the resource `PATCH` method to add or update custom data in an existing resource instance.</span></span>
- <span data-ttu-id="2c324-179">Устанавливать значение null для сложного типа с помощью метода `PATCH` для удаления пользовательских данных в экземпляре ресурса.</span><span class="sxs-lookup"><span data-stu-id="2c324-179">Use the resource `PATCH` method to set the complex type to null, to delete the custom data in the resource instance.</span></span> 

<span data-ttu-id="2c324-180">Пример расширения схемы см. в статье [Добавление пользовательских данных в группы с помощью расширений схемы](extensibility_schema_groups.md).</span><span class="sxs-lookup"><span data-stu-id="2c324-180">Schema extension example: [Add custom data to groups using schema extensions](extensibility_schema_groups.md)</span></span>


### <a name="schema-extensions-lifecycle"></a><span data-ttu-id="2c324-181">Жизненный цикл расширений схемы</span><span class="sxs-lookup"><span data-stu-id="2c324-181">Schema extensions lifecycle</span></span>

<span data-ttu-id="2c324-182">Когда приложение создает определение расширения схемы, оно помечается как владелец такого расширения.</span><span class="sxs-lookup"><span data-stu-id="2c324-182">When your app creates a schema extension definition, the app is marked as the owner of that schema extension.</span></span> 

<span data-ttu-id="2c324-p110">Приложение-владелец может перемещать расширение из одного состояния в другое, используя операцию PATCH для свойства **status**. В зависимости от текущего состояния приложение-владелец может обновлять или удалять расширение. Любые обновления расширения схемы должны всегда быть только дополнительными и не прерывающими.</span><span class="sxs-lookup"><span data-stu-id="2c324-p110">The owner app can move the extension through different states of a lifecycle, using a PATCH operation on its **status** property. Depending on the current state, the owner app may be able to update or delete the extension. Any updates to a schema extension should always only be additive and non-breaking.</span></span>


|<span data-ttu-id="2c324-186">Состояние</span><span class="sxs-lookup"><span data-stu-id="2c324-186">State</span></span> |<span data-ttu-id="2c324-187">Поведение в состоянии жизненного цикла</span><span class="sxs-lookup"><span data-stu-id="2c324-187">Lifecycle state behavior</span></span> |
|:-------------|:------------|
| <span data-ttu-id="2c324-188">InDevelopment</span><span class="sxs-lookup"><span data-stu-id="2c324-188">InDevelopment</span></span> | <ul><li><span data-ttu-id="2c324-p111">Начальное состояние после создания. Идет разработка расширения схемы, которую выполняет приложение-владелец. </span><span class="sxs-lookup"><span data-stu-id="2c324-p111">Initial state after creation. The owner app is still developing the schema extension. </span></span></li><li><span data-ttu-id="2c324-191">В этом состоянии только приложение-владелец может расширять экземпляры ресурса с использованием этого определения схемы и только в том каталоге, в котором данное приложение зарегистрировано.</span><span class="sxs-lookup"><span data-stu-id="2c324-191">In this state, only the owner app can extend resource instances with this schema definition, and only in the same directory where the owner app is registered.</span></span> </li><li><span data-ttu-id="2c324-192">Только приложение-владелец может добавить изменения в определение расширения или удалить его.</span><span class="sxs-lookup"><span data-stu-id="2c324-192">Only the owner app can update the extension definition with additive changes or delete it.</span></span> </li><li><span data-ttu-id="2c324-193">Приложение-владелец может заменить состояние **InDevelopment** расширения на **Available**.</span><span class="sxs-lookup"><span data-stu-id="2c324-193">The owner app can move the extension from **InDevelopment** to the **Available** state.</span></span></li></ul> |
| <span data-ttu-id="2c324-194">Available</span><span class="sxs-lookup"><span data-stu-id="2c324-194">Available</span></span> | <ul><li><span data-ttu-id="2c324-195">Расширение схемы доступно для всех приложений в любом клиенте.</span><span class="sxs-lookup"><span data-stu-id="2c324-195">The schema extension is available for use by all apps in any tenant.</span></span> </li><li><span data-ttu-id="2c324-196">После того как приложение-владелец задаст **Available** в качестве состояния расширения, любое приложение сможет просто добавлять пользовательские данные в экземпляры ресурсов, типы которых указаны в расширении (если у приложения есть соответствующие разрешения).</span><span class="sxs-lookup"><span data-stu-id="2c324-196">After the owner app sets the extension to **Available**, any app can simply add custom data to instances of those resource types specified in the extension (as long as the app has permissions to that resource).</span></span> <span data-ttu-id="2c324-197">Приложение может назначать пользовательские данные при создании нового экземпляра или обновлении существующего.</span><span class="sxs-lookup"><span data-stu-id="2c324-197">The app can assign custom data when creating a new instance or updating an existing instance.</span></span> </li><li><span data-ttu-id="2c324-198">Только приложение-владелец может добавлять изменения в определение расширения.</span><span class="sxs-lookup"><span data-stu-id="2c324-198">Only the owner app can update the extension definition with additive changes.</span></span> <span data-ttu-id="2c324-199">Если указано это состояние, удалить определение расширения не может никакое приложение.</span><span class="sxs-lookup"><span data-stu-id="2c324-199">No app can delete the extension definition in this state.</span></span> </li><li><span data-ttu-id="2c324-200">Приложение-владелец может обновить состояние расширения схемы, заменив **Available** на **Deprecated**.</span><span class="sxs-lookup"><span data-stu-id="2c324-200">The owner app can move the schema extension from **Available** to the **Deprecated** state.</span></span></li></ul> |
| <span data-ttu-id="2c324-201">Deprecated</span><span class="sxs-lookup"><span data-stu-id="2c324-201">Deprecated</span></span> | <ul><li><span data-ttu-id="2c324-202">Определение расширения схемы больше не доступно для чтения или изменения.</span><span class="sxs-lookup"><span data-stu-id="2c324-202">The schema extension definition can no longer be read or modified.</span></span> </li><li><span data-ttu-id="2c324-203">Приложения не могут просмотреть, обновить, добавить свойства или удалить расширение.</span><span class="sxs-lookup"><span data-stu-id="2c324-203">No app can view, update, add new properties, or delete the extension.</span></span> </li><li><span data-ttu-id="2c324-204">Но они по-прежнему могут читать, обновлять и удалять _значения свойств_ расширения.</span><span class="sxs-lookup"><span data-stu-id="2c324-204">Apps can, however, still read, update, or delete existing extension _property values_.</span></span> </li><li><span data-ttu-id="2c324-205">Приложение-владелец может заменить состояние **Deprecated** расширения схемы на **Available**.</span><span class="sxs-lookup"><span data-stu-id="2c324-205">The owner app can move the schema extension from **Deprecated** back to the **Available** state.</span></span></li></ul> |

### <a name="supported-property-data-types"></a><span data-ttu-id="2c324-206">Поддерживаемые типы данных свойств</span><span class="sxs-lookup"><span data-stu-id="2c324-206">Supported property data types</span></span>

<span data-ttu-id="2c324-207">При определении свойства в расширении схемы поддерживаются следующие типы данных:</span><span class="sxs-lookup"><span data-stu-id="2c324-207">The following data types are supported when defining a property in a schema extension:</span></span>

| <span data-ttu-id="2c324-208">Тип свойства</span><span class="sxs-lookup"><span data-stu-id="2c324-208">Property Type</span></span> | <span data-ttu-id="2c324-209">Примечания</span><span class="sxs-lookup"><span data-stu-id="2c324-209">Remarks</span></span> |
|:-------------|:------------|
| <span data-ttu-id="2c324-210">Binary</span><span class="sxs-lookup"><span data-stu-id="2c324-210">Binary</span></span> | <span data-ttu-id="2c324-211">Не более 256 байт.</span><span class="sxs-lookup"><span data-stu-id="2c324-211">256 bytes maximum.</span></span> |
| <span data-ttu-id="2c324-212">Boolean</span><span class="sxs-lookup"><span data-stu-id="2c324-212">Boolean</span></span> | <span data-ttu-id="2c324-213">Не поддерживается для ресурсов message, event и post.</span><span class="sxs-lookup"><span data-stu-id="2c324-213">Not supported for messages, events and posts.</span></span> |
| <span data-ttu-id="2c324-214">DateTime</span><span class="sxs-lookup"><span data-stu-id="2c324-214">DateTime</span></span> | <span data-ttu-id="2c324-p114">Должен быть указан в формате ISO 8601. Данные времени будут храниться в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="2c324-p114">Must be specified in ISO 8601 format. Will be stored in UTC.</span></span> |
| <span data-ttu-id="2c324-217">Целое число</span><span class="sxs-lookup"><span data-stu-id="2c324-217">Integer</span></span> | <span data-ttu-id="2c324-p115">32-разрядное значение. Не поддерживается для ресурсов message, event и post.</span><span class="sxs-lookup"><span data-stu-id="2c324-p115">32-bit value. Not supported for messages, events and posts.</span></span> |
| <span data-ttu-id="2c324-220">String</span><span class="sxs-lookup"><span data-stu-id="2c324-220">String</span></span> | <span data-ttu-id="2c324-221">Не более 256 символов</span><span class="sxs-lookup"><span data-stu-id="2c324-221">256 characters maximum.</span></span> |

> <span data-ttu-id="2c324-222">**Примечание.** Многозначные свойства не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="2c324-222">**Note:** Multi-value properties are not supported.</span></span>

### <a name="azure-ad-directory-schema-extensions"></a><span data-ttu-id="2c324-223">Расширения схемы каталога Azure AD</span><span class="sxs-lookup"><span data-stu-id="2c324-223">Azure AD directory schema extensions</span></span>

<span data-ttu-id="2c324-p116">Azure AD поддерживает схожий тип расширений, известный как [расширения схемы каталога](https://msdn.microsoft.com/en-us/library/azure/ad/graph/howto/azure-ad-graph-api-directory-schema-extensions), для нескольких ресурсов [directoryObject](../api-reference/v1.0/resources/directoryObject.md). Для создания определений расширений схемы каталога и управления ими необходимо использовать API Graph Azure AD, но вы можете использовать API Graph Microsoft для добавления, получения, обновления и удаления _данных_ в свойствах этих расширений.</span><span class="sxs-lookup"><span data-stu-id="2c324-p116">Azure AD supports a similar type of extensions, known as [directory schema extensions](https://msdn.microsoft.com/en-us/library/azure/ad/graph/howto/azure-ad-graph-api-directory-schema-extensions), on a few [directoryObject](../api-reference/v1.0/resources/directoryObject.md) resources. While you must use Azure AD Graph API to create and manage the definitions of directory schema extensions, you can use Microsoft Graph API to add, get, update and delete _data_ in the properties of these extensions.</span></span>

## <a name="permissions"></a><span data-ttu-id="2c324-226">Разрешения</span><span class="sxs-lookup"><span data-stu-id="2c324-226">Permissions</span></span>

<span data-ttu-id="2c324-227">Для чтения или записи данных для расширений в ресурсе необходимы те же [разрешения](./permissions_reference.md), что и для чтения или записи ресурса.</span><span class="sxs-lookup"><span data-stu-id="2c324-227">The same [permissions](./permissions_reference.md) that are required to read from or write to a specific resource are also required to read from or write to any extensions data on that resource.</span></span> <span data-ttu-id="2c324-228">Например, чтобы приложение могло добавить специальные данные в профиль вошедшего пользователя, у него должно быть разрешение *User.ReadWrite.All*.</span><span class="sxs-lookup"><span data-stu-id="2c324-228">For example, for an app to be able to update the signed-in user's profile with custom app data, the app must have been granted the *User.ReadWrite.All* permission.</span></span>

<span data-ttu-id="2c324-229">Кроме того, для создания определений расширения схемы и управления ими приложению необходимо разрешение *Directory.AccessAsUser.All*.</span><span class="sxs-lookup"><span data-stu-id="2c324-229">Additionally, to create and manage schema extension definitions, an application must be granted the *Directory.AccessAsUser.All* permission.</span></span>

## <a name="data-limits"></a><span data-ttu-id="2c324-230">Ограничения данных</span><span class="sxs-lookup"><span data-stu-id="2c324-230">Data limits</span></span>

### <a name="open-extension-limits"></a><span data-ttu-id="2c324-231">Ограничения открытых расширений</span><span class="sxs-lookup"><span data-stu-id="2c324-231">Open extension limits</span></span>
<span data-ttu-id="2c324-232">К ресурсам каталогов, таким как **user**, **group**, **device**, применимы следующие ограничения:</span><span class="sxs-lookup"><span data-stu-id="2c324-232">The following limits apply to directory resources (such as **user**, **group**, **device**):</span></span>

- <span data-ttu-id="2c324-233">Каждое открытое расширение может содержать до 2 КБ данных (включая само определение расширения).</span><span class="sxs-lookup"><span data-stu-id="2c324-233">Each open extension can have up to 2 KB of data (including the extension definition itself).</span></span>
- <span data-ttu-id="2c324-234">Приложение может добавлять до двух открытых расширений для каждого экземпляра ресурса.</span><span class="sxs-lookup"><span data-stu-id="2c324-234">An application can add up to two open extensions per resource instance.</span></span>

### <a name="schema-extension-limits"></a><span data-ttu-id="2c324-235">Ограничения расширений схемы</span><span class="sxs-lookup"><span data-stu-id="2c324-235">Schema extension limits</span></span>
<span data-ttu-id="2c324-236">Приложение может создать не более пяти определений **расширений схемы**.</span><span class="sxs-lookup"><span data-stu-id="2c324-236">An application may create no more than five **schema extension** definitions.</span></span>

## <a name="known-limitations"></a><span data-ttu-id="2c324-237">Известные ограничения</span><span class="sxs-lookup"><span data-stu-id="2c324-237">Known limitations</span></span>

<span data-ttu-id="2c324-238">Об известных ограничениях на использование расширений можно узнать в [соответствующем разделе](known_issues.md#extensions) статьи об известных проблемах.</span><span class="sxs-lookup"><span data-stu-id="2c324-238">For known limitations using extensions, see the [extensions section](known_issues.md#extensions) in the known issues article.</span></span>

## <a name="extension-examples"></a><span data-ttu-id="2c324-239">Примеры расширений</span><span class="sxs-lookup"><span data-stu-id="2c324-239">Extension examples</span></span>

- [<span data-ttu-id="2c324-240">Добавление пользовательских данных в ресурсы user с помощью открытых расширений</span><span class="sxs-lookup"><span data-stu-id="2c324-240">Add custom data to users using open extensions</span></span>](extensibility_open_users.md)

- [<span data-ttu-id="2c324-241">Добавление пользовательских данных в группы с помощью расширений схемы</span><span class="sxs-lookup"><span data-stu-id="2c324-241">Add custom data to groups using schema extensions</span></span>](extensibility_schema_groups.md)

## <a name="see-also"></a><span data-ttu-id="2c324-242">См. также</span><span class="sxs-lookup"><span data-stu-id="2c324-242">See also</span></span>

- [<span data-ttu-id="2c324-243">Домены Office 365</span><span class="sxs-lookup"><span data-stu-id="2c324-243">Office 365 domains</span></span>](https://technet.microsoft.com/en-us/library/office-365-domains.aspx)

- [<span data-ttu-id="2c324-244">Добавление и подтверждение домена для клиента Office 365</span><span class="sxs-lookup"><span data-stu-id="2c324-244">Adding and verifying a domain for an Office 365 tenant</span></span>](http://office365support.ca/adding-and-verifying-a-domain-for-the-new-office-365/)

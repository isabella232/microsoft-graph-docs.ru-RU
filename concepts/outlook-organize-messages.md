# <a name="organize-outlook-messages"></a><span data-ttu-id="90268-101">Упорядочение сообщений Outlook</span><span class="sxs-lookup"><span data-stu-id="90268-101">Organize Outlook messages</span></span>

<span data-ttu-id="90268-102">В Outlook пользователи могут упорядочивать свои сообщения по собственному усмотрению. Можно оставить все сообщения в одной папке "Входящие" или упорядочить их в древовидной структуре вложенных папок в соответствии со своими потребностями.</span><span class="sxs-lookup"><span data-stu-id="90268-102">Outlook lets customers organize their messages the way they like it, be it leaving all messages in the same Inbox folder, or organizing messsages in a tree-like folder structure under the Inbox to fit their specific needs.</span></span> <span data-ttu-id="90268-103">Вы можете легко [фильтровать, искать и сортировать](query_parameters.md) сообщения во всем почтовом ящике пользователя или в определенных папках.</span><span class="sxs-lookup"><span data-stu-id="90268-103">You can conveniently [filter, search, or sort](query_parameters.md) messages in the user's entire mailbox or in specific folders.</span></span>

## <a name="accessing-mail-folders"></a><span data-ttu-id="90268-104">Доступ к почтовым папкам</span><span class="sxs-lookup"><span data-stu-id="90268-104">Accessing mail folders</span></span>

<span data-ttu-id="90268-105">Программно папки сообщений представляются ресурсом [mailFolder](../api-reference/v1.0/resources/mailfolder.md), а папка "Входящие" является одним из корневых элементов структуры папок.</span><span class="sxs-lookup"><span data-stu-id="90268-105">Programmatically, message folders are represented by the [mailFolder](../api-reference/v1.0/resources/mailfolder.md) resource, and the Inbox is one of the folders at the root of the folder structure.</span></span> <span data-ttu-id="90268-106">Сокращение `/users/{id}/mailfolders` представляет корневой каталог.</span><span class="sxs-lookup"><span data-stu-id="90268-106">The `/users/{id}/mailfolders` shortcut represents the root.</span></span> 

<span data-ttu-id="90268-107">Каждый объект **mailFolder** указывается по идентификатору папки и содержит записываемое свойство **displayName**.</span><span class="sxs-lookup"><span data-stu-id="90268-107">Each **mailFolder** is identified by its folder ID, and has a writable **displayName** property.</span></span> <span data-ttu-id="90268-108">По умолчанию Outlook создает для пользователей еще несколько папок.</span><span class="sxs-lookup"><span data-stu-id="90268-108">Outlook creates a few other folders for customers by default.</span></span> <span data-ttu-id="90268-109">Вы можете ссылаться на эти стандартные папки по их идентификаторам или известным именам: `ArchiveRoot`, `ConversationHistory`, `DeletedItems`, `Drafts`, `Inbox`, `JunkEmail`, `Outbox` и `SentItems`.</span><span class="sxs-lookup"><span data-stu-id="90268-109">You can reference these default folders by their folder IDs, or by their well-known names: `ArchiveRoot`, `ConversationHistory`, `DeletedItems`, `Drafts`, `Inbox`, `JunkEmail`, `Outbox`, and `SentItems`.</span></span> 

<span data-ttu-id="90268-110">Зная путь к нестандартной папке, вы можете получить доступ и к ней. Для этого используйте сокращение `/users/{id}/mailfolders`, чтобы перейти на корневой уровень и получить все папки верхнего уровня:</span><span class="sxs-lookup"><span data-stu-id="90268-110">For a custom, non-default folder, if you know its folder path, you can access the folder by first using the `/users/{id}/mailfolders` shortcut to get to the root level and get all the top level folders:</span></span>

```http
GET https://graph.microsoft.com/v1.0/users/{id}/mailFolders
```
<span data-ttu-id="90268-111">Затем укажите соответствующий идентификатор папки (`{folder_id}`) по мере перехода на каждый уровень дерева папок:</span><span class="sxs-lookup"><span data-stu-id="90268-111">Then, specify the appropriate folder ID (`{folder_id}`) as you navigate each level of the folder tree:</span></span>

```
GET https://graph.microsoft.com/v1.0/users/{id}/mailFolders/{folder_id}/childfolders
```
<span data-ttu-id="90268-112">Повторяйте, пока не достигнете нужной папки в дереве.</span><span class="sxs-lookup"><span data-stu-id="90268-112">Repeat until you finally get to the custom folder in the tree.</span></span>

## <a name="creating-and-organizing-the-folder-tree"></a><span data-ttu-id="90268-113">Создание и упорядочение дерева папок</span><span class="sxs-lookup"><span data-stu-id="90268-113">Creating and organizing the folder tree</span></span>

<span data-ttu-id="90268-114">Вы можете [создавать почтовые папки, вложенные в папку "Входящие"](../api-reference/v1.0/api/user_post_mailfolders.md), или [дочерние папки других папок](../api-reference/v1.0/api/mailfolder_post_childfolders.md).</span><span class="sxs-lookup"><span data-stu-id="90268-114">You can [create mail folders under the Inbox](../api-reference/v1.0/api/user_post_mailfolders.md), or as [child folders of other folders](../api-reference/v1.0/api/mailfolder_post_childfolders.md).</span></span> <span data-ttu-id="90268-115">При создании, [копировании](../api-reference/v1.0/api/mailfolder_copy.md) или [перемещении](../api-reference/v1.0/api/mailfolder_move.md) папки и ее содержимого Outlook обновляет доступные только для чтения свойства **parentFolderId** и **childFolderCount** соответствующих папок.</span><span class="sxs-lookup"><span data-stu-id="90268-115">When you create, [copy](../api-reference/v1.0/api/mailfolder_copy.md), or [move](../api-reference/v1.0/api/mailfolder_move.md) a folder and its contents, Outlook updates the read-only **parentFolderId** and **childFolderCount** properties of the involved folders.</span></span> <span data-ttu-id="90268-116">Если содержимое папки копируется или перемещается в другую папку, то по умолчанию также меняются идентификаторы отдельных записей содержимого.</span><span class="sxs-lookup"><span data-stu-id="90268-116">When the contents of a folder are copied or moved to another folder, by default, the individual entry IDs of the contents also change.</span></span>

<span data-ttu-id="90268-117">На уровне содержимого свойства **totalItemCount** и **unreadItemCount** сообщают вам общее количество элементов и число непрочитанных элементов в почтовой папке, соответственно.</span><span class="sxs-lookup"><span data-stu-id="90268-117">At the contents level, **totalItemCount** and **unreadItemCount** respectively tell you the number of items and number of unread items in a mail folder.</span></span>
<span data-ttu-id="90268-118">На уровне дочерних папок вы можете [получить список дочерних папок](../api-reference/v1.0/api/user_list_mailfolders.md) для папки "Входящие" или другой папки.</span><span class="sxs-lookup"><span data-stu-id="90268-118">At the child folders level, you can [list the child folders](../api-reference/v1.0/api/user_list_mailfolders.md) under the Inbox or any other folder.</span></span> <span data-ttu-id="90268-119">Свойство **childFolderCount** представляет количество непосредственных дочерних папок.</span><span class="sxs-lookup"><span data-stu-id="90268-119">The **childFolderCount** property represents the number of immediate child folders.</span></span>

<span data-ttu-id="90268-120">Помните, что почтовые папки Outlook могут содержать как сообщения, так и другие элементы, например события и контакты.</span><span class="sxs-lookup"><span data-stu-id="90268-120">Be aware that Outlook mail folders can contain messages and non-message items such as events and contacts.</span></span> <span data-ttu-id="90268-121">В общем случае папки Outlook могут содержать разнородные элементы.</span><span class="sxs-lookup"><span data-stu-id="90268-121">In general, Outlook folders can contain heterogeneous items.</span></span>

## <a name="using-rules-to-automate-copying-or-moving-messages"></a><span data-ttu-id="90268-122">Использование правил для автоматизации копирования или перемещения сообщений</span><span class="sxs-lookup"><span data-stu-id="90268-122">Using rules to automate copying or moving messages</span></span>

<!-- Change links for rules API to v1 once it GAs in Feb. -->

<span data-ttu-id="90268-123">В Outlook пользователи могут настраивать правила для автоматизации определенных действий с входящими сообщениями при соблюдении некоторых предварительно заданных условий.</span><span class="sxs-lookup"><span data-stu-id="90268-123">Outlook lets customers set up rules to automate specific actions on incoming messages when some pre-determined conditions are met.</span></span> <span data-ttu-id="90268-124">Вы можете [создать правило](../api-reference/beta/api/mailfolder_post_messagerules.md) для папки "Входящие" в виде объекта [messageRule](../api-reference/beta/resources/messagerule.md), чтобы сообщение копировалось или перемещалось в определенную папку при соблюдении заданных условий.</span><span class="sxs-lookup"><span data-stu-id="90268-124">You can [create a rule](../api-reference/beta/api/mailfolder_post_messagerules.md) for the Inbox as a [messageRule](../api-reference/beta/resources/messagerule.md) to copy or move a message to a specific folder upon certain conditions.</span></span> <span data-ttu-id="90268-125">Условия — это объекты [messageRulePredicate](../api-reference/beta/resources/messagerulepredicates.md).</span><span class="sxs-lookup"><span data-stu-id="90268-125">Conditions are [messageRulePredicates](../api-reference/beta/resources/messagerulepredicates.md).</span></span> <span data-ttu-id="90268-126">Они могут включать тему или текст сообщения, определенные электронные адреса отправителей, отметку о важности и т. д.</span><span class="sxs-lookup"><span data-stu-id="90268-126">They can include the message subject or body containing certain text,the message sent from certain email addresses, or the message marked important, and so on.</span></span> 

## <a name="directing-only-the-messages-you-care-for-to-the-focused-inbox"></a><span data-ttu-id="90268-127">Отправка только нужных сообщений на сортировку почты</span><span class="sxs-lookup"><span data-stu-id="90268-127">Directing only the messages you care for to the Focused Inbox</span></span> 

<span data-ttu-id="90268-128">С помощью сортировки почты клиенты могут научить Outlook показывать входящие сообщения от нужных отправителей на вкладке **Отсортированные**, а остальные сообщения — на вкладке **Другие**. Изначально система классификации Outlook упорядочивает сообщения в папке "Входящие" стандартным способом.</span><span class="sxs-lookup"><span data-stu-id="90268-128">Focused Inbox lets customers train Outlook to show only the incoming messages from senders you care for in the **Focused** tab, and the rest in the **Other** tab. Initially, Outlook's classification system organizes Inbox messages in a default way.</span></span> <span data-ttu-id="90268-129">По мере использования системы вы можете исправлять ее поведение и обучать ее через пользовательский интерфейс или программным путем.</span><span class="sxs-lookup"><span data-stu-id="90268-129">Over time, you can correct and train the system through the user interface or programmatically.</span></span> <span data-ttu-id="90268-130">Чем больше вы используете сортировку почты, тем лучше система классификации сможет определять, какие входящие сообщения вы хотите видеть на вкладке **Отсортированные**.</span><span class="sxs-lookup"><span data-stu-id="90268-130">The more you use the Focused Inbox, the better the classification system can infer which incoming message you want to see in the **Focused** tab.</span></span>

<span data-ttu-id="90268-131">Вы можете обновить свойство **inferenceClassification** объекта [message](../api-reference/v1.0/resources/message.md) программным путем, чтобы указать, на какой вкладке должно отображаться сообщение: **Отсортированные** или **Другие**. Это свойство назначается отдельно для каждого сообщения.</span><span class="sxs-lookup"><span data-stu-id="90268-131">Programmatically, you can update the **inferenceClassification** property of a [message](../api-reference/v1.0/resources/message.md) to indicate whether you want to see the message in the **Focused** or **Other** tab. This is a one-off designation for a specific message.</span></span> <span data-ttu-id="90268-132">С другой стороны, если сообщения от определенного отправителя всегда должны отображаться на вкладке **Отсортированные** или **Другие**, то вы можете [задать инструкцию](../api-reference/v1.0/api/inferenceclassification_post_overrides.md) для Outlook.</span><span class="sxs-lookup"><span data-stu-id="90268-132">If, on the other hand, you want to see messages from a specific sender always in the **Focused** tab or **Other** tab, you can [set an instruction](../api-reference/v1.0/api/inferenceclassification_post_overrides.md) for Outlook.</span></span> <span data-ttu-id="90268-133">Каждая инструкция представляет собой экземпляр объекта [inferenceClassificationOverride](../api-reference/v1.0/resources/inferenceclassificationoverride.md), в котором указаны имя отправителя и вкладка для всех сообщений от этого отправителя: `focused` или `other`.</span><span class="sxs-lookup"><span data-stu-id="90268-133">Each instruction is an [inferenceClassificationOverride](../api-reference/v1.0/resources/inferenceclassificationoverride.md) instance specifying the sender's name and your designation for messages from that sender to be always `focused` or `other`.</span></span> <span data-ttu-id="90268-134">Инструкции каждого пользователя для сортировки почты хранятся в виде коллекции экземпляров [inferenceClassificationOverride](../api-reference/v1.0/resources/inferenceclassificationoverride.md) в объекте [user](../api-reference/v1.0/resources/user.md).</span><span class="sxs-lookup"><span data-stu-id="90268-134">Each user's instructions for the user's Focused Inbox are stored as a collection of [inferenceClassificationOverride](../api-reference/v1.0/resources/inferenceclassificationoverride.md) instances on the [user](../api-reference/v1.0/resources/user.md) object.</span></span>

## <a name="keeping-messages-and-mail-folders-up-to-date-in-apps"></a><span data-ttu-id="90268-135">Обновление сообщений и почтовых папок в приложениях</span><span class="sxs-lookup"><span data-stu-id="90268-135">Keeping messages and mail folders up to date in apps</span></span>

<span data-ttu-id="90268-136">Многие приложения должны синхронизироваться и обновлять почтовые данные пользователя в его локальном хранилище.</span><span class="sxs-lookup"><span data-stu-id="90268-136">Apps often have to synchronize and keep a user's mail data up-to-date in the app local store.</span></span> <span data-ttu-id="90268-137">Microsoft Graph позволяет подписаться на уведомления об изменениях данных и запрашивать фактические изменения, как только они происходят.</span><span class="sxs-lookup"><span data-stu-id="90268-137">Microsoft Graph lets you subscribe to change notifications to get notified when data changes, and query for actual changes as soon as they happen.</span></span>

<span data-ttu-id="90268-138">Уведомления асинхронно доставляются через [веб-перехватчики](../api-reference/v1.0/resources/webhooks.md) при внесении изменений, избавляя приложение от необходимости частых опросов.</span><span class="sxs-lookup"><span data-stu-id="90268-138">Notifications are delivered via [webhooks](../api-reference/v1.0/resources/webhooks.md) asynchronously when the changes happen, saving apps the overhead to poll frequently.</span></span> <span data-ttu-id="90268-139">Вы можете [подписаться на уведомления](../api-reference/v1.0/api/subscription_post_subscriptions.md) о добавлении, обновлении или удалении почтовых данных пользователя.</span><span class="sxs-lookup"><span data-stu-id="90268-139">You can [subscribe to change notifications](../api-reference/v1.0/api/subscription_post_subscriptions.md) about additions, updates, or deletions to a user's mail data.</span></span> <span data-ttu-id="90268-140">Например, вы можете создать подписку на сообщения в определенной папке (т. е. `/me/mailFolders('{folderId'}')`) или на корневом уровне (т. е. `/me/messages`).</span><span class="sxs-lookup"><span data-stu-id="90268-140">For example, you can create a subscription to messages in a specific folder (i.e., `/me/mailFolders('{folderId'}')`), or at the root level (i.e., `/me/messages`).</span></span> <span data-ttu-id="90268-141">В подписке указывается адрес **notificationUrl**, на который Microsoft Graph отправляет приложению уведомления об изменениях указанных типов.</span><span class="sxs-lookup"><span data-stu-id="90268-141">The subscription specifies a **notificationUrl** where Microsoft Graph notifies the app when the requested types of changes happen.</span></span>

<span data-ttu-id="90268-142">Для первой синхронизации почтового ящика пользователя сначала отправьте [разностный запрос для почтовых папок, начиная с корневого уровня](../api-reference/v1.0/api/mailfolder_delta.md), чтобы синхронизировать все почтовые папки, а затем — [разностный запрос для сообщений в каждой папке](../api-reference/v1.0/api/message_delta.md), чтобы синхронизировать отдельные сообщения.</span><span class="sxs-lookup"><span data-stu-id="90268-142">To initially synchronize a user's mailbox, first do [delta query for mail folders starting at the root level](../api-reference/v1.0/api/mailfolder_delta.md) to synchronize all mail folders, followed by [delta query for messages in each folder](../api-reference/v1.0/api/message_delta.md) to synchronize individual messages.</span></span>

<span data-ttu-id="90268-143">Чтобы найти именно те объекты, которые были изменены, не считывая ресурс полностью при каждом уведомлении, вы можете использовать [разностный запрос](delta_query_overview.md) для отслеживания интересующих вас изменений и синхронизировать с ними ваше локальное хранилище.</span><span class="sxs-lookup"><span data-stu-id="90268-143">To find the exact entities that have been changed without reading the entire resource with every notification, you can use [delta query](delta_query_overview.md) to track those changes that matter to you, and synchronize your local store with those changes.</span></span> <span data-ttu-id="90268-144">Вы можете [отслеживать изменения сообщений в определенной папке](delta_query_messages.md).</span><span class="sxs-lookup"><span data-stu-id="90268-144">You can [track changes to messages in a specific folder](delta_query_messages.md).</span></span> <span data-ttu-id="90268-145">Вы также можете отслеживать изменения почтовых папок на корневом уровне (т. е. `/me/mailfolders`).</span><span class="sxs-lookup"><span data-stu-id="90268-145">You can also track changes to mail folders at the root level (i.e., `/me/mailfolders`).</span></span> 


## <a name="next-steps"></a><span data-ttu-id="90268-146">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="90268-146">Next steps</span></span>

<span data-ttu-id="90268-147">Узнайте больше о следующих темах:</span><span class="sxs-lookup"><span data-stu-id="90268-147">Find out more about:</span></span>

- [<span data-ttu-id="90268-148">Зачем выполнять интеграцию с почтой Outlook?</span><span class="sxs-lookup"><span data-stu-id="90268-148">Why integrate with Outlook mail</span></span>](outlook-mail-concept-overview.md)
- <span data-ttu-id="90268-149">[Использование API почты](../api-reference/v1.0/resources/mail_api_overview.md) и [варианты использования](../api-reference/v1.0/resources/mail_api_overview.md#common-use-cases) в Microsoft Graph 1.0.</span><span class="sxs-lookup"><span data-stu-id="90268-149">[Using the mail API](../api-reference/v1.0/resources/mail_api_overview.md) and its [use cases](../api-reference/v1.0/resources/mail_api_overview.md#common-use-cases) in Microsoft Graph v1.0.</span></span>

---
title: Выбор и фильтрация пользователей, поддерживаемые подключением к данным Microsoft Graph
description: Описано, как использовать подключение к данным Microsoft Graph, чтобы выбрать пользователей, для которых нужно извлечь данные, и отфильтровать возвращаемые данные.
author: tlenig
localization_priority: Priority
ms.prod: data-connect
ms.openlocfilehash: 1d558c441a626a312d0097d143d194255aaed769
ms.sourcegitcommit: b8d01acfc1cb7610a0e1f5c18065da415bae0777
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "33629840"
---
# <a name="user-selection-and-filtering-microsoft-graph-data-connect-supports"></a><span data-ttu-id="bad6c-103">Выбор и фильтрация пользователей, поддерживаемые подключением к данным Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="bad6c-103">User selection and filtering Microsoft Graph data connect supports</span></span>

<span data-ttu-id="bad6c-104">Подключение к данным Microsoft Graph можно использовать, чтобы выбрать пользователей, для которых нужно извлечь данные, и включить фильтры для ограничения возвращаемых данных.</span><span class="sxs-lookup"><span data-stu-id="bad6c-104">You can use Microsoft Graph data connect to select the users that you want to extract data for, and to include filters to limit the data returned.</span></span> <span data-ttu-id="bad6c-105">В этой статье описаны параметры выбора пользователей, предоставляемые подключением к данным, а также поддерживаемые фильтры.</span><span class="sxs-lookup"><span data-stu-id="bad6c-105">This article describes the user selection options that data connect provides and the filtering that it supports.</span></span> 

## <a name="user-selection"></a><span data-ttu-id="bad6c-106">Выбор пользователей</span><span class="sxs-lookup"><span data-stu-id="bad6c-106">User selection</span></span> 

<span data-ttu-id="bad6c-107">Вы можете запустить конвейеры для набора пользователей.</span><span class="sxs-lookup"><span data-stu-id="bad6c-107">You can run pipelines on a set of users.</span></span> <span data-ttu-id="bad6c-108">Параметры выбора пользователей:</span><span class="sxs-lookup"><span data-stu-id="bad6c-108">The following are the options for user selection:</span></span>
- <span data-ttu-id="bad6c-109">все пользователи в организации;</span><span class="sxs-lookup"><span data-stu-id="bad6c-109">All users within the organization</span></span>
- <span data-ttu-id="bad6c-110">до 10 групп пользователей в организации;</span><span class="sxs-lookup"><span data-stu-id="bad6c-110">Up to 10 groups of users within the organization to run on</span></span> 
- <span data-ttu-id="bad6c-111">набор пользователей на основе предиката, состоящего из свойств пользователя Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="bad6c-111">A set of users based on a predicate consisting of Azure Active Directory user properties</span></span>

<span data-ttu-id="bad6c-112">Укажите выбор пользователя в SourceDataSet действия копирования фабрики данных Azure.</span><span class="sxs-lookup"><span data-stu-id="bad6c-112">Specify your user selection in the SourceDataSet of the Azure Data Factory copy activity.</span></span> <span data-ttu-id="bad6c-113">Чтобы выполнить для списка групп, добавьте новое поле **allowedGroups** в разделе **typeProperties** и укажите в нем список параметров **Object Id** не более 10 групп, разделенных запятыми.</span><span class="sxs-lookup"><span data-stu-id="bad6c-113">To run on a list of groups, add a new field **allowedGroups** under **typeProperties** and set this to a list of up to 10 groups' **Object Ids** separated by commas.</span></span> <span data-ttu-id="bad6c-114">Если группы по умолчанию не указаны, данные извлекаются для всей организации.</span><span class="sxs-lookup"><span data-stu-id="bad6c-114">If no groups are specified by default, data will be extracted for the entire organization.</span></span> 

<span data-ttu-id="bad6c-115">Чтобы указать предикат для выполнения во всем клиенте, добавьте новое поле **userScopeFilterUri** в разделе **typeProperties** и присвойте ему значение предиката.</span><span class="sxs-lookup"><span data-stu-id="bad6c-115">To specify a predicate to run on the entire tenant, add a new field **userScopeFilterUri** under **typeProperties** and set this to the predicate.</span></span> <span data-ttu-id="bad6c-116">Формат предиката должен совпадать с форматом запроса API Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="bad6c-116">The predicate format should match the query format of Microsoft Graph APIs.</span></span> <span data-ttu-id="bad6c-117">Например, если нужно ограничить выбор пользователями, работающими в финансовом отделе, можно использовать `https://graph.microsoft.com/v1.0/users?$filter=Department eq 'Finance'`.</span><span class="sxs-lookup"><span data-stu-id="bad6c-117">For example, if you want to limit the selection to users who work in the Finance department, you can use `https://graph.microsoft.com/v1.0/users?$filter=Department eq 'Finance'`.</span></span>

<span data-ttu-id="bad6c-118">Запрос возвращает только пользователей из организации Office 365, в которой выполняется запрос.</span><span class="sxs-lookup"><span data-stu-id="bad6c-118">Your query will only return users within the Office 365 organization that you're querying.</span></span> <span data-ttu-id="bad6c-119">Гостевые пользователи и почтовые ящики, не относящиеся к пользователям, не возвращаются.</span><span class="sxs-lookup"><span data-stu-id="bad6c-119">Guest users and non-user mailboxes will not be returned.</span></span>

## <a name="filtering"></a><span data-ttu-id="bad6c-120">Фильтрация</span><span class="sxs-lookup"><span data-stu-id="bad6c-120">Filtering</span></span> 

<span data-ttu-id="bad6c-121">Вы можете ограничить результаты, извлекаемые для запроса, с помощью свойств даты и времени.</span><span class="sxs-lookup"><span data-stu-id="bad6c-121">You can limit the results extracted for your query using DateTime properties.</span></span> <span data-ttu-id="bad6c-122">В зависимости от типа запрашиваемых данных может потребоваться фильтр даты и времени.</span><span class="sxs-lookup"><span data-stu-id="bad6c-122">Depending on the type of data requested, a DateTime filter might be required.</span></span> <span data-ttu-id="bad6c-123">Фильтр даты и времени предоставляется с помощью свойств в SourceDataSet действия копирования фабрики данных Azure.</span><span class="sxs-lookup"><span data-stu-id="bad6c-123">The DateTime filter is provided using properties in the SourceDataSet of the Azure Data Factory copy activity.</span></span> <span data-ttu-id="bad6c-124">Чтобы указать фильтр даты и времени, добавьте новое поле **dateFilterColumn** в разделе **typeProperties** и присвойте ему значение одного из свойств, поддерживающих фильтрацию, из таблицы ниже.</span><span class="sxs-lookup"><span data-stu-id="bad6c-124">To specify a DateTime filter, add a new field **dateFilterColumn** under **typeProperties** and set this to one of the properties that support filtering in the following table.</span></span> <span data-ttu-id="bad6c-125">Затем добавьте **startTime** и **endTime**, представляющие значения даты и времени, по которым будет фильтроваться свойство.</span><span class="sxs-lookup"><span data-stu-id="bad6c-125">Next, add a **startTime** and **endTime** that represent the DateTime values that the property will be filtered upon.</span></span> 

<span data-ttu-id="bad6c-126">Следующие наборы данных требуют предоставления фильтра в одном из соответствующих свойств даты и времени.</span><span class="sxs-lookup"><span data-stu-id="bad6c-126">The following datasets require a filter to be provided on one of the corresponding DateTime properties.</span></span>

| <span data-ttu-id="bad6c-127">Имя набора данных</span><span class="sxs-lookup"><span data-stu-id="bad6c-127">Dataset name</span></span>                                                   | <span data-ttu-id="bad6c-128">Свойства, поддерживающие фильтрацию</span><span class="sxs-lookup"><span data-stu-id="bad6c-128">Properties that support filtering</span></span>                                           | 
|----------------------------------------------------------------|-----------------------------------------------------------------------------| 
| <span data-ttu-id="bad6c-129">BasicDataSet_v0.Event_v0</span><span class="sxs-lookup"><span data-stu-id="bad6c-129">BasicDataSet_v0.Event_v0</span></span><br><span data-ttu-id="bad6c-130">BasicDataSet_v0.Event_v1</span><span class="sxs-lookup"><span data-stu-id="bad6c-130">BasicDataSet_v0.Event_v1</span></span>           | <span data-ttu-id="bad6c-131">CreatedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-131">createdDateTime</span></span><br><span data-ttu-id="bad6c-132">LastModifiedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-132">lastModifiedDateTime</span></span>                                     | 
| <span data-ttu-id="bad6c-133">BasicDataSet_v0.Message_v0</span><span class="sxs-lookup"><span data-stu-id="bad6c-133">BasicDataSet_v0.Message_v0</span></span><br><span data-ttu-id="bad6c-134">BasicDataSet_v0.Message_v1</span><span class="sxs-lookup"><span data-stu-id="bad6c-134">BasicDataSet_v0.Message_v1</span></span>       | <span data-ttu-id="bad6c-135">CreatedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-135">createdDateTime</span></span><br><span data-ttu-id="bad6c-136">LastModifiedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-136">lastModifiedDateTime</span></span><br><span data-ttu-id="bad6c-137">ReceivedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-137">receivedDateTime</span></span><br><span data-ttu-id="bad6c-138">SentDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-138">sentDateTime</span></span> | 
| <span data-ttu-id="bad6c-139">BasicDataSet_v0.SentItem_v0</span><span class="sxs-lookup"><span data-stu-id="bad6c-139">BasicDataSet_v0.SentItem_v0</span></span><br><span data-ttu-id="bad6c-140">BasicDataSet_v0.SentItem_v1</span><span class="sxs-lookup"><span data-stu-id="bad6c-140">BasicDataSet_v0.SentItem_v1</span></span>     | <span data-ttu-id="bad6c-141">CreatedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-141">createdDateTime</span></span><br><span data-ttu-id="bad6c-142">LastModifiedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-142">lastModifiedDateTime</span></span><br><span data-ttu-id="bad6c-143">ReceivedDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-143">receivedDateTime</span></span><br><span data-ttu-id="bad6c-144">SentDateTime</span><span class="sxs-lookup"><span data-stu-id="bad6c-144">sentDateTime</span></span> |

><span data-ttu-id="bad6c-145">**Примечание.** Конвейеры, запрашивающие свойство BasicDataSet_v0.CalendarView_v0, также требуют фильтр даты и времени, но в SourceDataSet не указывается поле **dateFilterColumn**.</span><span class="sxs-lookup"><span data-stu-id="bad6c-145">**Note** Pipelines requesting BasicDataSet_v0.CalendarView_v0 also require a DateTime filter, but no **dateFilterColumn** is specified in the SourceDataSet.</span></span> <span data-ttu-id="bad6c-146">Однако свойства **startTime** и **endTime** являются обязательными, и предоставляются только события, начинающиеся после момента **startTime** и завершающиеся до момента **endTime**.</span><span class="sxs-lookup"><span data-stu-id="bad6c-146">However, a **startTime** and **endTime** are required and only events that begin after the **startTime** and finish before the **endTime** are provided.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bad6c-147">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="bad6c-147">Next Steps</span></span> 

<span data-ttu-id="bad6c-148">Дополнительные сведения об изменении пользователя, выбранного для извлечения, и фильтрации в конвейерах подключения к данным см. в [документации по соединителю Office 365 фабрики данных Azure](https://docs.microsoft.com/ru-RU/azure/data-factory/connector-office-365).</span><span class="sxs-lookup"><span data-stu-id="bad6c-148">For more information about how to modify the user selected for extractoin and filtering in data connect pipelines, see the [Azure Data Factory Office 365 connector documentation](https://docs.microsoft.com/ru-RU/azure/data-factory/connector-office-365).</span></span>  

  

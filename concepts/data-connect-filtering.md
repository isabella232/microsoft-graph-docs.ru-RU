---
title: Выбор и фильтрация пользователей, поддерживаемые подключением к данным Microsoft Graph
description: Описано, как использовать подключение к данным Microsoft Graph, чтобы выбрать пользователей, для которых нужно извлечь данные, и отфильтровать возвращаемые данные.
author: tlenig
localization_priority: Priority
ms.prod: data-connect
ms.openlocfilehash: 1d558c441a626a312d0097d143d194255aaed769
ms.sourcegitcommit: b8d01acfc1cb7610a0e1f5c18065da415bae0777
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/06/2019
ms.locfileid: "33629840"
---
# <a name="user-selection-and-filtering-microsoft-graph-data-connect-supports"></a>Выбор и фильтрация пользователей, поддерживаемые подключением к данным Microsoft Graph

Подключение к данным Microsoft Graph можно использовать, чтобы выбрать пользователей, для которых нужно извлечь данные, и включить фильтры для ограничения возвращаемых данных. В этой статье описаны параметры выбора пользователей, предоставляемые подключением к данным, а также поддерживаемые фильтры. 

## <a name="user-selection"></a>Выбор пользователей 

Вы можете запустить конвейеры для набора пользователей. Параметры выбора пользователей:
- все пользователи в организации;
- до 10 групп пользователей в организации; 
- набор пользователей на основе предиката, состоящего из свойств пользователя Azure Active Directory

Укажите выбор пользователя в SourceDataSet действия копирования фабрики данных Azure. Чтобы выполнить для списка групп, добавьте новое поле **allowedGroups** в разделе **typeProperties** и укажите в нем список параметров **Object Id** не более 10 групп, разделенных запятыми. Если группы по умолчанию не указаны, данные извлекаются для всей организации. 

Чтобы указать предикат для выполнения во всем клиенте, добавьте новое поле **userScopeFilterUri** в разделе **typeProperties** и присвойте ему значение предиката. Формат предиката должен совпадать с форматом запроса API Microsoft Graph. Например, если нужно ограничить выбор пользователями, работающими в финансовом отделе, можно использовать `https://graph.microsoft.com/v1.0/users?$filter=Department eq 'Finance'`.

Запрос возвращает только пользователей из организации Office 365, в которой выполняется запрос. Гостевые пользователи и почтовые ящики, не относящиеся к пользователям, не возвращаются.

## <a name="filtering"></a>Фильтрация 

Вы можете ограничить результаты, извлекаемые для запроса, с помощью свойств даты и времени. В зависимости от типа запрашиваемых данных может потребоваться фильтр даты и времени. Фильтр даты и времени предоставляется с помощью свойств в SourceDataSet действия копирования фабрики данных Azure. Чтобы указать фильтр даты и времени, добавьте новое поле **dateFilterColumn** в разделе **typeProperties** и присвойте ему значение одного из свойств, поддерживающих фильтрацию, из таблицы ниже. Затем добавьте **startTime** и **endTime**, представляющие значения даты и времени, по которым будет фильтроваться свойство. 

Следующие наборы данных требуют предоставления фильтра в одном из соответствующих свойств даты и времени.

| Имя набора данных                                                   | Свойства, поддерживающие фильтрацию                                           | 
|----------------------------------------------------------------|-----------------------------------------------------------------------------| 
| BasicDataSet_v0.Event_v0<br>BasicDataSet_v0.Event_v1           | CreatedDateTime<br>LastModifiedDateTime                                     | 
| BasicDataSet_v0.Message_v0<br>BasicDataSet_v0.Message_v1       | CreatedDateTime<br>LastModifiedDateTime<br>ReceivedDateTime<br>SentDateTime | 
| BasicDataSet_v0.SentItem_v0<br>BasicDataSet_v0.SentItem_v1     | CreatedDateTime<br>LastModifiedDateTime<br>ReceivedDateTime<br>SentDateTime |

>**Примечание.** Конвейеры, запрашивающие свойство BasicDataSet_v0.CalendarView_v0, также требуют фильтр даты и времени, но в SourceDataSet не указывается поле **dateFilterColumn**. Однако свойства **startTime** и **endTime** являются обязательными, и предоставляются только события, начинающиеся после момента **startTime** и завершающиеся до момента **endTime**.

## <a name="next-steps"></a>Дальнейшие действия 

Дополнительные сведения об изменении пользователя, выбранного для извлечения, и фильтрации в конвейерах подключения к данным см. в [документации по соединителю Office 365 фабрики данных Azure](https://docs.microsoft.com/ru-RU/azure/data-factory/connector-office-365).  

  

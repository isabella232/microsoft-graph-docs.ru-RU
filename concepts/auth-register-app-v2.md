---
title: Регистрация приложения с помощью конечной точки Azure AD версии 2.0
description: Приложение должно быть зарегистрировано в Azure AD. При регистрации приложения создается уникальный идентификатор и другие значения, используемые приложением для проверки подлинности в Azure AD и получения маркеров.
author: jackson-woods
localization_priority: Priority
ms.prod: microsoft-identity-platform
ms.openlocfilehash: d62fb12c094307fcd09f3e4600046b818ec4bbaa
ms.sourcegitcommit: 255061099661a38278140675db4cbadbdca9be7c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/07/2019
ms.locfileid: "29760960"
---
# <a name="register-your-app-with-the-azure-ad-v20-endpoint"></a><span data-ttu-id="64f98-104">Регистрация приложения с помощью конечной точки Azure AD версии 2.0</span><span class="sxs-lookup"><span data-stu-id="64f98-104">Register your app with the Azure AD v2.0 endpoint</span></span>

<span data-ttu-id="64f98-p102">Приложение должно быть зарегистрировано в Azure AD. При регистрации приложения создается уникальный идентификатор и другие значения, используемые приложением для проверки подлинности в Azure AD и получения маркеров. Для конечной точки Azure AD версии 2.0 приложение регистрируется на [портале Майкрософт для регистрации приложений](https://apps.dev.microsoft.com). Для регистрации приложения можно использовать либо учетную запись Майкрософт, либо рабочую или учебную учетную запись. В зависимости от типа создаваемого приложения, во время регистрации вам может потребоваться скопировать одно или несколько свойств, чтобы использовать их при настройке проверки подлинности и авторизации для приложения.</span><span class="sxs-lookup"><span data-stu-id="64f98-p102">Your app must be registered with Azure AD. Registering your app establishes a unique application ID and other values that your app uses to authenticate with Azure AD and get tokens. For the Azure AD v2.0 endpoint, you register your app with the [Microsoft App Registration Portal](https://apps.dev.microsoft.com). You can use either a Microsoft account or a work or school account to register your app. Depending on the type of app you are developing, you will need to copy one or more properties during registration to use when you configure authentication and authorization for your app.</span></span> 


> <span data-ttu-id="64f98-p103">**Примечание.** В этой статье основное внимание уделяется регистрации приложений с помощью конечной точки Azure AD версии 2.0. Сведения о регистрации приложения с помощью конечной точки Azure AD см. в разделе [Рекомендации, связанные с конечной точкой Azure AD](#azure-ad-endpoint-considerations) далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="64f98-p103">**Note:** This article primarily covers registering apps with the Azure AD v2.0 endpoint. For information about registering your app with the Azure AD endpoint, see [Azure AD endpoint considerations](#azure-ad-endpoint-considerations) below.</span></span>
> 
> <span data-ttu-id="64f98-112">Кроме того, помните, что если ранее вы регистрировали приложения на портале Microsoft Azure, то они не будут отображаться на портале регистрации приложений.</span><span class="sxs-lookup"><span data-stu-id="64f98-112">Also, be aware that if you've previously registered apps in the Microsoft Azure portal, those apps will not be listed in the App Registration Portal.</span></span> <span data-ttu-id="64f98-113">Управляйте этими приложениями на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="64f98-113">Manage those apps in the Azure portal.</span></span> 


<span data-ttu-id="64f98-p105">На приведенном ниже снимке экрана показан пример регистрации веб-приложения, настроенной с использованием пароля и неявного потока. ![Регистрация веб-приложения с использованием пароля и неявного потока предоставления.](./images/v2-web-registration.png)</span><span class="sxs-lookup"><span data-stu-id="64f98-p105">The following screenshot shows an example web app registration that has been configured with a password and implicit flow. ![Web app registration with password and implicit grant.](./images/v2-web-registration.png)</span></span>

<span data-ttu-id="64f98-116">Чтобы зарегистрировать приложение, выполните указанные ниже действия. Обязательно скопируйте указанные значения — они потребуются при настройке авторизации для приложения.</span><span class="sxs-lookup"><span data-stu-id="64f98-116">To register your app, follow these steps; be sure to copy the indicated values to use when configuring authorization for your app:</span></span>

1. <span data-ttu-id="64f98-117">Войдите на [портал Майкрософт для регистрации приложений](https://apps.dev.microsoft.com/).</span><span class="sxs-lookup"><span data-stu-id="64f98-117">Sign into the [Microsoft App Registration Portal](https://apps.dev.microsoft.com/).</span></span>
   
    <span data-ttu-id="64f98-118">Вы можете войти с помощью учетной записи Майкрософт либо рабочей или учебной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="64f98-118">You can sign in with either a Microsoft account or a work or school account.</span></span> 

2. <span data-ttu-id="64f98-119">Нажмите кнопку **Добавить приложение**.</span><span class="sxs-lookup"><span data-stu-id="64f98-119">Choose **Add an app**.</span></span>
    > <span data-ttu-id="64f98-120">Примечание. Если вход выполнен с помощью рабочей или учебной учетной записи, нажмите кнопку **Добавить приложение** для **конвергированных приложений**.</span><span class="sxs-lookup"><span data-stu-id="64f98-120">Note: If you signed in with a work or school account, select the **Add an app** button for **Converged applications**.</span></span> 

3. <span data-ttu-id="64f98-121">Введите имя приложения и нажмите кнопку **Создать приложение**.</span><span class="sxs-lookup"><span data-stu-id="64f98-121">Enter a name for the app and choose **Create application**.</span></span>

    <span data-ttu-id="64f98-122">Откроется страница регистрации со свойствами приложения.</span><span class="sxs-lookup"><span data-stu-id="64f98-122">The registration page displays, listing the properties of your app.</span></span>

4. <span data-ttu-id="64f98-p106">Скопируйте идентификатор приложения. Это уникальный идентификатор приложения.</span><span class="sxs-lookup"><span data-stu-id="64f98-p106">Copy the application ID. This is the unique identifier for your app.</span></span>

    <span data-ttu-id="64f98-125">Идентификатор приложения используется для его настройки.</span><span class="sxs-lookup"><span data-stu-id="64f98-125">You'll use the application ID to configure the app.</span></span>

5. <span data-ttu-id="64f98-126">В разделе **Платформы** нажмите кнопку **Добавление платформы** и выберите подходящую платформу для вашего приложения:</span><span class="sxs-lookup"><span data-stu-id="64f98-126">Under **Platforms**, choose **Add Platform**, and select the appropriate platform for your app:</span></span>
    
    <span data-ttu-id="64f98-127">**Для нативных и мобильных приложений**:</span><span class="sxs-lookup"><span data-stu-id="64f98-127">**For native or mobile apps**:</span></span>

    1. <span data-ttu-id="64f98-128">Выберите **Собственное приложение**.</span><span class="sxs-lookup"><span data-stu-id="64f98-128">Select **Native Application**.</span></span>

    2. <span data-ttu-id="64f98-p107">Скопируйте значение **встроенного URI перенаправления**. Оно потребуется вам для настройки приложения.</span><span class="sxs-lookup"><span data-stu-id="64f98-p107">Copy the **Built-in redirect URI** value. You'll need this to configure your app.</span></span>

        <span data-ttu-id="64f98-131">URI перенаправления — это уникальный URI, предоставляемый приложению, чтобы сообщения, отправляемые на этот URI, отправлялись только этому приложению.</span><span class="sxs-lookup"><span data-stu-id="64f98-131">The redirect URI is a unique URI provided for your application to ensure that messages sent to that URI are only sent to that application.</span></span> 

    <span data-ttu-id="64f98-132">**Для веб-приложений**:</span><span class="sxs-lookup"><span data-stu-id="64f98-132">**For web apps**:</span></span>

    1. <span data-ttu-id="64f98-133">Выберите платформу **Веб**.</span><span class="sxs-lookup"><span data-stu-id="64f98-133">Select **Web**.</span></span>

    2. <span data-ttu-id="64f98-134">В зависимости от используемого потока аутентификации, возможно, потребуется установить флажок **Разрешить неявный поток**.</span><span class="sxs-lookup"><span data-stu-id="64f98-134">Depending on the type of authentication flow you're using, you may have to make sure the **Allow Implicit Flow** check box is selected.</span></span> 
        
        <span data-ttu-id="64f98-p108">Параметр **Разрешить неявный поток** позволяет использовать неявный поток и гибридный поток OpenID Connect. Гибридный поток позволяет приложению получить данные для входа (маркер идентификатора) и артефакты (в данном случае — код авторизации), с помощью которых оно может получить маркер доступа. Гибридный поток используется по умолчанию в ПО промежуточного слоя OWIN OpenID Connect. Неявный поток позволяет одностраничным приложениям (SPA) получать данные для входа и маркер доступа.</span><span class="sxs-lookup"><span data-stu-id="64f98-p108">The **Allow Implicit Flow** option enables the OpenID Connect hybrid and implicit flows. The hybrid flow enables the app to receive both sign-in info (the id token) and artifacts (in this case, an authorization code) that the app uses to obtain an access token. The hybrid flow is the default flow used by the OWIN OpenID Connect middleware. For single page apps (SPA), the implicit flow enables the app to receive sign-in info and the access token.</span></span> 

    3. <span data-ttu-id="64f98-139">Укажите URL-адрес перенаправления.</span><span class="sxs-lookup"><span data-stu-id="64f98-139">Specify a Redirect URL.</span></span>
        
        <span data-ttu-id="64f98-140">URL-адрес перенаправления — это расположение в приложении, которое конечная точка Azure AD версии 2.0 вызывает после обработки запроса на проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="64f98-140">The redirect URL is the location in your app that the Azure AD v2.0 endpoint calls when it has processed the authentication request.</span></span>

    4. <span data-ttu-id="64f98-p109">В разделе **Секреты приложения** нажмите кнопку **Создать новый пароль**. Скопируйте секрет приложения из диалогового окна **Новый пароль создан**.</span><span class="sxs-lookup"><span data-stu-id="64f98-p109">Under **Application Secrets**, choose **Generate New Password**. Copy the app secret from the **New password generated** dialog box.</span></span>
        > <span data-ttu-id="64f98-p110">**Важно!** Необходимо скопировать секрет приложения, прежде чем закрывать диалоговое окно **Новый пароль создан**. После закрытия окна получить секрет будет невозможно.</span><span class="sxs-lookup"><span data-stu-id="64f98-p110">**Important** You must copy the app secret before you close the **New password generated** dialog. After you close the dialog, you cannot retrieve the secret.</span></span> 
            
6. <span data-ttu-id="64f98-145">Нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="64f98-145">Choose **Save**.</span></span>


<span data-ttu-id="64f98-p111">В приведенной ниже таблице показаны свойства, которые необходимо настроить и скопировать для приложений различных типов. _Назначенное_ означает, что следует использовать значение, назначенное службой Azure AD.</span><span class="sxs-lookup"><span data-stu-id="64f98-p111">The following table shows the properties that you need to configure and copy for different kinds of apps. _Assigned_ means that you should use the value assigned by Azure AD.</span></span>


| <span data-ttu-id="64f98-148">Тип приложения</span><span class="sxs-lookup"><span data-stu-id="64f98-148">App type</span></span> | <span data-ttu-id="64f98-149">Платформа</span><span class="sxs-lookup"><span data-stu-id="64f98-149">Platform</span></span> | <span data-ttu-id="64f98-150">Идентификатор приложения</span><span class="sxs-lookup"><span data-stu-id="64f98-150">Application ID</span></span> | <span data-ttu-id="64f98-151">Секрет приложения</span><span class="sxs-lookup"><span data-stu-id="64f98-151">Application Secret</span></span> | <span data-ttu-id="64f98-152">URI/URL-адрес перенаправления</span><span class="sxs-lookup"><span data-stu-id="64f98-152">Redirect URI/URL</span></span> | <span data-ttu-id="64f98-153">Неявный поток</span><span class="sxs-lookup"><span data-stu-id="64f98-153">Implicit Flow</span></span> 
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="64f98-154">Нативное или мобильное</span><span class="sxs-lookup"><span data-stu-id="64f98-154">Native/Mobile</span></span> | <span data-ttu-id="64f98-155">Нативное</span><span class="sxs-lookup"><span data-stu-id="64f98-155">Native</span></span> | <span data-ttu-id="64f98-156">Назначенное</span><span class="sxs-lookup"><span data-stu-id="64f98-156">Assigned</span></span>  | <span data-ttu-id="64f98-157">Нет</span><span class="sxs-lookup"><span data-stu-id="64f98-157">No</span></span> | <span data-ttu-id="64f98-158">Назначенное</span><span class="sxs-lookup"><span data-stu-id="64f98-158">Assigned</span></span> | <span data-ttu-id="64f98-159">Нет</span><span class="sxs-lookup"><span data-stu-id="64f98-159">No</span></span> |
| <span data-ttu-id="64f98-160">Веб-приложение</span><span class="sxs-lookup"><span data-stu-id="64f98-160">Web App</span></span> | <span data-ttu-id="64f98-161">Веб</span><span class="sxs-lookup"><span data-stu-id="64f98-161">Web</span></span> | <span data-ttu-id="64f98-162">Назначенное</span><span class="sxs-lookup"><span data-stu-id="64f98-162">Assigned</span></span> | <span data-ttu-id="64f98-163">Да</span><span class="sxs-lookup"><span data-stu-id="64f98-163">Yes</span></span> | <span data-ttu-id="64f98-164">Да</span><span class="sxs-lookup"><span data-stu-id="64f98-164">Yes</span></span> | <span data-ttu-id="64f98-165">При необходимости</span><span class="sxs-lookup"><span data-stu-id="64f98-165">Optional</span></span> <br/><span data-ttu-id="64f98-166">По умолчанию ПО промежуточного слоя Open ID Connect использует гибридный поток (да)</span><span class="sxs-lookup"><span data-stu-id="64f98-166">Open ID Connect middleware uses hybrid flow by default (Yes)</span></span> | 
| <span data-ttu-id="64f98-167">Одностраничное приложение (SPA)</span><span class="sxs-lookup"><span data-stu-id="64f98-167">Single Page App (SPA)</span></span> | <span data-ttu-id="64f98-168">Веб</span><span class="sxs-lookup"><span data-stu-id="64f98-168">Web</span></span> | <span data-ttu-id="64f98-169">Назначенное</span><span class="sxs-lookup"><span data-stu-id="64f98-169">Assigned</span></span> | <span data-ttu-id="64f98-170">Да</span><span class="sxs-lookup"><span data-stu-id="64f98-170">Yes</span></span> | <span data-ttu-id="64f98-171">Да</span><span class="sxs-lookup"><span data-stu-id="64f98-171">Yes</span></span> | <span data-ttu-id="64f98-172">Да</span><span class="sxs-lookup"><span data-stu-id="64f98-172">Yes</span></span> <br/> <span data-ttu-id="64f98-173">Одностраничные приложения используют неявный поток Open ID Connect</span><span class="sxs-lookup"><span data-stu-id="64f98-173">SPAs use Open ID Connect implicit Flow</span></span> |
| <span data-ttu-id="64f98-174">Служба или управляющая программа</span><span class="sxs-lookup"><span data-stu-id="64f98-174">Service/Daemon</span></span> | <span data-ttu-id="64f98-175">Веб</span><span class="sxs-lookup"><span data-stu-id="64f98-175">Web</span></span> | <span data-ttu-id="64f98-176">Назначенное</span><span class="sxs-lookup"><span data-stu-id="64f98-176">Assigned</span></span> | <span data-ttu-id="64f98-177">Да</span><span class="sxs-lookup"><span data-stu-id="64f98-177">Yes</span></span> | <span data-ttu-id="64f98-178">Да</span><span class="sxs-lookup"><span data-stu-id="64f98-178">Yes</span></span> | <span data-ttu-id="64f98-179">Нет</span><span class="sxs-lookup"><span data-stu-id="64f98-179">No</span></span> |

<span data-ttu-id="64f98-180">Приложениям, предусматривающим предоставление согласия администратора, может потребоваться дополнительный URL-адрес перенаправления для Azure AD, на который будет возвращаться отклик.</span><span class="sxs-lookup"><span data-stu-id="64f98-180">Apps that provide an administrator consent experience may need an additional Redirect URL for Azure AD to return the response to.</span></span>

<span data-ttu-id="64f98-181">Дополнительные сведения о портале регистрации приложений и свойствах, которые можно настраивать для приложения, см. в статье [Справка по регистрации приложений](https://docs.microsoft.com/ru-RU/azure/active-directory/develop/active-directory-v2-registration-portal).</span><span class="sxs-lookup"><span data-stu-id="64f98-181">For more detail about the App Registration Portal and the properties you can configure for your App, see [App registration reference](https://docs.microsoft.com/ru-RU/azure/active-directory/develop/active-directory-v2-registration-portal).</span></span>  

## <a name="azure-ad-endpoint-considerations"></a><span data-ttu-id="64f98-182">Рекомендации, связанные с конечной точкой Azure AD</span><span class="sxs-lookup"><span data-stu-id="64f98-182">Azure AD endpoint considerations</span></span>

<span data-ttu-id="64f98-p112">Зарегистрировать приложение для конечной точки Azure AD можно на [портале Azure](https://aka.ms/aadapplist). При этом настраиваются те же основные свойства (например, идентификатор приложения, секрет приложения и URI/URL-адрес перенаправления), что и для конечной точки версии 2.0. Однако следует учитывать некоторые важные различия:</span><span class="sxs-lookup"><span data-stu-id="64f98-p112">You use the [Azure portal](https://aka.ms/aadapplist) to register your app for the Azure AD endpoint. You configure the same basic properties like Application ID, Application Secret, and Redirect URI/URL, as you would for the v2.0 endpoint; however, there are some important differences to be aware of:</span></span> 

- <span data-ttu-id="64f98-185">Для регистрации приложения можно использовать только рабочую или учебную учетную запись.</span><span class="sxs-lookup"><span data-stu-id="64f98-185">You can only use a work or school account to register an app.</span></span>
- <span data-ttu-id="64f98-186">Для каждой платформы приложению потребуется отдельный идентификатор.</span><span class="sxs-lookup"><span data-stu-id="64f98-186">Your app will require a different Application ID for each platform.</span></span>
- <span data-ttu-id="64f98-187">Если приложение является мультитенантным, необходимо в явной форме настроить его как таковое на портале.</span><span class="sxs-lookup"><span data-stu-id="64f98-187">If your app is a multi-tenant app, you must explicitly configure it to be multi-tenant at the portal.</span></span>
- <span data-ttu-id="64f98-188">Все необходимые приложению разрешения (включая разрешения Microsoft Graph) необходимо заранее настроить на портале.</span><span class="sxs-lookup"><span data-stu-id="64f98-188">You must pre-configure all the permissions (including Microsoft Graph permissions) that your app needs at the portal.</span></span> 

<span data-ttu-id="64f98-189">Рекомендации по добавлению приложения на портале Azure см. в разделе [Регистрация приложения в Azure Active Directory версии 2.0](https://docs.microsoft.com/ru-RU/azure/active-directory/develop/quickstart-v2-register-an-app).</span><span class="sxs-lookup"><span data-stu-id="64f98-189">For guidance on using the Azure portal to add an app, see [Register an app with the Azure Active Directory v2.0 endpoint](https://docs.microsoft.com/ru-RU/azure/active-directory/develop/quickstart-v2-register-an-app).</span></span>

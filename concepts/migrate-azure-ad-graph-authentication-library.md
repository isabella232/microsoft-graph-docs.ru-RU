---
title: Проверка изменений библиотеки проверки подлинности приложений
description: Описывается обновление использования библиотеки проверки подлинности для переноса приложения из приложений API Azure Active Directory (Azure AD) в API Microsoft Graph.
author: dkershaw10
localization_priority: Normal
ms.prod: microsoft-identity-platform
ms.openlocfilehash: d0f3570ac7d16c02737c4653d66070ec1a03d0c9
ms.sourcegitcommit: e87be8765d7f2bc90c6244d84c4719468bb3fd25
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2019
ms.locfileid: "37113886"
---
# <a name="review-app-authentication-library-changes"></a>Проверка изменений библиотеки проверки подлинности приложений

Эта статья входит в *Шаг 3: Ознакомьтесь со сведениями о* [процессе миграции приложений](migrate-azure-ad-graph-planning-checklist.md).

Большинство приложений используют библиотеку проверки подлинности для получения и управления маркерами доступа для вызова Microsoft Graph.  Корпорация Майкрософт предлагает две библиотеки проверки подлинности:

- [Библиотека проверки подлинности Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-authentication-libraries) ADAL
- [Библиотека проверки подлинности (Майкрософт](https://docs.microsoft.com/azure/active-directory/develop/reference-v2-libraries) ) MSAL

## <a name="updating-adal"></a>Обновление ADAL

Если ваше приложение использует ADAL, используйте подход к миграции на два этапа:

1. Обновите приложение, чтобы получить маркеры доступа для Microsoft Graph. Продолжайте использовать ADAL для этого этапа. Обновите **resourceurl экземпляром**, который содержит URI, представляющий веб-API ресурсов, от:

    `https://graph.windows.net`  

    Кому:  

    `https://graph.microsoft.com`

    Новые приобретенные маркеры имеют те же области после этого изменения, но аудитория маркеров доступа теперь называется Microsoft Graph.  

    После обновления **resourceurl экземпляром** и проверки работоспособности выпустите промежуточное обновление, чтобы получить доступ к пользователям и рунннинг.

1.  Затем начните работу с переносом приложения, чтобы использовать MSAL, поддерживаемую библиотекой, чтобы использовать перемещение вперед.

## <a name="migrating-to-msal"></a>Миграция в MSAL

MSAL предоставляет несколько преимуществ по сравнению с ADAL, в том числе последовательное разрешение, более широкие возможности единого входа, поддержку личных учетных записей Майкрософт, использование протоколов на основе стандартов и т. д.  

При переключении приложения на MSAL необходимо внести несколько изменений, в том числе задать параметр **scopes** в запросе аккуистион маркеров:

``` csharp
var scopes = new string[] { "https://graph.microsoft.com/.default" };
```

Выражение выше ограничивает область разрешений запросами, настроенными во время регистрации приложения на портале Azure, и сохраняет существующих пользователей от необходимости подтверждения приложения.

В статье [Миграция ADAL в MSAL](https://aka.ms/adal-net-to-msal-net) для непосредственной и обширной справки по процессу, включая устранение неполадок и справку по распространенным ошибкам.

После переноса в MSAL вы можете динамически запрашивать дополнительные области, а пользователям будет предложено получить добавочное согласие при следующем использовании приложения.

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь с различиями в [клиентской библиотеке .NET](migrate-azure-ad-graph-client-libraries.md) между Azure AD Graph и Microsoft Graph.
- Изучите [Перенос ADAL в MSAL](https://aka.ms/adal-net-to-msal-net) для получения дополнительной справки по переходу на MSAL.
- Ознакомьтесь с основными понятиями и рекомендациями [Microsoft Graph](/graph/overview) .
- Поэкспериментируйте с Microsoft Graph с помощью [проводника диаграмм](https://aka.ms/ge) .

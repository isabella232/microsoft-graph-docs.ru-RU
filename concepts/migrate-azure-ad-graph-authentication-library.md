---
title: Проверка изменений библиотеки проверки подлинности приложений
description: Описывается обновление использования библиотеки проверки подлинности для переноса приложения из приложений API Azure Active Directory (Azure AD) в API Microsoft Graph.
author: dkershaw10
localization_priority: Normal
ms.prod: azure-active-directory
ms.openlocfilehash: 35fc2b5c1ad1d7aebc790b93a31ba8d1924b8bc1
ms.sourcegitcommit: 3fbc2249b307e8d3a9de18f22ef6911094ca272c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/26/2020
ms.locfileid: "48289024"
---
# <a name="review-app-authentication-library-changes"></a>Проверка изменений библиотеки проверки подлинности приложений

Эта статья входит в *Шаг 3: Ознакомьтесь со сведениями о* [процессе миграции приложений](migrate-azure-ad-graph-planning-checklist.md).

Большинство приложений используют библиотеку проверки подлинности для получения и управления маркерами доступа для вызова Microsoft Graph.  Корпорация Майкрософт предлагает две библиотеки проверки подлинности:

- [Библиотека проверки подлинности Azure Active Directory](/azure/active-directory/develop/active-directory-authentication-libraries) (ADAL)
- [Библиотека проверки подлинности (Майкрософт](/azure/active-directory/develop/reference-v2-libraries) ) (MSAL)

## <a name="updating-adal"></a>Обновление ADAL

Если ваше приложение использует ADAL, используйте подход к миграции на два этапа:

1. Обновите приложение, чтобы получить маркеры доступа для Microsoft Graph. Продолжайте использовать ADAL для этого этапа. Обновите **resourceurl экземпляром**, который содержит URI, представляющий веб-API ресурсов, от:

    `https://graph.windows.net`  

    Кому:  

    `https://graph.microsoft.com`

    Новые приобретенные маркеры имеют те же области после этого изменения, но аудитория маркеров доступа теперь называется Microsoft Graph.  

    После обновления **resourceurl экземпляром** и проверки работоспособности выпустите промежуточное обновление, чтобы получить доступ к пользователям и рунннинг.

1.  Затем начните работу перенос приложения, чтобы использовать MSAL (поддерживаемая библиотека для переноса вперед), а теперь ADAL является устаревшим.

## <a name="migrating-to-msal"></a>Миграция в MSAL

MSAL предоставляет несколько преимуществ по сравнению с ADAL, в том числе последовательное разрешение, более широкие возможности единого входа, поддержку личных учетных записей Майкрософт, использование протоколов на основе стандартов и т. д.  

При переключении приложения на MSAL необходимо внести несколько изменений, в том числе задать параметр **scopes** в запросе аккуистион маркеров:

``` csharp
var scopes = new string[] { "https://graph.microsoft.com/.default" };
```

Выражение выше ограничивает область разрешений запросами, настроенными во время регистрации приложения на портале Azure, и сохраняет существующих пользователей от необходимости подтверждения приложения.

В статье [Миграция ADAL в MSAL](https://aka.ms/adal-net-to-msal-net) для непосредственной и обширной справки по процессу, включая устранение неполадок и справку по распространенным ошибкам.

После переноса в MSAL вы можете динамически запрашивать дополнительные области, а пользователям будет предложено получить добавочное согласие при следующем использовании приложения.

## <a name="next-steps"></a>Дальнейшие действия

- Ознакомьтесь с различиями в [клиентской библиотеке .NET](migrate-azure-ad-graph-client-libraries.md) между Azure AD Graph и Microsoft Graph.
- Снова просмотрите [Контрольный список](migrate-azure-ad-graph-planning-checklist.md) .

# <a name="paging-microsoft-graph-data-in-your-app"></a>Разбиение данных Microsoft Graph по страницам в приложении 

Некоторые запросы к Microsoft Graph возвращают несколько страниц данных. Это происходит из-за разбиения по страницам на стороне сервера или из-за использования параметра `$top`, который ограничивает размер страниц в запросе. Когда результирующий набор занимает несколько страниц, Microsoft Graph в ответ возвращает свойство `@odata.nextLink`, содержащее URL-адрес следующей страницы результатов. 

Например, в приведенном ниже URL-адресе запрашивается список всех пользователей в организации, при этом с параметром запроса `$top` указан размер страницы — 5:

```html
https://graph.microsoft.com/v1.0/users?$top=5
```

Если результат содержит более пяти пользователей, Microsoft Graph возвращает свойство `odata:nextLink` (подобное приведенному ниже) вместе с первой страницей пользователей.

```json
"@odata.nextLink": "https://graph.microsoft.com/v1.0/users?$top=5&$skiptoken=X%274453707 ... 6633B900000000000000000000%27"
```

Следующую страницу результатов можно получить, отправив значение URL-адреса свойства `@odata:nextLink` в Microsoft Graph. 

```html
https://graph.microsoft.com/v1.0/users?$top=5&$skiptoken=X%274453707 ... 6633B900000000000000000000%27
```

В каждом ответе Microsoft Graph будет возвращать ссылку на следующую страницу данных в свойстве `@odata:nextLink`, пока не будут прочитаны все страницы результатов.

>**Важно!** При запросе следующей страницы результатов в свойство `@odata:nextLink` следует включить полный URL-адрес. В зависимости от API, к которому выполняется запрос, значение URL-адреса свойства `@odata:nextLink` будет содержать один из двух параметров запроса: `$skiptoken` или `$skip`. URL-адрес также содержит все остальные параметры, имеющиеся в исходном запросе. Не пытайтесь извлечь значение `$skiptoken` или `$skip` и использовать его в другом запросе. 

Для различных API Microsoft Graph характерны свои особенности разбиения по страницам. При работе со страницами данных необходимо учитывать следующее:

- Разные API могут иметь различные максимальные размеры страницы и размеры по умолчанию.
- Различные API могут работать по-разному, если указанный (с помощью параметра запроса `$top`) размер страницы превышает максимальное значение для соответствующего API. В зависимости от API запрошенный размер страницы может быть проигнорирован, может быть возвращен максимальный размер страницы для соответствующего API, или же Microsoft Graph может вернуть ошибку. 
- Не все ресурсы и отношения поддерживают разбиение по страницам, например запросы к [directoryRoles](../api-reference/v1.0/resources/directoryrole.md). Сюда относится считывание самих объектов ролей, а также участников ролей.
- Некоторые API Microsoft Graph поддерживают разбиение по предыдущим страницам с помощью параметра запроса `previous-page` (`&previous-page=true`), который добавляется к значению URL-адреса свойства `@odata:nextLink`. После добавления этот параметр будет включен в значение URL-адреса `@odata:nextLink` и в последующих ответах. Результаты можно разбивать по предыдущим страницам, пока не будет возвращен ответ с пустым результатом. При дальнейшем разбиении возвращается ошибка. Кроме того, можно продолжить разбиение по следующим страницам, начиная с текущего ответа. Для этого нужно удалить параметр `previous-page` при отправке запроса на получение следующей страницы результатов. 


---
title: Создание и отправка уведомления из службы приложений
description: 'Настройте свою службу приложений для отправки уведомлений, ориентированных на пользователя, в разные клиенты через Microsoft Graph. '
localization_priority: Priority
ms.prod: notifications
ms.openlocfilehash: cf40087aff3956a88f79197482db8126bbe8d96c
ms.sourcegitcommit: 895a03cb2706a9b3a2236b30d6a7e9f5cbc6a89e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2019
ms.locfileid: "34683512"
---
# <a name="create-and-send-a-notification-from-your-app-service"></a>Создание и отправка уведомления из службы приложений

Вы можете создавать и отправлять уведомления пользователю с помощью API Microsoft Graph. Уведомление хранится в хранилище веб-канала активности и отправляется всем клиентам приложений на всех устройствах, с которых целевой пользователь выполнил вход в систему. 

## <a name="authentication"></a>Проверка подлинности

Служба уведомлений Microsoft Graph требует, чтобы ваша служба приложений использовала поток On-Behalf-Of (OBO) для публикации уведомления для пользователя. Ниже показан поток проверки подлинности:

1.  Пользователь выполняет вход в приложение с помощью своей учетной записи Майкрософт, рабочей или учебной учетной записи. При входе служба удостоверений предоставляет вам маркер доступа.

2.  Вы отправляете маркер доступа в свою службу приложений.

3.  Ваша служба приложений выполняет проверку подлинности в службе удостоверений и запрашивает маркер OBO для уведомлений Microsoft Graph.

4.  Служба удостоверений возвращает маркер на основе OBO и маркер обновления. Ваша служба приложений может использовать этот маркер доступа, чтобы публиковать уведомления для этого пользователя.

Дополнительные сведения о потоке OBO OAuth 2.0 см. в статье [Вызовы между службами с использованием делегированного удостоверения пользователя в потоке On-Behalf-Of](https://docs.microsoft.com/en-us/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow). Дополнительные сведения о работе этого потока с уведомлениями Microsoft Graph см. в [примере службы приложений](https://aka.ms/gnsample-appservice).

> [!NOTE]
> В настоящее время уведомления Microsoft Graph используют поток проверки подлинности OBO, но в будущем планируется упростить эту проверку подлинности и устранить необходимость хранения маркеров доступа и маркеров обновления.

Дополнительные сведения о разрешениях API, а также заголовках запросов и откликов см. в статье [Создание и отправка уведомления](/graph/api/notifications-post) справочника по API. 

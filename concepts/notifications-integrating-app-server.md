---
title: Создание и отправка уведомления из службы приложений
description: 'Настройте свою службу приложений для отправки уведомлений, ориентированных на пользователя, в разные клиенты через Microsoft Graph. '
localization_priority: Priority
ms.prod: notifications
ms.openlocfilehash: 1148c554b90fca5aeb56627e47a1d060f53f772e
ms.sourcegitcommit: 70ebcc469e2fdf2c31aeb6c5169f0101c3e698b0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/15/2019
ms.locfileid: "34063383"
---
# <a name="create-and-send-a-notification-from-your-app-service"></a>Создание и отправка уведомления из службы приложений

Вы можете создавать и отправлять уведомления пользователю с помощью API Microsoft Graph. Уведомление сохраняется в хранилище веб-канала активности и отправляется всем клиентам приложения на всех устройствах, на которых выполнил вход целевой пользователь. Ниже представлены сведения о проверке подлинности, областях обязательных разрешений, заголовке и тексте запроса, а также ожидаемом отклике.

## <a name="authentication"></a>Проверка подлинности

Служба уведомлений Microsoft Graph требует, чтобы ваша служба приложений использовала поток On-Behalf-Of (OBO) для публикации уведомления для пользователя. Ниже показан поток проверки подлинности:

1.  Пользователь выполняет вход в приложение с помощью своей учетной записи Майкрософт, рабочей или учебной учетной записи. При входе служба удостоверений предоставляет вам маркер доступа.

2.  Вы отправляете маркер доступа в свою службу приложений.

3.  Ваша служба приложений выполняет проверку подлинности в службе удостоверений и запрашивает маркер OBO для уведомлений Microsoft Graph.

4.  Служба удостоверений возвращает маркер на основе OBO и маркер обновления. Ваша служба приложений может использовать этот маркер доступа, чтобы публиковать уведомления для этого пользователя.

Дополнительные сведения о потоке OBO OAuth 2.0 см. в статье [Вызовы между службами с использованием делегированного удостоверения пользователя в потоке On-Behalf-Of](https://docs.microsoft.com/ru-RU/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow). Дополнительные сведения о работе этого потока с уведомлениями Microsoft Graph см. в [примере службы приложений](https://aka.ms/gnsample-appservice).

> [!NOTE]
> В настоящее время уведомления Microsoft Graph используют поток проверки подлинности OBO, но в будущем планируется упростить эту проверку подлинности и устранить необходимость хранения маркеров доступа и маркеров обновления.

Дополнительные сведения о разрешениях API, а также заголовках запросов и откликов см. в статье [Создание и отправка уведомления](/graph/api/notifications-post) справочника по API. 

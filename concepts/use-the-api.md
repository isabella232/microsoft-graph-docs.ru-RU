---
title: Использование API Microsoft Graph
description: Microsoft Graph — это соответствующий ограничениям REST веб-API, обеспечивающий доступ к ресурсам службы Microsoft Cloud. После регистрации приложения и получения маркеров аутентификации для пользователя или службы можно отправлять запросы к API Microsoft Graph.
ms.openlocfilehash: 1a9d9bcefdfb302a9de602aa15aa642a0c57a793
ms.sourcegitcommit: 334e84b4aed63162bcc31831cffd6d363dafee02
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/29/2018
ms.locfileid: "27092702"
---
# <a name="use-the-microsoft-graph-api"></a>Использование API Microsoft Graph

Microsoft Graph — это соответствующий ограничениям REST веб-API, обеспечивающий доступ к ресурсам службы Microsoft Cloud. После [регистрации приложения](auth-register-app-v2.md) и [получения маркеров аутентификации для пользователя](auth-v2-user.md) или [службы](auth-v2-service.md) можно отправлять запросы к API Microsoft Graph.

> **Важно!** Изменяется принцип применения политик условного доступа к Microsoft Graph. Вам необходимо обновить свои приложения, чтобы они могли обрабатывать сценарии, в которых выполняется настройка политик условного доступа. Дополнительные сведения и рекомендации см. в статье [Руководство для разработчиков по условному доступу в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-conditional-access-developer).

Для чтения или записи ресурса, например user или сообщения электронной почты, создайте запрос, показанный ниже.

```http
https://graph.microsoft.com/{version}/{resource}?query-parameters
```

Компоненты запроса:

* [Метод HTTP](#http-methods) — метод HTTP, используемый в запросе для Microsoft Graph.
* [`{version}`](#version) — версия API Microsoft Graph, которую использует приложение.
* [`{resource}`](#resource) — ресурс Microsoft Graph, на который вы ссылаетесь.
* [query-parameters](#query-parameters-optional) — необязательный набор параметров для изменения запроса или ответа.

После создания запроса возвращается ответ, который включает: 

* Код состояния — код состояния HTTP, который указывает на результат операции. Сведения о кодах ошибок HTTP см. в разделе [Ошибки](errors.md).
* Ответ — запрошенные данные или результат операции. Для некоторых операций ответ может быть пустым.
* Ссылка **Далее** — если найдено много данных, чтобы пролистать их все, щелкайте **Далее**. Дополнительные сведения см. в [этой статье](paging.md).

## <a name="http-methods"></a>Методы HTTP

Чтобы определить функцию запроса, Microsoft Graph использует метод HTTP. API поддерживает перечисленные ниже методы.


|**Метод** |**Описание**                             |
| :----- | :------------------------------------------- |
| GET    | Чтение данных из ресурса.                   |
| POST   | Создание нового ресурса или выполнение действия. |
| PATCH  | Обновление ресурса с использованием новых значений.           |
| PUT    | Замена ресурса новым.           |
| DELETE | Удаление ресурса.                           |

* Для методов **GET** и **DELETE** указывать текст запроса не нужно.
* Для методов **POST**, **PATCH** и **PUT** текст запроса обычно указывается в формате JSON и содержит такие дополнительные сведения, как значения свойств ресурса.

## <a name="version"></a>Версия

Microsoft Graph в настоящее время поддерживает две версии: `v1.0` и `beta`.

* `v1.0` включает общедоступные API. Используйте версию 1.0 для всех рабочих приложений.
* `beta` содержит бета-версии API. Так как мы можем вносить в бета-версии API критические изменения, рекомендуем использовать их только для проверки разрабатываемых приложений. Не используйте бета-версии API в рабочих приложениях.

Мы всегда рады отзывам о бета-версиях API. Чтобы оставить отзыв или предложить функцию, посетите нашу страницу [UserVoice](https://officespdev.uservoice.com/).

Дополнительные сведения о версиях API см. в статье [Управление версиями и поддержка](versioning-and-support.md).

## <a name="resource"></a>Resource

URL-адрес будет включать ресурсы, с которыми вы взаимодействуете в запросе, например `me`, `users`, `groups`, `drives` и `sites`. Каждый из ресурсов верхнего уровня также включает **отношения**, которые можно использовать для доступа к дополнительным ресурсам, например `me/messages` или `me/drive`. Работать с ресурсами можно также с помощью **методов**. Например, для отправки сообщения электронной почты используйте `me/sendMail`.

Дополнительные сведения о том, как переходить по связям и методам ресурсов, см. в статье [Обход Microsoft Graph](traverse-the-graph.md). 

Для доступа к каждому ресурсу могут потребоваться особые разрешения. Для создания и обновления ресурса часто требуется более высокий уровень разрешений, чем для чтения. Сведения о требуемых разрешениях см. в справочной статье о методе. 

Сведения о разрешениях см. в [справочнике по разрешениям](permissions-reference.md).

## <a name="query-parameters-optional"></a>Параметры запросов (необязательные)

Для настройки ответа в приложении Microsoft Graph можно использовать дополнительные параметры запроса. Используйте параметры запроса, чтобы изменять свойства, включаемые в ответ, находить элементы, соответствующие пользовательскому запросу, и указывать дополнительные параметры для метода.

Например, если добавить указанный ниже параметр фильтрации, будут возвращаться только сообщения, у которых свойство `emailAddress` имеет значение `jon@contoso.com`.

```http
https://graph.microsoft.com/v1.0/me/messages?filter=emailAddress eq 'jon@contoso.com'
```

Дополнительные сведения о параметрах запроса, см. в статье [Настройка ответов](query-parameters.md).

## <a name="next-steps"></a>Дальнейшие действия

Все готово для настройки Microsoft Graph. Чтобы узнать больше, перейдите в [песочницу Graph](https://developer.microsoft.com/graph/graph-explorer) и опробуйте запросы, воспользуйтесь [кратким руководством](https://developer.microsoft.com/graph/quick-start) или начните с одного из [пакетов SDK или примеров кода](https://developer.microsoft.com/graph/code-samples-and-sdks).

---
title: Использование API Microsoft Graph
description: Microsoft Graph — это соответствующий ограничениям REST веб-API, обеспечивающий доступ к ресурсам службы Microsoft Cloud. После регистрации приложения и получения маркеров аутентификации для пользователя или службы можно отправлять запросы к API Microsoft Graph.
author: jackson-woods
localization_priority: Priority
scenarios: getting-started
ms.custom: graphiamtop20
ms.openlocfilehash: 394252d491bf065554cedead4f39035744d0ade1
ms.sourcegitcommit: 66ceeb5015ea4e92dc012cd48eee84b2bbe8e7b4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/20/2019
ms.locfileid: "37053917"
---
# <a name="use-the-microsoft-graph-api"></a>Использование API Microsoft Graph

Microsoft Graph — это соответствующий ограничениям REST веб-API, обеспечивающий доступ к ресурсам службы Microsoft Cloud. После [регистрации приложения](auth-register-app-v2.md) и [получения маркеров аутентификации для пользователя](auth-v2-user.md) или [службы](auth-v2-service.md) можно отправлять запросы к API Microsoft Graph.

> **Важно!** Изменяется принцип применения политик условного доступа к Microsoft Graph. Вам необходимо обновить свои приложения, чтобы они могли обрабатывать сценарии, в которых выполняется настройка политик условного доступа. Дополнительные сведения и рекомендации см. в статье [Руководство для разработчиков по условному доступу в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-conditional-access-developer).

Для чтения или записи ресурса, например user или сообщения электронной почты, создайте запрос, показанный ниже.

<!-- {
  "blockType": "ignored"
}-->
```http
{HTTP method} https://graph.microsoft.com/{version}/{resource}?{query-parameters}
```

Компоненты запроса:

* [{Метод HTTP}](#http-methods) — метод HTTP, используемый в запросе для Microsoft Graph.
* [{версия}](#version) — версия API Microsoft Graph, которую использует приложение.
* [{ресурс}](#resource) — ресурс Microsoft Graph, на который вы ссылаетесь. 
* [{параметры-запроса}](#query-parameters) — необязательные параметры запроса OData или метода REST для изменения ответа.

После создания запроса возвращается ответ, который включает: 

* Код состояния — код состояния HTTP, который указывает на результат операции. Сведения о кодах ошибок HTTP см. в разделе [Ошибки](errors.md).
* Ответ — запрошенные данные или результат операции. Для некоторых операций ответ может быть пустым.
* `nextLink` — если найдено много данных, чтобы пролистать их все, используйте URL-адрес, возвращенный в свойстве `@odata.nextLink`. Дополнительные сведения см. в [этой статье](paging.md).

## <a name="http-methods"></a>Методы HTTP

Чтобы определить функцию запроса, Microsoft Graph использует метод HTTP. API поддерживает перечисленные ниже методы.


|**Метод** |**Описание**                             |
| :----- | :------------------------------------------- |
| GET    | Чтение данных из ресурса.                   |
| POST   | Создание нового ресурса или выполнение действия. |
| PATCH  | Обновление ресурса с использованием новых значений.           |
| PUT    | Замена ресурса новым.           |
| DELETE | Удаление ресурса.                           |

* Для CRUD-методов `GET` и `DELETE` указывать текст запроса не нужно.
* Для методов `POST`, `PATCH` и `PUT` текст запроса обычно указывается в формате JSON и содержит такие дополнительные сведения, как значения свойств ресурса.

## <a name="version"></a>Версия

Microsoft Graph в настоящее время поддерживает две версии: `v1.0` и `beta`.

* `v1.0` включает общедоступные API. Используйте версию 1.0 для всех рабочих приложений.
* `beta` содержит бета-версии API. Так как мы можем вносить в бета-версии API критические изменения, рекомендуем использовать их только для проверки разрабатываемых приложений. Не используйте бета-версии API в рабочих приложениях.

Мы всегда рады отзывам о бета-версиях API. Чтобы оставить отзыв или предложить функцию, посетите нашу страницу [UserVoice](https://officespdev.uservoice.com/).

Дополнительные сведения о версиях API см. в статье [Управление версиями и поддержка](versioning-and-support.md).

## <a name="resource"></a>Ресурс

Ресурс может быть объектом или сложным типом и обычно определяется с помощью свойств. Объекты всегда содержат свойство **id**, что отличает их от сложных типов.

URL-адрес будет включать ресурс, с которым вы взаимодействуете в запросе, например `me`, **user**, **group**, **drive** и **site**. Часто ресурсы верхнего уровня также включают _связи_, которые вы можете использовать для доступа к дополнительным ресурсам, например к ресурсам `me/messages` или `me/drive`. Вы также можете взаимодействовать с ресурсами при помощи _методов_. Например, чтобы отправить электронное письмо, воспользуйтесь методом `me/sendMail`. Дополнительные сведения см. в статье [Доступ к данным и методам с помощью Microsoft Graph](traverse-the-graph.md).

Для доступа к каждому ресурсу могут потребоваться особые разрешения. Для создания и обновления ресурса часто требуется более высокий уровень разрешений, чем для чтения. Сведения о требуемых разрешениях см. в справочной статье о методе. 

Сведения о разрешениях см. в [справочнике по разрешениям](permissions-reference.md).

## <a name="query-parameters"></a>Параметры запроса

В качестве параметров запросов могут использоваться системные параметры запроса OData или другие строки, поддерживаемые методом для настройки ответа.

Вы можете использовать необязательные системные параметры запроса OData, чтобы изменять свойства, включаемые в ответ, находить элементы, соответствующие пользовательскому запросу, и указывать дополнительные параметры для метода.

Например, если добавить указанный ниже параметр `filter`, будут возвращаться только сообщения, у которых свойство `emailAddress` имеет значение `jon@contoso.com`.

<!-- {
  "blockType": "ignored"
}-->
```http
GET https://graph.microsoft.com/v1.0/me/messages?filter=emailAddress eq 'jon@contoso.com'
```

Дополнительные сведения о параметрах запроса OData см. в статье [Настройка ответов с помощью параметров запроса](query-parameters.md).

Помимо параметров запроса OData, некоторые методы требуют указание значений параметров в составе URL-адреса запроса. Например, вы можете получить коллекцию событий, произошедших в течение периода времени в календаре пользователя, запросив связь **calendarView** объекта **user** и указав в качестве параметров запроса значения периода `startDateTime` и `endDateTime`.

<!-- {
  "blockType": "ignored"
}-->
```http
GET https://graph.microsoft.com/me/calendarView?startDateTime=2019-09-01T09:00:00.0000000&endDateTime=2019-09-01T17:00:00.0000000
```

## <a name="next-steps"></a>Дальнейшие действия

Все готово для настройки Microsoft Graph. Чтобы узнать больше, перейдите в [песочницу Graph](https://developer.microsoft.com/graph/graph-explorer) и опробуйте запросы, воспользуйтесь [кратким руководством](https://developer.microsoft.com/graph/quick-start) или начните с одного из [пакетов SDK или примеров кода](https://developer.microsoft.com/graph/code-samples-and-sdks).

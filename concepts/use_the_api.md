# <a name="use-the-microsoft-graph-api"></a><span data-ttu-id="397d5-101">Использование API Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="397d5-101">Use the Microsoft Graph API</span></span>

<span data-ttu-id="397d5-102">Microsoft Graph — это соответствующий ограничениям REST веб-API, обеспечивающий доступ к ресурсам службы Microsoft Cloud.</span><span class="sxs-lookup"><span data-stu-id="397d5-102">Microsoft Graph is a RESTful web API that enables you to access Microsoft Cloud service resources.</span></span> <span data-ttu-id="397d5-103">После [регистрации приложения](auth_register_app_v2.md) и [получения маркеров проверки подлинности для пользователя](auth_v2_user.md) или [службы](auth_v2_service.md) вы можете отправлять запросы к API Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="397d5-103">Microsoft Graph is a RESTful web API that enables you to access Microsoft Cloud service resources. After you [register your app](auth_register_app_v2.md) and [get authentication tokens for a user](auth_v2_user.md) or [service](auth_v2_service.md), you can make requests to the Microsoft Graph API.</span></span>

> <span data-ttu-id="397d5-104">**Важно!**  В настоящее время мы вносим изменения в порядок применения политик условного доступа к Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="397d5-104">**Important:**  How conditional access policies apply to Microsoft Graph is changing.</span></span> <span data-ttu-id="397d5-105">Вам необходимо обновить свои приложения, чтобы они могли обрабатывать сценарии, в которых выполняется настройка политик условного доступа.</span><span class="sxs-lookup"><span data-stu-id="397d5-105">Applications need to be updated to handle scenarios where conditional access policies are configured.</span></span> <span data-ttu-id="397d5-106">Дополнительные сведения и рекомендации см. в статье [Руководство для разработчиков по условному доступу в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-conditional-access-developer).</span><span class="sxs-lookup"><span data-stu-id="397d5-106">For more information and guidance, see [Developer Guidance for Azure Active Directory Conditional Access](https://docs.microsoft.com/azure/active-directory/develop/active-directory-conditional-access-developer).</span></span>

<span data-ttu-id="397d5-107">Для чтения или записи ресурса, например user или сообщения электронной почты, создайте запрос, показанный ниже.</span><span class="sxs-lookup"><span data-stu-id="397d5-107">To read from or write to a resource such as a user or an email message, you construct a request that looks like the following.</span></span>

```http
https://graph.microsoft.com/{version}/{resource}?query-parameters
```

<span data-ttu-id="397d5-108">Компоненты запроса:</span><span class="sxs-lookup"><span data-stu-id="397d5-108">The components of a request include:</span></span>

* <span data-ttu-id="397d5-109">[Метод HTTP](#http-methods) — метод HTTP, используемый в запросе для Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="397d5-109">[HTTP method](#http-methods) - The HTTP method used on the request to Microsoft Graph.</span></span>
* <span data-ttu-id="397d5-110">[`{version}`](#version) — версия API Microsoft Graph, которую использует приложение.</span><span class="sxs-lookup"><span data-stu-id="397d5-110">[`{version}`](#version) - The version of the Microsoft Graph API your application is using.</span></span>
* <span data-ttu-id="397d5-111">[`{resource}`](#resource) — ресурс Microsoft Graph, на который вы ссылаетесь.</span><span class="sxs-lookup"><span data-stu-id="397d5-111">[`{resource}`](#resource) - The resource in Microsoft Graph that you're referencing.</span></span>
* <span data-ttu-id="397d5-112">[query-parameters](#query-parameters-optional) — необязательный набор параметров для изменения запроса или ответа.</span><span class="sxs-lookup"><span data-stu-id="397d5-112">[query-parameters](#query-parameters-optional) - An optional set of parameters to modify the request or response.</span></span>

<span data-ttu-id="397d5-113">После создания запроса возвращается ответ, который включает:</span><span class="sxs-lookup"><span data-stu-id="397d5-113">After you make a request, a response is returned that includes:</span></span> 

* <span data-ttu-id="397d5-114">Код состояния — код состояния HTTP, который указывает на результат операции.</span><span class="sxs-lookup"><span data-stu-id="397d5-114">Status code - An HTTP status code that indicates success or failure. For details about HTTP error codes, see Errors.</span></span> <span data-ttu-id="397d5-115">Сведения о кодах ошибок HTTP см. в разделе [Ошибки](errors.md).</span><span class="sxs-lookup"><span data-stu-id="397d5-115">For details about HTTP error codes, see [Errors](errors.md).</span></span>
* <span data-ttu-id="397d5-p104">Ответ — запрошенные данные или результат операции. Для некоторых операций ответ может быть пустым.</span><span class="sxs-lookup"><span data-stu-id="397d5-p104">Response message - The data that you requested or the result of the operation. The response message can be empty for some operations.</span></span>
* <span data-ttu-id="397d5-118">Ссылка **Далее**: если запрос возвращает большое количество данных, вам необходимо отображать его постранично, щелкая **Далее**.</span><span class="sxs-lookup"><span data-stu-id="397d5-118">**Next** link - If your request returns a lot of data, you need to page through it by choosing **Next. For details, see Paging**.</span></span> <span data-ttu-id="397d5-119">Дополнительные сведения см. в статье о [разбиении данных на страницы](paging.md).</span><span class="sxs-lookup"><span data-stu-id="397d5-119">For details, see [Paging](paging.md).</span></span>

## <a name="http-methods"></a><span data-ttu-id="397d5-120">Методы HTTP</span><span class="sxs-lookup"><span data-stu-id="397d5-120">HTTP methods</span></span>

<span data-ttu-id="397d5-p106">Чтобы определить функцию запроса, Microsoft Graph использует метод HTTP. API поддерживает перечисленные ниже методы.</span><span class="sxs-lookup"><span data-stu-id="397d5-p106">Microsoft Graph uses the HTTP method on your request to determine what your request is doing. The API supports the following methods.</span></span>


|<span data-ttu-id="397d5-123">**Способ**</span><span class="sxs-lookup"><span data-stu-id="397d5-123">**Method**</span></span> |<span data-ttu-id="397d5-124">**Описание**</span><span class="sxs-lookup"><span data-stu-id="397d5-124">**Description**</span></span>                             |
| :----- | :------------------------------------------- |
| <span data-ttu-id="397d5-125">GET</span><span class="sxs-lookup"><span data-stu-id="397d5-125">GET</span></span>    | <span data-ttu-id="397d5-126">Чтение данных из ресурса.</span><span class="sxs-lookup"><span data-stu-id="397d5-126">Read data from a resource.</span></span>                   |
| <span data-ttu-id="397d5-127">POST</span><span class="sxs-lookup"><span data-stu-id="397d5-127">POST</span></span>   | <span data-ttu-id="397d5-128">Создание нового ресурса или выполнение действия.</span><span class="sxs-lookup"><span data-stu-id="397d5-128">Create a new resource, or perform an action.</span></span> |
| <span data-ttu-id="397d5-129">PATCH</span><span class="sxs-lookup"><span data-stu-id="397d5-129">PATCH</span></span>  | <span data-ttu-id="397d5-130">Обновление ресурса с использованием новых значений.</span><span class="sxs-lookup"><span data-stu-id="397d5-130">Update a resource with new values.</span></span>           |
| <span data-ttu-id="397d5-131">PUT</span><span class="sxs-lookup"><span data-stu-id="397d5-131">PUT</span></span>    | <span data-ttu-id="397d5-132">Замена ресурса новым.</span><span class="sxs-lookup"><span data-stu-id="397d5-132">Replace a resource with a new one.</span></span>           |
| <span data-ttu-id="397d5-133">DELETE</span><span class="sxs-lookup"><span data-stu-id="397d5-133">DELETE</span></span> | <span data-ttu-id="397d5-134">Удаление ресурса.</span><span class="sxs-lookup"><span data-stu-id="397d5-134">Remove a resource.</span></span>                           |

* <span data-ttu-id="397d5-135">Для методов **GET** и **DELETE** указывать текст запроса не нужно.</span><span class="sxs-lookup"><span data-stu-id="397d5-135">For the methods **GET** and **DELETE**, no request body is required.</span></span>
* <span data-ttu-id="397d5-136">Для методов **POST**, **PATCH** и **PUT** текст запроса обычно указывается в формате JSON и содержит такие дополнительные сведения, как значения свойств ресурса.</span><span class="sxs-lookup"><span data-stu-id="397d5-136">The **POST**, **PATCH**, and **PUT** methods require a request body, usually specified in JSON format, that contains additional information, such as the values for properties of the resource.</span></span>

## <a name="version"></a><span data-ttu-id="397d5-137">Версия</span><span class="sxs-lookup"><span data-stu-id="397d5-137">Version</span></span>

<span data-ttu-id="397d5-138">Microsoft Graph в настоящее время поддерживает две версии: `v1.0` и `beta`.</span><span class="sxs-lookup"><span data-stu-id="397d5-138">Microsoft Graph currently supports two versions: `v1.0` and `beta`.</span></span>

* <span data-ttu-id="397d5-139">`v1.0` содержит общедоступные API.</span><span class="sxs-lookup"><span data-stu-id="397d5-139">`v1.0` includes generally available APIs.</span></span> <span data-ttu-id="397d5-140">Используйте версию 1.0 для всех рабочих приложений.</span><span class="sxs-lookup"><span data-stu-id="397d5-140"> includes generally available APIs. Use the v1.0 version for all production apps.</span></span>
* <span data-ttu-id="397d5-141">`beta` содержит бета-версии API.</span><span class="sxs-lookup"><span data-stu-id="397d5-141">`beta` includes APIs that are currently in preview.</span></span> <span data-ttu-id="397d5-142">Так как мы можем вносить в бета-версии API критические изменения, рекомендуем использовать их только для проверки разрабатываемых приложений. Не используйте бета-версии API в рабочих приложениях.</span><span class="sxs-lookup"><span data-stu-id="397d5-142"> includes APIs that are currently in preview. Because we might introduce breaking changes to our beta APIs, we recommend that you use the beta version only to test apps that are in development; do not use beta APIs in your production apps.</span></span>

<span data-ttu-id="397d5-143">Мы всегда рады отзывам о бета-версиях API.</span><span class="sxs-lookup"><span data-stu-id="397d5-143">We are always looking for feedback on our beta APIs. To provide feedback or request features, see our UserVoice page.</span></span> <span data-ttu-id="397d5-144">Чтобы оставить отзыв или предложить функцию, посетите нашу страницу [UserVoice](https://officespdev.uservoice.com/).</span><span class="sxs-lookup"><span data-stu-id="397d5-144">We are always looking for feedback on our beta APIs. To provide feedback or request features, see our [UserVoice](https://officespdev.uservoice.com/) page.</span></span>

<span data-ttu-id="397d5-145">Дополнительные сведения о версиях API см. в статье [Управление версиями и поддержка](versioning_and_support.md).</span><span class="sxs-lookup"><span data-stu-id="397d5-145">For more information about API versions, see [Versioning and support](versioning_and_support.md).</span></span>

## <a name="resource"></a><span data-ttu-id="397d5-146">Ресурс</span><span class="sxs-lookup"><span data-stu-id="397d5-146">Resource</span></span>

<span data-ttu-id="397d5-147">URL-адрес будет включать ресурс или ресурсы, с которыми вы взаимодействуете в запросе, например `me`, `users`, `groups`, `drives` и `sites`.</span><span class="sxs-lookup"><span data-stu-id="397d5-147">Your URL will include the resource or resources you are interacting with in the request, such as `me`, `users`, `groups`, `drives`, and `sites`.</span></span> <span data-ttu-id="397d5-148">Каждый из ресурсов верхнего уровня также включает **связи**, которые вы можете использовать для доступа к дополнительным ресурсам, например к ресурсам `me/messages` или `me/drive`.</span><span class="sxs-lookup"><span data-stu-id="397d5-148">Each of the top-level resources also include **relationships**, which you can use to access additional resources, like `me/messages` or `me/drive`.</span></span> <span data-ttu-id="397d5-149">Вы также можете взаимодействовать с ресурсами с помощью **методов**. Например, чтобы отправить электронное письмо, воспользуйтесь методом `me/sendMail`.</span><span class="sxs-lookup"><span data-stu-id="397d5-149">You can also interact with resources using **methods**; for example, to send an email, use `me/sendMail`.</span></span>

<span data-ttu-id="397d5-150">Дополнительные сведения о том, как переходить по связям и методам ресурсов, см. в разделе "Просмотр ресурсов в Microsoft Graph".</span><span class="sxs-lookup"><span data-stu-id="397d5-150">For more information about how to navigate resource relationships and methods, see Traverse the graph.</span></span> 

<span data-ttu-id="397d5-p111">Для доступа к каждому ресурсу могут потребоваться особые разрешения. Для создания и обновления ресурса часто требуется более высокий уровень разрешений, чем для чтения. Сведения о требуемых разрешениях см. в справочной статье о методе.</span><span class="sxs-lookup"><span data-stu-id="397d5-p111">Each resource might require different permissions to access it. You will often need a higher level of permissions to create or update a resource than to read it. For details about required permissions, see the method reference topic.</span></span> 

<span data-ttu-id="397d5-154">Сведения о разрешениях см. в [справочнике по разрешениям](permissions_reference.md).</span><span class="sxs-lookup"><span data-stu-id="397d5-154">For details about permissions, see [Permissions reference](permissions_reference.md).</span></span>

## <a name="query-parameters-optional"></a><span data-ttu-id="397d5-155">Параметры запросов (необязательные)</span><span class="sxs-lookup"><span data-stu-id="397d5-155">Query parameters (optional)</span></span>

<span data-ttu-id="397d5-p112">Для настройки ответа в приложении Microsoft Graph можно использовать дополнительные параметры запроса. Используйте параметры запроса, чтобы изменять свойства, включаемые в ответ, находить элементы, соответствующие пользовательскому запросу, и указывать дополнительные параметры для метода.</span><span class="sxs-lookup"><span data-stu-id="397d5-p112">You can use optional query parameters to customize the response in your Microsoft Graph app. Use query parameters to include more or fewer properties than the default response, filter the response for items that match a custom query, or provide additional parameters for a method.</span></span>

<span data-ttu-id="397d5-158">Например, если добавить указанный ниже параметр фильтрации, будут возвращаться только сообщения, у которых свойство `emailAddress` имеет значение `jon@contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="397d5-158">For example, adding the following filter parameter restricts the messages returned to only those with the `emailAddress` property of `jon@contoso.com`.</span></span>

```http
https://graph.microsoft.com/v1.0/me/messages?filter=emailAddress eq 'jon@contoso.com'
```

<span data-ttu-id="397d5-159">Дополнительные сведения о параметрах запроса, см. в статье [Настройка ответов](query_parameters.md).</span><span class="sxs-lookup"><span data-stu-id="397d5-159">For more information about query parameters, see [Customize responses](query_parameters.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="397d5-160">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="397d5-160">Next steps</span></span>

<span data-ttu-id="397d5-161">Все готово для настройки Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="397d5-161">You're ready to get up and running with Microsoft Graph.</span></span> <span data-ttu-id="397d5-162">Чтобы узнать больше, перейдите в [песочницу Graph](https://developer.microsoft.com/en-us/graph/graph-explorer) и опробуйте запросы, воспользуйтесь [кратким руководством](https://developer.microsoft.com/en-us/graph/quick-start) или начните с одного из [пакетов SDK или примеров кода](https://developer.microsoft.com/en-us/graph/code-samples-and-sdks).</span><span class="sxs-lookup"><span data-stu-id="397d5-162">You're ready to get up and running with Microsoft Graph. To learn more, go to the [Graph Explorer](https://developer.microsoft.com/en-us/graph/graph-explorer) to try out some requests, try the [Quick Start](https://developer.microsoft.com/en-us/graph/quick-start), or get started using one of our [SDKs and code samples](https://developer.microsoft.com/en-us/graph/code-samples-and-sdks).</span></span>
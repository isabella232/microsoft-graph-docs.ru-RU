---
title: 'Создание приложений для нескольких устройств на платформе Project Rome '
description: 'С помощью Project Rome вы можете создавать решения, которые одинаково легко использовать на различных устройствах и платформах, избавляя пользователей от лишних сложностей и повышая взаимодействие с приложением. Чтобы приложения могли обмениваться данными между устройствами и платформами с помощью API Project Rome, необходимо настроить приложение для нескольких устройств, включающее сведения о приложениях для определенных платформ. '
localization_priority: Normal
ms.prod: project-rome
ms.openlocfilehash: 93f171278eb892cb31712738c0e2249eb7d2f353
ms.sourcegitcommit: ef8eac3cf973a1971f8f1d41d75a085fad3690f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2019
ms.locfileid: "37969852"
---
# <a name="build-cross-device-apps-powered-by-project-rome"></a><span data-ttu-id="e691a-104">Создание приложений для нескольких устройств на платформе Project Rome</span><span class="sxs-lookup"><span data-stu-id="e691a-104">Build cross-device apps powered by Project Rome</span></span> 

<span data-ttu-id="e691a-105">С помощью Project Rome вы можете создавать решения, которые одинаково легко использовать на различных устройствах и платформах, избавляя пользователей от лишних сложностей и повышая взаимодействие с приложением.</span><span class="sxs-lookup"><span data-stu-id="e691a-105">You can use Project Rome to build experiences that cross devices and platforms seamlessly, reducing friction for users and helping to drive app engagement.</span></span> <span data-ttu-id="e691a-106">Чтобы приложения могли обмениваться данными между устройствами и платформами с помощью API Project Rome, необходимо настроить приложение для нескольких устройств, включающее сведения о приложениях для определенных платформ.</span><span class="sxs-lookup"><span data-stu-id="e691a-106">For applications to share data across devices and platforms using Project Rome APIs, you need to configure a cross-device app that includes information about your platform-specific apps.</span></span> 

<span data-ttu-id="e691a-107">С помощью приложения для нескольких устройств вы можете:</span><span class="sxs-lookup"><span data-stu-id="e691a-107">A cross-device app enables you to:</span></span> 

- <span data-ttu-id="e691a-108">использовать API веб-каналов активности Project в Microsoft Graph;</span><span class="sxs-lookup"><span data-stu-id="e691a-108">Use the Project Rome activity feed API in Microsoft Graph.</span></span>  
- <span data-ttu-id="e691a-109">считывать и записывать действия пользователей, опубликованные группой приложений для определенных платформ с помощью пакета SDK Project Rome для Windows, Android и/или iOS;</span><span class="sxs-lookup"><span data-stu-id="e691a-109">Read and  write user activities published by a group of platform-specific applications by using the Project Rome SDK for Windows, Android, and/or iOS.</span></span>
-  <span data-ttu-id="e691a-110">выбирать целевые приложения, используя возможности ретрансляции устройств в Project Rome при помощи пакета SDK Project Rome для Android или iOS.</span><span class="sxs-lookup"><span data-stu-id="e691a-110">Target apps via the device relay capabilities in Project Rome by using the Project Rome SDK for Android or iOS.</span></span>

<span data-ttu-id="e691a-111">**Возобновление работы на разных устройствах с помощью API веб-каналов активности**</span><span class="sxs-lookup"><span data-stu-id="e691a-111">**Pick up where you left off across devices with the activity feed API**</span></span>

<span data-ttu-id="e691a-112">Вы можете связать приложение для нескольких устройств с приложениями для Windows, iOS и Android, а также веб-приложениями таким образом, чтобы приложение на каждой платформе могло считывать и записывать действия пользователей, опубликованные любым приложением в группе.</span><span class="sxs-lookup"><span data-stu-id="e691a-112">You can configure a cross-device app to associate your apps for Windows, iOS, Android, and the web so that the app on each platform can read and write user activities that are published by any app in the group.</span></span> 

<span data-ttu-id="e691a-113">Допустим, пользователь завершает работу над пресс-релизом на своем рабочем компьютере, прежде чем отправиться на обед с друзьями.</span><span class="sxs-lookup"><span data-stu-id="e691a-113">For example, a user is finishing up a press release on her PC at work before dinner with friends.</span></span> <span data-ttu-id="e691a-114">В ресторане он получает от начальника уведомление об опечатке, которую необходимо исправить в кратчайшие сроки.</span><span class="sxs-lookup"><span data-stu-id="e691a-114">At the restaurant, she gets a notification from her boss about a typo that needs to be fixed asap.</span></span> <span data-ttu-id="e691a-115">Он открывает приложение на своем телефоне с Android и видит карточку с пресс-релизом, который редактировался ранее.</span><span class="sxs-lookup"><span data-stu-id="e691a-115">She opens the app on her Android phone and sees a card showing the press release she was editing earlier.</span></span> <span data-ttu-id="e691a-116">Он касается карточки, чтобы открыть ее, исправляет документ и возвращается к общению с друзьями.</span><span class="sxs-lookup"><span data-stu-id="e691a-116">She taps the card to open it so she can fix the release immediately and get back to her friends.</span></span> 
 
<span data-ttu-id="e691a-117">Благодаря конфигурации приложения для нескольких устройств веб-канал активности пользователей легко синхронизируется между устройствами и платформами, помогая пользователям возобновлять работу над важными задачами с любого устройства.</span><span class="sxs-lookup"><span data-stu-id="e691a-117">With this cross-device app configuration in place, the user's activity feed is synchronized across devices and platforms effortlessly so you can build experiences that help users pick up important tasks where they left off from any app surface.</span></span> 

<span data-ttu-id="e691a-118">**Выбор подходящего экрана с помощью API ретрансляции устройств**</span><span class="sxs-lookup"><span data-stu-id="e691a-118">**Choose the right screen at the right time with the device relay API**</span></span>

<span data-ttu-id="e691a-119">Вы можете настроить приложение для нескольких устройств, используя учетные данные push-уведомлений для каждой из платформ, на которых доступно приложение, чтобы команды и уведомления доставлялись на каждое устройство, на котором используется приложение, независимо от платформы.</span><span class="sxs-lookup"><span data-stu-id="e691a-119">You can configure a cross-device app with push notification credentials for each of the platforms your app is available on so that a command or notification can be delivered to you on any device where you use the app, regardless of platform.</span></span> 

<span data-ttu-id="e691a-120">Допустим, пользователь смотрит видео во время поездки на автобусе домой с работы.</span><span class="sxs-lookup"><span data-stu-id="e691a-120">For example, a user is watching a video on the bus ride home from work.</span></span> <span data-ttu-id="e691a-121">По возвращении домой он открывает приложение для просмотра видео на Xbox One, чтобы продолжить просмотр на большом экране.</span><span class="sxs-lookup"><span data-stu-id="e691a-121">When she arrives home, she taps the app to launch the video on her Xbox One so she can continue watching on the big screen.</span></span> 

<span data-ttu-id="e691a-122">Если связать с приложением учетные данные push-уведомлений для каждой из платформ, на которых оно доступно, то приложение пользователя сможет отправлять команды между устройствами. Таким образом, вы можете создавать решения, работающие на нескольких экранах или переносящие рабочий процесс с одного устройства на другое в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="e691a-122">When you associate push notification credentials for each of the platforms where your app is available with your cross-device app, the user's app can send commands across devices, so you can build experiences that cross multiple screens or transition a workflow from one device to another in real time.</span></span> 

## <a name="select-the-right-hosting-method-for-your-cross-device-app-configuration"></a><span data-ttu-id="e691a-123">Выбор подходящего способа для размещения конфигурации приложения для нескольких устройств</span><span class="sxs-lookup"><span data-stu-id="e691a-123">Select the right hosting method for your cross-device app configuration</span></span>
<span data-ttu-id="e691a-124">Вы можете разместить конфигурацию приложения для нескольких устройств либо в качестве JSON-файла на домене, либо в виде профиля, который можно настраивать в [Центре разработки для Windows](https://developer.microsoft.com/windows).</span><span class="sxs-lookup"><span data-stu-id="e691a-124">You can host your cross-device app configuration either as a JSON file on your domain or as a profile configurable via the [Windows Dev Center](https://developer.microsoft.com/windows).</span></span> <span data-ttu-id="e691a-125">Выберите вариант размещения, соответствующий возможностям Project Rome, которые должны быть доступны в ваших приложениях.</span><span class="sxs-lookup"><span data-stu-id="e691a-125">Choose a hosting option based on the Project Rome capabilities you want to enable in your apps.</span></span> 

### <a name="windows-dev-center-profile-recommended"></a><span data-ttu-id="e691a-126">Профиль Центра разработки для Windows (рекомендуется)</span><span class="sxs-lookup"><span data-stu-id="e691a-126">Windows Dev Center profile (recommended)</span></span> 
<span data-ttu-id="e691a-127">Вы можете получить доступ ко всем возможностям Project Rome, используя приложение для нескольких устройств, которым можно управлять в [Центре разработки для Windows](https://developer.microsoft.com/windows).</span><span class="sxs-lookup"><span data-stu-id="e691a-127">You can access all Project Rome capabilities using a cross-device app managed in the [Windows Dev Center](https://developer.microsoft.com/windows).</span></span> <span data-ttu-id="e691a-128">Центр разработки для Windows также предоставляет *лучший* способ управления изменениями конфигурации приложений для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-128">The Windows Dev Center also offers the *best* way to manage any cross-device app configuration changes.</span></span> <span data-ttu-id="e691a-129">Вы можете надежнее сохранять обновления имеющегося профиля, пока не будете готовы опубликовать изменения в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="e691a-129">You can save updates to an existing profile more securely until you're ready to publish changes to production.</span></span> <span data-ttu-id="e691a-130">При публикации изменений имеющегося приложения для нескольких устройств в Центре разработки новый профиль вступает в силу спустя примерно **один час**.</span><span class="sxs-lookup"><span data-stu-id="e691a-130">When you publish changes to an existing cross-device app in the Dev Center, the new profile will be effective after approximately **one hour**.</span></span>  

### <a name="externally-hosted-json-file-limited"></a><span data-ttu-id="e691a-131">Внешний JSON-файл (ограниченная функциональность)</span><span class="sxs-lookup"><span data-stu-id="e691a-131">Externally hosted JSON file (limited)</span></span> 
<span data-ttu-id="e691a-132">Вы можете использовать указанные ниже возможности Project Rome на всех поддерживаемых платформах, используя приложение для нескольких устройств, управляемое как внешний JSON-файл.</span><span class="sxs-lookup"><span data-stu-id="e691a-132">You can use the following Project Rome capabilities on all supported platforms using a cross-device app managed as an externally hosted JSON file:</span></span>  

* <span data-ttu-id="e691a-133">Чтение и запись действий пользователей со всех платформ при помощи [API веб-каналов активности](/graph/api/resources/activity-feed-api-overview?view=graph-rest-1.0)</span><span class="sxs-lookup"><span data-stu-id="e691a-133">Read and write user activities from all platforms using the [activity feed API](/graph/api/resources/activity-feed-api-overview?view=graph-rest-1.0)</span></span>
* <span data-ttu-id="e691a-134">Запись действий пользователей со всех платформ (Windows, iOS, Android, Интернет) при помощи пакетов SDK Project Rome.</span><span class="sxs-lookup"><span data-stu-id="e691a-134">Write user activities from all platforms (Windows, iOS, Android, web) using the Project Rome SDKs.</span></span>

<span data-ttu-id="e691a-135">Если вы получаете доступ **только** к этим возможностям, вы можете размещать конфигурацию приложения для нескольких устройств во внешнем хранилище в своем домене в виде JSON-файла.</span><span class="sxs-lookup"><span data-stu-id="e691a-135">If you **only** access these capabilities, you can host your cross-device app configuration externally on your domain as a JSON file.</span></span>

## <a name="configure-a-cross-device-app-using-the-windows-dev-center"></a><span data-ttu-id="e691a-136">Настройка приложения для нескольких устройств при помощи Центра разработки для Windows</span><span class="sxs-lookup"><span data-stu-id="e691a-136">Configure a cross-device app using the Windows Dev Center</span></span>
<span data-ttu-id="e691a-137">Идентификатор приложения для нескольких устройств представляется как принадлежащий вам домен.</span><span class="sxs-lookup"><span data-stu-id="e691a-137">A cross-device app ID is represented as a domain that you own.</span></span> <span data-ttu-id="e691a-138">Домен указывает на сопоставление идентификаторов приложений для определенных платформ, сохраненное в виде JSON-файла на вашем домене или настраиваемое через Центр разработки для Windows.</span><span class="sxs-lookup"><span data-stu-id="e691a-138">The domain points to a mapping of your platform-specific app IDs stored either as a JSON file hosted on your domain or configurable via the Windows Dev Center.</span></span> <span data-ttu-id="e691a-139">Когда вы укажете домен, представляющий идентификатор приложения для нескольких устройств, вам потребуется собрать сведения для настройки соответствующего профиля.</span><span class="sxs-lookup"><span data-stu-id="e691a-139">After you identify the domain you'll use to represent your cross-device app ID, you'll need to collect information to configure the associated profile.</span></span> 

### <a name="step-1-select-a-secure-domain-for-your-cross-device-app-id-and-enable-domain-verification"></a><span data-ttu-id="e691a-140">Шаг 1. Выберите надежный домен для идентификатора приложения для нескольких устройств и включите проверку домена</span><span class="sxs-lookup"><span data-stu-id="e691a-140">Step 1: Select a secure domain for your cross-device app ID and enable domain verification</span></span>
<span data-ttu-id="e691a-141">Домен, используемый в качестве идентификатора приложения для нескольких устройств, должен быть либо доменом верхнего уровня, либо поддоменом, а также должен быть защищен протоколом TLS.</span><span class="sxs-lookup"><span data-stu-id="e691a-141">The domain used as your cross-device app ID must either be a top-level domain or a subdomain and must be protected via TLS.</span></span> <span data-ttu-id="e691a-142">Примеры: https://contoso.com или https://myapp.contoso.com, но НЕ https://myapp.contoso.com/somepath.</span><span class="sxs-lookup"><span data-stu-id="e691a-142">For example: https://contoso.com or https://myapp.contoso.com, but NOT https://myapp.contoso.com/somepath.</span></span> <span data-ttu-id="e691a-143">**У каждого приложения для нескольких устройств должен быть уникальный домен (или поддомен).**</span><span class="sxs-lookup"><span data-stu-id="e691a-143">**You must have a unique domain (or subdomain) per cross-device app.**</span></span> <span data-ttu-id="e691a-144">Однако вы можете выбирать, какие приложения связывать с тем или иным приложением для нескольких устройств, учитывая нужные кроссплатформенные функции.</span><span class="sxs-lookup"><span data-stu-id="e691a-144">However, you decide which apps to associate with a single cross-device app based on the cross-platform behavior you want to support.</span></span> 

<span data-ttu-id="e691a-145">Например, разработчик набора игровых приложений может использовать отдельный поддомен для каждого из них, чтобы гарантировать, что каждое приложение подписывается только на те действия пользователей, которые можно возобновить при считывании данных на разных устройствах и платформах.</span><span class="sxs-lookup"><span data-stu-id="e691a-145">For example, an app developer with a suite of game apps might use a separate subdomain for each of these to ensure that each app is only subscribed to the user activities it can resume when reading data across devices and platforms.</span></span> <span data-ttu-id="e691a-146">С другой стороны, разработчик набора приложений для работы, которые рассчитаны на совместную работу друг с другом, может использовать один домен для всех этих приложений, чтобы каждое приложение могло запускать элемент набора на любом устройстве.</span><span class="sxs-lookup"><span data-stu-id="e691a-146">On the other hand, an app developer with a suite of productivity apps designed to work together might use a single domain for all of these so that any app is able to launch a member of the suite across devices.</span></span>  

#### <a name="assert-domain-ownership-with-the-windows-dev-center"></a><span data-ttu-id="e691a-147">Подтверждение права собственности на домен в Центре разработки для Windows</span><span class="sxs-lookup"><span data-stu-id="e691a-147">Assert domain ownership with the Windows Dev Center</span></span>
<span data-ttu-id="e691a-148">При управлении конфигурацией приложения для нескольких устройств с помощью Центра разработки для Windows домен, представляющий идентификатор этого приложения, хранится в составе профиля приложения, чтобы корпорация Майкрософт могла убедиться, что домен принадлежит вам.</span><span class="sxs-lookup"><span data-stu-id="e691a-148">When using the Windows Dev Center to manage your cross-device app configuration, the domain representing your cross-device app ID is stored as part of your cross-device app profile so Microsoft can verify that you are the domain owner.</span></span> <span data-ttu-id="e691a-149">Право собственности на домен **необходимо подтвердить**, чтобы завершить публикацию конфигурации приложения для нескольких устройств. Таким образом, рекомендуем сначала позаботиться об этом.</span><span class="sxs-lookup"><span data-stu-id="e691a-149">Your domain ownership **must be verified** in order to finish publishing your cross-device app configuration, so it's a good idea to tackle this first.</span></span><span data-ttu-id="e691a-150">Если ваш домен еще не подтвержден, вы можете сохранить сведения о приложении для нескольких устройств и повторить проверку по завершении этого шага, чтобы опубликовать приложение для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-150"> If your domain is not yet verified, you can save your cross-device app details and rerun the verification after you complete this step so you can publish your cross-device app.</span></span>

<span data-ttu-id="e691a-151">Чтобы подтвердить, что домен приложения принадлежит вам, необходимо добавить запись [DNS TXT](https://go.microsoft.com/fwlink/?linkid=871417) для домена с уникальным значением, предоставленным вам в Центре разработки.</span><span class="sxs-lookup"><span data-stu-id="e691a-151">To assert your domain ownership for your cross-device app, you'll need to add a [DNS TXT](https://go.microsoft.com/fwlink/?linkid=871417) entry for your domain with a unique value provided to you in the Dev Center.</span></span> <span data-ttu-id="e691a-152">Это значение уникально для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-152">This value is unique per cross-device app.</span></span> <span data-ttu-id="e691a-153">Чтобы определить уникальное значение для вашего приложения, войдите в Центр разработки для Windows и выберите **Взаимодействие между устройствами** в меню слева и приступите к настройке нового приложения для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-153">To find the unique value for your app, sign in to the Windows Dev Center and choose **Cross-device experiences** from the left menu to start configuring a new cross-device app.</span></span> <span data-ttu-id="e691a-154">Указав имя для нового приложения, выберите в подменю **Подтвердить домен приложения для нескольких устройств**.</span><span class="sxs-lookup"><span data-stu-id="e691a-154">After you give your new cross-device app a name, select **Verify your cross-device app domain** from the submenu.</span></span> <span data-ttu-id="e691a-155">На этой странице появятся инструкции со  **встроенным** уникальным значением (например, MS=95ff4557-813f-45a5-b2f6-1f94170b979f).</span><span class="sxs-lookup"><span data-stu-id="e691a-155">This page will display instructions with a unique value **inline** (for example, MS=95ff4557-813f-45a5-b2f6-1f94170b979f).</span></span> <span data-ttu-id="e691a-156">Обязательно скопируйте значение целиком, включая строку "MS=".</span><span class="sxs-lookup"><span data-stu-id="e691a-156">Make sure to copy the entire value including 'MS='.</span></span>

### <a name="step-2-collect-your-platform-specific-application-ids"></a><span data-ttu-id="e691a-157">Шаг 2. Соберите идентификаторы приложений для своей платформы</span><span class="sxs-lookup"><span data-stu-id="e691a-157">Step 2: Collect your platform-specific application IDs</span></span>
<span data-ttu-id="e691a-158">Соберите идентификаторы всех приложений для определенных платформ, которые будут использовать [API Project Rome](/graph/api/resources/project-rome-overview?view=graph-rest-1.0).</span><span class="sxs-lookup"><span data-stu-id="e691a-158">Collect the platform-specific application IDs for each application and platform that will use [Project Rome APIs](/graph/api/resources/project-rome-overview?view=graph-rest-1.0).</span></span>

<span data-ttu-id="e691a-159">Вам потребуется идентификатор каждого приложения для определенной платформы, чтобы связать их с удостоверением приложения для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-159">You'll need to collect each of the platform-specific application IDs in order to associate them with your cross-device app identity.</span></span> <span data-ttu-id="e691a-160">В Центре разработки для Windows можно выбрать приложения на универсальной платформе Windows, связанные с учетной записью разработчика. Однако вам потребуется вручную указать идентификаторы всех приложений для Win32, iOS и Android, а также определить основной URL-адрес для связанных веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="e691a-160">Using the Windows Dev Center, you'll be able to select from Universal Windows Platform apps associated with your developer account, but you'll need to manually provide application IDs for any of your win32, iOS, or Android apps and identify the primary URL for any associated web apps.</span></span> <span data-ttu-id="e691a-161">С каждой платформой можно связать до 10 идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="e691a-161">You can associate up to 10 IDs per platform.</span></span> 

<span data-ttu-id="e691a-162">Чтобы найти идентификаторы:</span><span class="sxs-lookup"><span data-stu-id="e691a-162">To find the IDs:</span></span>

* <span data-ttu-id="e691a-163">**windows_universal** — укажите AUMID для каждого приложения UWP.</span><span class="sxs-lookup"><span data-stu-id="e691a-163">**windows_universal** - Provide an AUMID for each UWP app.</span></span> <span data-ttu-id="e691a-164">Дополнительные сведения см. в статьях [Определение идентификатора модели пользователя для установленного приложения (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)) и [Application](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-application).</span><span class="sxs-lookup"><span data-stu-id="e691a-164">For details, see [Find the Application User Model ID of an installed app (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)) and [Application](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-application).</span></span>
* <span data-ttu-id="e691a-165">**windows_win32** — укажите AUMID для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-165">**windows_win32** - Provide an AUMID for each app.</span></span> <span data-ttu-id="e691a-166">Чтобы получить эти сведения для приложений Win32, необходимо использовать скрипт.</span><span class="sxs-lookup"><span data-stu-id="e691a-166">For win32 apps, you'll need to use a script to retrieve this information.</span></span> <span data-ttu-id="e691a-167">Дополнительные сведения см. в статье [Определение идентификатора модели пользователя установленного приложения (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)).</span><span class="sxs-lookup"><span data-stu-id="e691a-167">For details, see For details, see [Find the Application User Model ID of an installed app (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)).</span></span>
* <span data-ttu-id="e691a-168">**android** — дополнительные сведения см. в разделе [Изменение имени пакета](https://developer.android.com/studio/build/application-id.html#change_the_package_name).</span><span class="sxs-lookup"><span data-stu-id="e691a-168">**android** - For details, see [Change the package name](https://developer.android.com/studio/build/application-id.html#change_the_package_name).</span></span> 
* <span data-ttu-id="e691a-169">**ios** — дополнительные сведения см. в статьях [Bundle](https://developer.apple.com/documentation/foundation/bundle) и [Обязательные, локализуемые и редактируемые свойства](https://help.apple.com/itunes-connect/developer/#/devfc3066644).</span><span class="sxs-lookup"><span data-stu-id="e691a-169">**ios** - For details, see [Bundle](https://developer.apple.com/documentation/foundation/bundle) and [Required, localizable, and editable properties](https://help.apple.com/itunes-connect/developer/#/devfc3066644).</span></span>
* <span data-ttu-id="e691a-170">**msa** — войдите на [портал регистрации приложений](https://apps.dev.microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="e691a-170">**msa** – Sign in to the [Application registration portal](https://apps.dev.microsoft.com).</span></span> <span data-ttu-id="e691a-171">Вы можете просмотреть идентификатор приложения или клиента для любого приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-171">You can view the App ID/client ID for any of your apps.</span></span> <span data-ttu-id="e691a-172">Поддерживаются как идентификаторы Live SDK (шестнадцатеричные значения), так и конвергированные идентификаторы приложений (GUID).</span><span class="sxs-lookup"><span data-stu-id="e691a-172">Both Live SDK (hex values) and Converged app IDs (GUIDs) are supported.</span></span>   

### <a name="step-3-configure-support-for-microsoft-account-or-azure-ad"></a><span data-ttu-id="e691a-173">Шаг 3. Настройте поддержку учетных записей Майкрософт или Azure AD</span><span class="sxs-lookup"><span data-stu-id="e691a-173">Step 3: Configure support for Microsoft account or Azure AD</span></span>
<span data-ttu-id="e691a-174">Чтобы включить поддержку работы на нескольких устройствах, пользователи приложения должны входить с помощью  [учетной записи Майкрософт](https://account.microsoft.com/account)  или  [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-developers-guide)  (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="e691a-174">To enable cross-device experiences, your app users must sign in with either a [Microsoft account](https://account.microsoft.com/account) or an [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/active-directory-developers-guide) (Azure AD) account.</span></span> <span data-ttu-id="e691a-175">Вы укажете идентификаторы приложений и клиентов для поддержки аутентификации в конфигурации приложения для нескольких устройств, чтобы включить поддержку кроссплатформенной работы.</span><span class="sxs-lookup"><span data-stu-id="e691a-175">You will provide the app ID/client IDs to support authentication as part of your cross-device app configuration to enable cross-platform support.</span></span> <span data-ttu-id="e691a-176">Можно указать до 10 экземпляров.</span><span class="sxs-lookup"><span data-stu-id="e691a-176">You can provide up to 10 instances.</span></span>

<span data-ttu-id="e691a-177">Вы можете определить идентификаторы имеющихся приложений и клиентов или подготовить новые, войдя на [портал регистрации приложений](https://apps.dev.microsoft.com) с помощью учетной записи разработчика.</span><span class="sxs-lookup"><span data-stu-id="e691a-177">You can find your existing app ID/client IDs or provision new ones by signing in to the [Application registration portal](https://apps.dev.microsoft.com) with your developer account.</span></span> <span data-ttu-id="e691a-178">После входа на портал вы сможете просмотреть идентификатор приложения или клиента для любого приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-178">When you sign in to the portal, you can view the App ID/client ID for any of your apps.</span></span> <span data-ttu-id="e691a-179">Поддерживаются как идентификаторы Live SDK (шестнадцатеричные значения), так и конвергированные идентификаторы приложений (GUID).</span><span class="sxs-lookup"><span data-stu-id="e691a-179">Both Live SDK (hex values) and converged app IDs (GUIDs) are supported.</span></span>   

<span data-ttu-id="e691a-180">Если вы создаете приложение, которое будет поддерживать пользователей Azure AD, не используя конвергированный идентификатор приложения, выданный на [портале регистрации приложений](https://apps.dev.microsoft.com), то вам потребуется указать GUID в качестве идентификатора приложения Azure.</span><span class="sxs-lookup"><span data-stu-id="e691a-180">If you're building an application that will support Azure AD users, and you do not use a converged application ID issued through the [Application registration portal](https://apps.dev.microsoft.com), you will need to provide the GUID for the application ID of your Azure app.</span></span> <span data-ttu-id="e691a-181">Чтобы определить GUID клиента, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="e691a-181">To find the GUID for your tenant:</span></span> 

1. <span data-ttu-id="e691a-182">Войдите на [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="e691a-182">Sign in to the [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="e691a-183">Выберите **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="e691a-183">Select **Azure Active Directory**.</span></span>
3. <span data-ttu-id="e691a-184">В разделе **Управление** выберите **Регистрация приложений**.</span><span class="sxs-lookup"><span data-stu-id="e691a-184">Under **Manage**, select **App registrations**.</span></span> 
4. <span data-ttu-id="e691a-185">Выберите приложение из списка и найдите идентификатор приложения (GUID) в разделе **Основное**.</span><span class="sxs-lookup"><span data-stu-id="e691a-185">Select your app from the list and view your Application ID (GUID) listed under **Essentials**.</span></span>

### <a name="step-4-configure-support-for-cross-platform-push-notifications-optional"></a><span data-ttu-id="e691a-186">Шаг 4. Настройка поддержки кроссплатформенных push-уведомлений (необязательно)</span><span class="sxs-lookup"><span data-stu-id="e691a-186">Step 4: Configure support for cross-platform push notifications (optional)</span></span> 
<span data-ttu-id="e691a-187">Если вы решили настроить приложение для нескольких устройств в Центре разработки для Windows, вы можете включить поддержку кроссплатформенных push-уведомлений, указав учетные данные, используемые с API для платформ push-уведомлений Android и iOS.</span><span class="sxs-lookup"><span data-stu-id="e691a-187">If you've opted to configure your cross-device app in the Windows Dev Center, you can enable support for cross-platform push notifications by providing the credentials you use with the APIs for Android and iOS push messaging platforms.</span></span> <span data-ttu-id="e691a-188">Они необходимы, если вы используете пакеты SDK Project Rome для iOS и Android и хотите не только публиковать действия пользователей.</span><span class="sxs-lookup"><span data-stu-id="e691a-188">These are required if you're using the Project Rome SDKs for iOS and Android and you want to do more than publish user activities.</span></span> <span data-ttu-id="e691a-189">Если используются только API Project Rome для Microsoft Graph, то выполнять это действие не требуется.</span><span class="sxs-lookup"><span data-stu-id="e691a-189">If you're using Project Rome APIs for Microsoft Graph only, you don't need to perform this step.</span></span> <span data-ttu-id="e691a-190">С каждой платформой можно связать до 10 наборов учетных данных.</span><span class="sxs-lookup"><span data-stu-id="e691a-190">You can associate up to 10 sets of credentials per platform.</span></span> 

><span data-ttu-id="e691a-191">**Важно!** Не храните учетные данные push-уведомлений во внешнем JSON-файле.</span><span class="sxs-lookup"><span data-stu-id="e691a-191">**Important:** Do not store push notification credentials in an externally hosted JSON file.</span></span>

<span data-ttu-id="e691a-192">Чтобы найти идентификаторы:</span><span class="sxs-lookup"><span data-stu-id="e691a-192">To find the IDs:</span></span>

* <span data-ttu-id="e691a-193">
  \*\*Windows Notification Service\*\* — см. раздел [Регистрация приложения и получение учетных данных для облачной службы](https://docs.microsoft.com/previous-versions/windows/apps/hh913756(v=win.10)#registering-your-app-and-receiving-the-credentials-for-your-cloud-service) и посетите [портал регистрации приложений](https://apps.dev.microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="e691a-193">**Windows Notification Service** - See [Registering your app and receiving the credentials for your cloud service](https://docs.microsoft.com/previous-versions/windows/apps/hh913756(v=win.10)#registering-your-app-and-receiving-the-credentials-for-your-cloud-service) and the [Application registration portal](https://apps.dev.microsoft.com).</span></span>
* <span data-ttu-id="e691a-194">**Служба push-уведомлений Apple** — см. [обзор APNs](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html).</span><span class="sxs-lookup"><span data-stu-id="e691a-194">**Apple Push Notification Service** -See [APNs Overview](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html).</span></span>
* <span data-ttu-id="e691a-195">**Google Cloud Messaging** — см. статью [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging/).</span><span class="sxs-lookup"><span data-stu-id="e691a-195">**Google Cloud Messaging** - See [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging/).</span></span>

<span data-ttu-id="e691a-196">**Примечание.** Если Firebase используется для отправки уведомлений на устройства iOS с использованием учетных данных Android, в ходе настройки приложения для нескольких устройств необходимо указать учетные данные APNs.</span><span class="sxs-lookup"><span data-stu-id="e691a-196">**Note:** If you're using Firebase to push notifications to iOS devices using Android credentials, you'll need to provide your APNs credentials as part of your cross-device app configuration.</span></span> 

## <a name="configure-a-cross-device-app-using-an-externally-hosted-json-file"></a><span data-ttu-id="e691a-197">Настройка приложения для нескольких устройств с помощью внешнего JSON-файла</span><span class="sxs-lookup"><span data-stu-id="e691a-197">Configure a cross-device app using an externally hosted JSON file</span></span>
<span data-ttu-id="e691a-198">Идентификатор приложения для нескольких устройств представляется как принадлежащий вам домен.</span><span class="sxs-lookup"><span data-stu-id="e691a-198">A cross-device app ID is represented as a domain that you own.</span></span> <span data-ttu-id="e691a-199">Домен указывает на сопоставление идентификаторов приложений для определенных платформ, сохраненное в виде JSON-файла на вашем домене или настраиваемое через Центр разработки для Windows.</span><span class="sxs-lookup"><span data-stu-id="e691a-199">The domain points to a mapping of your platform-specific app IDs stored either as a JSON file hosted on your domain or configurable via the Windows Dev Center.</span></span> <span data-ttu-id="e691a-200">Когда вы укажете домен, представляющий идентификатор приложения для нескольких устройств, вам потребуется собрать сведения для настройки соответствующего профиля.</span><span class="sxs-lookup"><span data-stu-id="e691a-200">After you identify the domain you'll use to represent your cross-device app ID, you'll need to collect information to configure the associated profile.</span></span> 

### <a name="step-1-select-a-secure-domain-for-your-cross-device-app-id"></a><span data-ttu-id="e691a-201">Шаг 1. Выбор надежного домена в качестве идентификатора приложения для нескольких устройств</span><span class="sxs-lookup"><span data-stu-id="e691a-201">Step 1: Select a secure domain for your cross-device app ID</span></span>
<span data-ttu-id="e691a-202">Идентификатор приложения для нескольких устройств представляется как принадлежащий вам домен.</span><span class="sxs-lookup"><span data-stu-id="e691a-202">A cross-device app ID is represented as a domain that you own.</span></span> <span data-ttu-id="e691a-203">Он должен быть либо доменом верхнего уровня, либо поддоменом, а также должен быть защищен протоколом TLS.</span><span class="sxs-lookup"><span data-stu-id="e691a-203">This must either be a top-level domain or a subdomain, and must be protected via TLS.</span></span> <span data-ttu-id="e691a-204">Примеры: https://contoso.com или https://myapp.contoso.com, но НЕ https://myapp.contoso.com/somepath.</span><span class="sxs-lookup"><span data-stu-id="e691a-204">For example: https://contoso.com or https://myapp.contoso.com but NOT https://myapp.contoso.com/somepath.</span></span> <span data-ttu-id="e691a-205">У каждого приложения для нескольких устройств должен быть уникальный домен (или поддомен).</span><span class="sxs-lookup"><span data-stu-id="e691a-205">You must have a unique domain (or subdomain) per cross-device app.</span></span> <span data-ttu-id="e691a-206">Однако вы можете выбирать, какие приложения связывать с тем или иным приложением для нескольких устройств, учитывая нужные кроссплатформенные функции.</span><span class="sxs-lookup"><span data-stu-id="e691a-206">However, you decide which apps to associate with a single cross-device app based on the cross-platform behavior you want to support.</span></span> 

<span data-ttu-id="e691a-207">Например, разработчик набора игровых приложений может использовать отдельный поддомен для каждого из них, чтобы гарантировать, что каждое приложение подписывается только на те действия пользователей, которые можно возобновить при считывании данных на разных устройствах и платформах.</span><span class="sxs-lookup"><span data-stu-id="e691a-207">For example, an app developer with a suite of game apps might use a separate subdomain for each to ensure that each app is only subscribed to the user activities it can resume when reading data across devices and platforms.</span></span> <span data-ttu-id="e691a-208">Разработчик набора приложений для работы, которые рассчитаны на совместную работу друг с другом, может использовать один домен для всех этих приложений, чтобы каждое приложение могло запускать элемент набора на любом устройстве.</span><span class="sxs-lookup"><span data-stu-id="e691a-208">An app developer with a suite of productivity apps designed to work together might use a single domain for all of these so that any app is able to launch a member of the suite across devices.</span></span>  

#### <a name="assert-domain-ownership-with-an-externally-hosted-json-file"></a><span data-ttu-id="e691a-209">Подтверждение права собственности на домен с помощью внешнего JSON-файла</span><span class="sxs-lookup"><span data-stu-id="e691a-209">Assert domain ownership with an externally hosted JSON file</span></span> 
<span data-ttu-id="e691a-210">Если для управления приложением для нескольких устройств используется внешний JSON-файл, то для подтверждения права собственности на домен необходимо указать идентификаторы приложений учетной записи Майкрософт или Azure AD в файле cross-platform-app-identifiers.</span><span class="sxs-lookup"><span data-stu-id="e691a-210">If you're using an externally hosted JSON file to manage your cross-device app, you assert domain ownership by including your Microsoft account or Azure AD app IDs in the cross-platform-app-identifiers file.</span></span> <span data-ttu-id="e691a-211">Право собственности на домен будет подтверждено в ходе публикации, когда вы будете использовать API веб-каналов активности для создания действий пользователей.</span><span class="sxs-lookup"><span data-stu-id="e691a-211">Your domain ownership will be verified as part of the publish process when you use the activity feed API to create user activities.</span></span>

<span data-ttu-id="e691a-212">Система кэширует содержимое JSON-файла во избежание частой отправки запросов в домене.</span><span class="sxs-lookup"><span data-stu-id="e691a-212">The system will cache the contents of the JSON file to avoid generating frequent requests on your domain.</span></span> <span data-ttu-id="e691a-213">Если настроены заголовки кэша HTTP, служба будет учитывать их при определении времени обновления кэша.</span><span class="sxs-lookup"><span data-stu-id="e691a-213">If configured, the service will respect HTTP cache headers when evaluating when to refresh the cache.</span></span> <span data-ttu-id="e691a-214">Если же они не настроены, служба будет обновлять кэш каждые 24 часа.</span><span class="sxs-lookup"><span data-stu-id="e691a-214">If not configured, the service will refresh every 24 hours.</span></span> 

### <a name="step-2-collect-your-platform-specific-application-ids-and-construct-your-json-file"></a><span data-ttu-id="e691a-215">Шаг 2. Сбор идентификаторов приложений для определенных платформ и составление JSON-файла</span><span class="sxs-lookup"><span data-stu-id="e691a-215">Step 2: Collect your platform-specific application IDs and construct your JSON file</span></span>
<span data-ttu-id="e691a-216">Соберите идентификаторы всех приложений для определенных платформ, которые будут использовать API веб-каналов активности и/или ретрансляции устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-216">Collect the platform-specific application IDs for each application and platform that will use the activity feed and/or device relay API.</span></span> 

<span data-ttu-id="e691a-217">Вам потребуется идентификатор каждого приложения для определенной платформы, чтобы связать их с удостоверением приложения для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-217">You'll need to collect each of the platform-specific application IDs in order to associate them with your cross-device app identity.</span></span> <span data-ttu-id="e691a-218">Во внешнем JSON-файле необходимо собрать идентификаторы каждого из приложений для определенных платформ, настраиваемых в рамках приложения для нескольких устройств, и привести их к заданному формату.</span><span class="sxs-lookup"><span data-stu-id="e691a-218">Using an externally hosted JSON file, you'll need to collect app IDs for each of the platform-specific apps to configure as part of your cross-device app and assemble them into the specified format.</span></span> <span data-ttu-id="e691a-219">С каждой платформой можно связать до 10 идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="e691a-219">You can associate up to 10 IDs per platform.</span></span> 

#### <a name="constructing-your-cross-platform-app-identifiers-file"></a><span data-ttu-id="e691a-220">Составление файла cross-platform-app-identifiers</span><span class="sxs-lookup"><span data-stu-id="e691a-220">Constructing your cross-platform-app-identifiers file</span></span>
<span data-ttu-id="e691a-221">Сам JSON-файл должен называться **cross-platform-app-identifiers** и размещаться в корне домена HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e691a-221">The JSON file itself must be named **cross-platform-app-identifiers** and hosted at root of your HTTPS domain.</span></span> <span data-ttu-id="e691a-222">Содержимое файла представляет собой JSON-массив сопоставлений между поддерживаемыми приложением платформами и идентификаторами приложений на этих платформах.</span><span class="sxs-lookup"><span data-stu-id="e691a-222">The contents of the file are a JSON array of mappings between your application's supported platforms and the application IDs on those platforms.</span></span> <span data-ttu-id="e691a-223">Составляя файл, включите объект JSON для каждого приложения и каждой платформы, где будут использоваться API Project Rome.</span><span class="sxs-lookup"><span data-stu-id="e691a-223">When constructing the file, include a JSON object for each application and platform that will use Project Rome APIs.</span></span> 
 
<span data-ttu-id="e691a-224">Файл может содержать несколько объектов JSON с одним и тем же идентификатором платформы.</span><span class="sxs-lookup"><span data-stu-id="e691a-224">The file will allow for multiple JSON objects with the same platform identifier.</span></span> <span data-ttu-id="e691a-225">Например, приложения для iPhone и iPad должны быть добавлены как отдельные объекты JSON, в каждом из которых указана платформа iOS.</span><span class="sxs-lookup"><span data-stu-id="e691a-225">For example, an iPhone app and an iPad app should be listed as separate JSON objects, each with a platform value of iOS.</span></span> <span data-ttu-id="e691a-226">Идентификатор веб-платформы показан в приведенном ниже примере.</span><span class="sxs-lookup"><span data-stu-id="e691a-226">The web platform identifier is shown in the following example.</span></span>
 
<span data-ttu-id="e691a-227">Указывать объект JSON для всех платформ необязательно.</span><span class="sxs-lookup"><span data-stu-id="e691a-227">You don't need to include a JSON object for all platforms.</span></span> <span data-ttu-id="e691a-228">Включайте объекты JSON для тех платформ, на которых приложение использует API Project Rome.</span><span class="sxs-lookup"><span data-stu-id="e691a-228">Only include JSON objects for platforms where your application is using Project Rome APIs.</span></span><span data-ttu-id="e691a-229">Например, если у вас нет клиента приложения для платформы Android, то в файл не нужно добавлять запись для Android.</span><span class="sxs-lookup"><span data-stu-id="e691a-229"> For example, if you don't have an app client for the Android platform, you don’t need an entry in the file for Android.</span></span>
 
<span data-ttu-id="e691a-230">Приведенный ниже пример включает все действительные идентификаторы платформ, принимаемые на данный момент.</span><span class="sxs-lookup"><span data-stu-id="e691a-230">The following example includes all the valid platform identifiers currently accepted.</span></span> <span data-ttu-id="e691a-231">Объекты JSON с недопустимым значением платформы исключаются.</span><span class="sxs-lookup"><span data-stu-id="e691a-231">JSON objects that include an invalid platform value will be stripped out.</span></span>  

```[
{"platform":"windows_universal", "application":"Microsoft.Contoso_8wekyb3d8bbwe"},
{"platform":"windows_win32", "application":"DefaultBrowser_NOPUBLISHERID!Microsoft.Contoso.Default"},
{"platform":"android","application":"com.example.myapp"},
{"platform":"ios", "application":"com.example.myapp"},
{"platform":"web", "application":"https://contoso.com"},
{"platform":"web", "application":"https://chat.contoso.com"},
{"platform":"msa", "application":"00000000603E0BF"},
{"platform":"msa", "application":"48932b46-98b1-4020-9be4-cc7a65643c9e"},
]
```

<span data-ttu-id="e691a-232">Чтобы найти идентификаторы:</span><span class="sxs-lookup"><span data-stu-id="e691a-232">To find the IDs:</span></span>

* <span data-ttu-id="e691a-233">**windows_universal** — укажите AUMID для каждого приложения UWP.</span><span class="sxs-lookup"><span data-stu-id="e691a-233">**windows_universal** - Provide an AUMID for each UWP app.</span></span> <span data-ttu-id="e691a-234">Дополнительные сведения см. в статьях [Определение идентификатора модели пользователя для установленного приложения (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)) и [Application](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-application).</span><span class="sxs-lookup"><span data-stu-id="e691a-234">For details, see [Find the Application User Model ID of an installed app (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)) and [Application](https://docs.microsoft.com/uwp/schemas/appxpackage/appxmanifestschema/element-application).</span></span>
* <span data-ttu-id="e691a-235">**windows_win32** — укажите AUMID для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-235">**windows_win32** - Provide an AUMID for each app.</span></span> <span data-ttu-id="e691a-236">Чтобы получить эти сведения для приложений Win32, необходимо использовать скрипт.</span><span class="sxs-lookup"><span data-stu-id="e691a-236">For win32 apps, you'll need to use a script to retrieve this information.</span></span> <span data-ttu-id="e691a-237">Дополнительные сведения см. в статье [Определение идентификатора модели пользователя установленного приложения (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)).</span><span class="sxs-lookup"><span data-stu-id="e691a-237">For details, see For details, see [Find the Application User Model ID of an installed app (Industry 8.1)](https://docs.microsoft.com/previous-versions/windows/embedded/dn449300(v=winembedded.82)).</span></span>
* <span data-ttu-id="e691a-238">**android** — дополнительные сведения см. в разделе [Изменение имени пакета](https://developer.android.com/studio/build/application-id.html#change_the_package_name).</span><span class="sxs-lookup"><span data-stu-id="e691a-238">**android** - For details, see [Change the package name](https://developer.android.com/studio/build/application-id.html#change_the_package_name).</span></span> 
* <span data-ttu-id="e691a-239">**ios** — дополнительные сведения см. в статьях [Bundle](https://developer.apple.com/documentation/foundation/bundle) и [Обязательные, локализуемые и редактируемые свойства](https://help.apple.com/itunes-connect/developer/#/devfc3066644).</span><span class="sxs-lookup"><span data-stu-id="e691a-239">**ios** - For details, see [Bundle](https://developer.apple.com/documentation/foundation/bundle) and [Required, localizable, and editable properties](https://help.apple.com/itunes-connect/developer/#/devfc3066644).</span></span>
* <span data-ttu-id="e691a-240">**msa** — войдите на [портал регистрации приложений](https://apps.dev.microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="e691a-240">**msa** – Sign in to the [Application registration portal](https://apps.dev.microsoft.com).</span></span> <span data-ttu-id="e691a-241">Вы можете просмотреть идентификатор приложения или клиента для любого приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-241">You can view the App ID/client ID for any of your apps.</span></span> <span data-ttu-id="e691a-242">Поддерживаются как идентификаторы Live SDK (шестнадцатеричные значения), так и конвергированные идентификаторы приложений (GUID).</span><span class="sxs-lookup"><span data-stu-id="e691a-242">Both Live SDK (hex values) and Converged app IDs (GUIDs) are supported.</span></span>   

### <a name="step-3-configure-support-for-microsoft-account-or-azure-ad"></a><span data-ttu-id="e691a-243">Шаг 3. Настройте поддержку учетных записей Майкрософт или Azure AD</span><span class="sxs-lookup"><span data-stu-id="e691a-243">Step 3: Configure support for Microsoft account or Azure AD</span></span>
<span data-ttu-id="e691a-244">Чтобы включить поддержку работы на нескольких устройствах, пользователи приложения должны входить с помощью учетной записи Майкрософт или Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e691a-244">To enable cross-device experiences, your app users must sign in with either a Microsoft account or an Azure AD account.</span></span> <span data-ttu-id="e691a-245">Вы укажете идентификаторы приложений и клиентов для поддержки аутентификации в конфигурации приложения для нескольких устройств, чтобы включить поддержку кроссплатформенной работы.</span><span class="sxs-lookup"><span data-stu-id="e691a-245">You will provide the app ID/client IDs to support authentication as part of your cross-device app configuration to enable cross-platform support.</span></span> <span data-ttu-id="e691a-246">Можно указать до 10 экземпляров.</span><span class="sxs-lookup"><span data-stu-id="e691a-246">You can provide up to 10 instances.</span></span>

```[
{"platform":"windows_universal", "application":"Microsoft.Contoso_8wekyb3d8bbwe"},
{"platform":"windows_win32", "application":"DefaultBrowser_NOPUBLISHERID!Microsoft.Contoso.Default"},
{"platform":"android","application":"com.example.myapp"},
{"platform":"ios", "application":"com.example.myapp"},
{"platform":"web", "application":"https://contoso.com"},
{"platform":"web", "application":"https://chat.contoso.com"},
{"platform":"msa", "application":"00000000603E0BF"},
{"platform":"msa", "application":"48932b46-98b1-4020-9be4-cc7a65643c9e"},
]
```

<span data-ttu-id="e691a-247">Вы можете найти идентификаторы имеющихся приложений и клиентов или подготовить новые, войдя на  [портал регистрации приложений](https://apps.dev.microsoft.com) с помощью учетной записи разработчика.</span><span class="sxs-lookup"><span data-stu-id="e691a-247">You can find your existing app ID/client IDs or provision new ones by signing in to the [Application Registration Portal](https://apps.dev.microsoft.com) with your developer account.</span></span> <span data-ttu-id="e691a-248">После входа вы сможете просмотреть идентификатор приложения или клиента для любого приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-248">When you sign in, you can view the App ID/client ID for any of your apps.</span></span> <span data-ttu-id="e691a-249">Поддерживаются как идентификаторы Live SDK (шестнадцатеричные значения), так и конвергированные идентификаторы приложений (GUID).</span><span class="sxs-lookup"><span data-stu-id="e691a-249">Both Live SDK (hex values) and converged app IDs (GUIDs) are supported.</span></span> <span data-ttu-id="e691a-250">Используйте тип платформы msa при добавлении идентификаторов, используемых для включения поддержки учетной записи Майкрософт или Azure AD, как показано в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="e691a-250">Use the platform type "msa" when you add the IDs used to enable support for a Microsoft account or Azure AD, as shown in the previous example.</span></span>  

><span data-ttu-id="e691a-251">**Примечание.** Если вы создаете приложение, поддерживающее пользователей Azure AD, не используя конвергированный идентификатор приложения, выданный на  [портале регистрации приложений](https://apps.dev.microsoft.com), то вам потребуется указать GUID в качестве идентификатора приложения Azure.</span><span class="sxs-lookup"><span data-stu-id="e691a-251">**Note:** If you're building an application that supports Azure AD users, and you do not use a converged application ID issued through the [Application Registration Portal](https://apps.dev.microsoft.com), you will need to provide the GUID for the application ID of your Azure app.</span></span> <span data-ttu-id="e691a-252">Для такого идентификатора также следует задать тип платформы msa.</span><span class="sxs-lookup"><span data-stu-id="e691a-252">This type of ID should also be configured as platform type "msa".</span></span> 

<span data-ttu-id="e691a-253">Чтобы определить GUID на портале Azure для клиента, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="e691a-253">To find the GUID in the Azure Portal for your tenant:</span></span> 

1. <span data-ttu-id="e691a-254">Войдите на [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="e691a-254">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="e691a-255">Выберите **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="e691a-255">Select **Azure Active Directory**.</span></span> 
3. <span data-ttu-id="e691a-256">В разделе **Управление** выберите **Регистрация приложений**.</span><span class="sxs-lookup"><span data-stu-id="e691a-256">Under **Manage**, select **App registrations**.</span></span>
4. <span data-ttu-id="e691a-257">Выберите приложение из списка.</span><span class="sxs-lookup"><span data-stu-id="e691a-257">Select your app from the list.</span></span> <span data-ttu-id="e691a-258">Вы можете просмотреть идентификатор приложения (GUID) в разделе **Основное**.</span><span class="sxs-lookup"><span data-stu-id="e691a-258">You can view your application ID (GUID) under **Essentials**.</span></span>

#### <a name="encoding-the-cross-platform-app-identifiers-file"></a><span data-ttu-id="e691a-259">Кодирование файла cross-platform-app-identifiers</span><span class="sxs-lookup"><span data-stu-id="e691a-259">Encoding the cross-platform-app-identifiers file</span></span> 
<span data-ttu-id="e691a-260">Если действия не возобновляются в нужных собственных приложениях на разных платформах или вам не удается считывать действия, опубликованные всеми участниками группы, возможно, JSON-файл не анализируется должным образом.</span><span class="sxs-lookup"><span data-stu-id="e691a-260">If you're not seeing activities resume in the correct native applications across platforms, or you're unable to read activities published by all members in the group, your JSON file might not be getting parsed appropriately.</span></span> <span data-ttu-id="e691a-261">Создавая его, обязательно сохраните файл cross-platform-app-identifiers с кодировкой "Юникод (UTF-8, без сигнатуры), кодовая страница 65001".</span><span class="sxs-lookup"><span data-stu-id="e691a-261">When outputting this file, make sure you're saving the cross-platform-app-identifiers file with "Unicode (UTF-8 without signature) - Codepage 65001" encoding.</span></span>

#### <a name="updating-the-cross-platform-app-identifiers-json-file"></a><span data-ttu-id="e691a-262">Обновление JSON-файла cross-platform-app-identifiers</span><span class="sxs-lookup"><span data-stu-id="e691a-262">Updating the cross-platform-app-identifiers JSON file</span></span> 
<span data-ttu-id="e691a-263">Система кэширует содержимое JSON-файла во избежание частой отправки запросов в домене.</span><span class="sxs-lookup"><span data-stu-id="e691a-263">The system will cache the contents of the JSON file to avoid generating frequent requests on your domain.</span></span> <span data-ttu-id="e691a-264">Если настроены заголовки кэша HTTP, служба будет учитывать их при определении времени обновления кэша.</span><span class="sxs-lookup"><span data-stu-id="e691a-264">If configured, the service will respect HTTP cache headers when evaluating when to refresh the cache.</span></span> <span data-ttu-id="e691a-265">Если же они не настроены, служба будет обновлять кэш каждые 24 часа.</span><span class="sxs-lookup"><span data-stu-id="e691a-265">If not configured, the service will refresh every 24 hours.</span></span> 

## <a name="configure-your-app-client"></a><span data-ttu-id="e691a-266">Настройка клиента приложения</span><span class="sxs-lookup"><span data-stu-id="e691a-266">Configure your app client</span></span> 
<span data-ttu-id="e691a-267">При использовании клиентских API для Windows, iOS или Android необходимо убедиться, что для клиента приложения задано значение узла, представляющее удостоверение приложения для нескольких устройств (например, contoso.com).</span><span class="sxs-lookup"><span data-stu-id="e691a-267">If you're using the client-side APIs for Windows, iOS, or Android, you'll need to make sure your app client is configured with the host value that represents your cross-device app identity (for example, contoso.com).</span></span>

### <a name="microsoft-graph-apps"></a><span data-ttu-id="e691a-268">Приложения Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="e691a-268">Microsoft Graph apps</span></span> 
<span data-ttu-id="e691a-269">Если ваше приложение использует API веб-каналов активности в Microsoft Graph, то значение узла необходимо передавать в свойстве **activitySourceHost**.</span><span class="sxs-lookup"><span data-stu-id="e691a-269">If you have an app using the activity feed API in Microsoft Graph, your host value must be supplied in the **activitySourceHost** property.</span></span> <span data-ttu-id="e691a-270">Дополнительные сведения см. в статье [Тип ресурса activity](/graph/api/resources/projectrome-activity?view=graph-rest-1.0).</span><span class="sxs-lookup"><span data-stu-id="e691a-270">For details, see [activity resource type](/graph/api/resources/projectrome-activity?view=graph-rest-1.0).</span></span>

### <a name="universal-windows-apps"></a><span data-ttu-id="e691a-271">Универсальные приложения для Windows</span><span class="sxs-lookup"><span data-stu-id="e691a-271">Universal Windows apps</span></span>
<span data-ttu-id="e691a-272">Если у вас есть приложение для Windows, то перед публикацией данных необходимо настроить значение узла в манифесте приложения.</span><span class="sxs-lookup"><span data-stu-id="e691a-272">If you have a Windows app, you will need to configure the host value in your app manifest before publishing data.</span></span> <span data-ttu-id="e691a-273">Дополнительные сведения см. в статье [uap5:UserActivity](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-uap5-useractivity).</span><span class="sxs-lookup"><span data-stu-id="e691a-273">For details, see [uap5:UserActivity](https://docs.microsoft.com/uwp/schemas/appxpackage/uapmanifestschema/element-uap5-useractivity).</span></span> 

<!-- Removing until we add the details.
### iOS & Android apps
*Details coming soon.*
-->

## <a name="maintaining-your-cross-device-app-configuration"></a><span data-ttu-id="e691a-274">Обслуживание конфигурации приложения для нескольких устройств</span><span class="sxs-lookup"><span data-stu-id="e691a-274">Maintaining your cross-device app configuration</span></span>
<span data-ttu-id="e691a-275">Выпуская новое приложение, создающее действия пользователей, важно настроить приложение для нескольких устройств, заранее указав новые значения конфигурации, чтобы все новые опубликованные действия были правильно сопоставлены с приложением для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-275">When releasing a new application that will generate user activities, it's important to update the cross-device app with the new configuration values in advance so that any new activities published are correctly associated with the cross-device app.</span></span> <span data-ttu-id="e691a-276">Конфигурация приложения для нескольких устройств, связанная с действиями пользователей, опубликованными до изменения конфигурации, не обновляется автоматически.</span><span class="sxs-lookup"><span data-stu-id="e691a-276">The cross-device app configuration associated with user activities that have been published prior to a change in configuration will not be updated automatically.</span></span> <span data-ttu-id="e691a-277">Однако при выполнении операции обновления любого действия со старой конфигурацией выполняется обновление до последней версии файла.</span><span class="sxs-lookup"><span data-stu-id="e691a-277">However, an update operation performed on any activity with an old configuration will be updated to the most recent version on file.</span></span>  

## <a name="troubleshooting"></a><span data-ttu-id="e691a-278">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="e691a-278">Troubleshooting</span></span>

<span data-ttu-id="e691a-279">Ниже описываются некоторые распространенные проблемы, которые могут возникать с API веб-каналов активности.</span><span class="sxs-lookup"><span data-stu-id="e691a-279">The following are some common issues that can occur with the activity feed API.</span></span>

### <a name="activities-are-not-available-to-read-and-write-for-all-apps-in-the-cross-device-app-configuration"></a><span data-ttu-id="e691a-280">Действия недоступны для чтения и записи всем приложениям в конфигурации приложения для нескольких устройств</span><span class="sxs-lookup"><span data-stu-id="e691a-280">Activities are not available to read and write for all apps in the cross-device app configuration</span></span>
<span data-ttu-id="e691a-281">API веб-каналов активности асинхронно принимает конфигурацию приложения для нескольких устройств, поэтому ошибки конфигурации могут быть не сразу замечены при публикации действий пользователя.</span><span class="sxs-lookup"><span data-stu-id="e691a-281">The activity feed API ingests the cross-device app configuration asynchronously, so configuration errors might not be readily apparent when publishing user activities.</span></span> <span data-ttu-id="e691a-282">Если службе не удастся получить JSON-файл по причине ошибки протокола TLS или неправильного форматирования, все опубликованные действия будут связаны только с идентификатором приложения, опубликовавшего действия.</span><span class="sxs-lookup"><span data-stu-id="e691a-282">In the event the service fails to ingest the JSON file, either due to TLS or formatting error, any activities that have been published will be attributed to the app ID that posted the activity, only.</span></span> <span data-ttu-id="e691a-283">Что касается действий, опубликованных через Microsoft Graph, это идентификатор приложения учетной записи Майкрософт, используемый для авторизации запросов к Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="e691a-283">In the case of activities published via Microsoft Graph, this is the Microsoft account app ID used to authorize requests to Microsoft Graph.</span></span> <span data-ttu-id="e691a-284">В случае действий, опубликованных с помощью клиентских API, activity.applicationId запишет идентификатор только того приложения для определенной платформы, которое опубликовало действие.</span><span class="sxs-lookup"><span data-stu-id="e691a-284">In the case of activities published via client-side APIs, the activity.applicationId will record the ID of the platform-specific app that posted the activity, only.</span></span> <span data-ttu-id="e691a-285">Это препятствует выполнению операций чтения и записи с действиями из каких-либо других приложений для определенных платформ, определенных в конфигурации приложения для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-285">This will prevent read and write operations on activities from any other platform-specific apps identified in the cross-device app configuration.</span></span> 

### <a name="platform-will-not-initialize-on-android-or-ios"></a><span data-ttu-id="e691a-286">Платформа не инициализируется на Android или iOS</span><span class="sxs-lookup"><span data-stu-id="e691a-286">Platform will not initialize on Android or iOS</span></span>
<span data-ttu-id="e691a-287">Интерфейсу API ретрансляции устройств для Android или iOS требуется конфигурация приложения для нескольких устройств, чтобы создавать экземпляры подключений к приложению Android или iOS.</span><span class="sxs-lookup"><span data-stu-id="e691a-287">The device relay API for Android or iOS requires the cross-device app configuration in order to instantiate connections to the Android or iOS app.</span></span> <span data-ttu-id="e691a-288">Если платформе не удается инициализироваться, убедитесь, что вы правильно указали идентификаторы приложений учетной записи Майкрософт и учетные данные push-уведомлений, используемые для настройки приложения для нескольких устройств в Центре разработки для Windows. Кроме того, в качестве значения узла клиентских приложений укажите домен, определяющий ваше приложение для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="e691a-288">In the event that the platform fails to initialize successfully, make sure you have correctly identified the Microsoft account app IDs and push notification credentials used to configure your cross-device app in the Windows Dev Center, and configure your client apps' host value with the domain that identifies your cross-device app.</span></span> 
